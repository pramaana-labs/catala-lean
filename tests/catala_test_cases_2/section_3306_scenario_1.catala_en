> Module Section_3306_scenario_1
> Using Sections as IRC

```catala
#[test]
declaration scope Section_3306_scenario_1:
  output computation content IRC.IRCSimplified

scope Section_3306_scenario_1:
  # Scenario: §3306(a)(1)(A) general employer threshold met by cash wages ≥ $1,500 in 2024.
  # Two employees receive regular compensation in 2024; i1 paid $8,500 (triggering §3306(b)(1) cap),
  # i2 paid $3,000. All services are within the United States and are general (non-agricultural, non-domestic),
  # satisfying §3306(c)(A) employment.

  definition computation equals
    # Entities
    let i1 equals IRC.Individual { -- id: 1 -- is_counterfactual: false } in
    let i2 equals IRC.Individual { -- id: 2 -- is_counterfactual: false } in
    # Dummy taxpayer for individual income tax return required by IRCSimplified
    let t0 equals IRC.Individual { -- id: 99 -- is_counterfactual: false } in

    let org1 equals IRC.Organization {
      -- id: 1
      -- organization_type: IRC.OrganizationType.Business
      -- is_counterfactual: false
    } in

    # Employment relationships (general employment within the U.S.) in 2024
    let emp_rel_1 equals IRC.EmploymentRelationshipEvent {
      -- id: 1
      -- employer: org1
      -- employee: i1
      -- start_date: Date.of_year_month_day of 2024, 2, 1
      -- end_date: Date.of_year_month_day of 2024, 12, 31
      -- employment_category: IRC.EmploymentCategory.General
      -- service_location: IRC.ServiceLocation.WithinUnitedStates
      -- is_american_employer: false
      -- employee_is_us_citizen: true
      -- is_counterfactual: false
    } in
    let emp_rel_2 equals IRC.EmploymentRelationshipEvent {
      -- id: 2
      -- employer: org1
      -- employee: i2
      -- start_date: Date.of_year_month_day of 2024, 3, 1
      -- end_date: Date.of_year_month_day of 2024, 12, 31
      -- employment_category: IRC.EmploymentCategory.General
      -- service_location: IRC.ServiceLocation.WithinUnitedStates
      -- is_american_employer: false
      -- employee_is_us_citizen: true
      -- is_counterfactual: false
    } in

    # Wage payments (cash; regular compensation)
    let wage_i1 equals IRC.WagePaymentEvent {
      -- id: 1
      -- employer: org1
      -- employee: i1
      -- payment_date: Date.of_year_month_day of 2024, 3, 1
      -- amount: $8500
      -- payment_medium: IRC.PaymentMedium.Cash
      -- payment_reason: IRC.PaymentReason.RegularCompensation
      -- is_under_plan_or_system: false
      -- is_for_employee_generally: false
      -- is_for_class_of_employees: false
      -- is_for_dependents: false
      -- is_not_in_course_of_trade_or_business: false
      -- would_have_been_paid_without_termination: true
      -- is_paid_to_survivor_or_estate: false
      -- is_counterfactual: false
    } in
    let wage_i2 equals IRC.WagePaymentEvent {
      -- id: 2
      -- employer: org1
      -- employee: i2
      -- payment_date: Date.of_year_month_day of 2024, 5, 1
      -- amount: $3000
      -- payment_medium: IRC.PaymentMedium.Cash
      -- payment_reason: IRC.PaymentReason.RegularCompensation
      -- is_under_plan_or_system: false
      -- is_for_employee_generally: false
      -- is_for_class_of_employees: false
      -- is_for_dependents: false
      -- is_not_in_course_of_trade_or_business: false
      -- would_have_been_paid_without_termination: true
      -- is_paid_to_survivor_or_estate: false
      -- is_counterfactual: false
    } in

    # FUTA excise tax return (employer unemployment excise tax)
    let futa_details equals IRC.EmployerGeneralVariant { -- employer: org1 } in
    let futa_return equals IRC.EmployerUnemploymentExciseTaxReturn {
      -- id: 1
      -- tax_year: 2024
      -- details: IRC.EmployerVariant.GeneralEmployer content futa_details
    } in

    # Minimal individual income tax return required by IRCSimplified (not used in FUTA assertions)
    let single_details equals IRC.SingleVariant {
      -- taxpayer: t0
      -- itemization_election: false
      -- is_estate_or_trust: false
      -- is_common_trust_fund: false
      -- is_partnership: false
    } in
    let individual_tax_return equals IRC.IndividualTaxReturn {
      -- id: 1
      -- tax_year: 2024
      -- details: IRC.FilingStatusVariant.Single content single_details
    } in

    output of IRC.IRCSimplified with {
      -- individual_tax_return: individual_tax_return
      -- individuals: [ i1 ] ++ [ i2 ] ++ [ t0 ]
      -- organizations: [ org1 ]
      -- birth_events: []
      -- blindness_status_events: []
      -- death_events: []
      -- nonresident_alien_status_period_events: []
      -- marriage_events: []
      -- divorce_or_legal_separation_events: []
      -- residence_period_events: []
      -- household_maintenance_events: []
      -- parenthood_events: []
      -- family_relationship_events: []
      -- tax_return_events: []
      -- income_events: []
      -- employment_relationship_events: [ emp_rel_1 ] ++ [ emp_rel_2 ]
      -- wage_payment_events: [ wage_i1 ] ++ [ wage_i2 ]
      -- student_enrollment_events: []
      -- hospital_patient_events: []
      -- immigration_admission_events: []
      -- employment_termination_events: []
      -- employer_unemployment_excise_tax_return: futa_return
      # Not relevant to FUTA outputs below; set to zero for completeness
      -- itemized_deductions: $0
      -- adjusted_gross_income: $0
    }

  # Assertions:

  # 1) §3306(a)(1)(A): Employer status by wages ≥ $1,500 in calendar year.
  # Check that the organization is recognized as an employer for general (non-agricultural, non-domestic) services.
  assertion (
    exists status among computation.organization_employer_statuses
      such that status.is_employer
      and status.is_general_employer
  )

  # 2) §3306(b)(1): Total taxable wages after applying per-employee $7,000 cap.
  # i1 contributes $7,000 (capped from $8,500), i2 contributes $3,000 → total $10,000.
  assertion (computation.employer_unemployment_excise_tax_result.total_taxable_wages = $10000)

  # 3) §3306(b)(1): Amount excluded above $7,000 for employee i1 equals $1,500 on the single $8,500 payment.
  # We identify the wage result for i1 and assert the excluded portion (amount above $7,000) equals $1,500.
  assertion (
    exists wr among computation.wage_payment_wages_results
      such that wr.wage_payment_event.employee.id = 1
      and (wr.taxable_amount_before_7000_cap - $7000) = $1500
  )
```