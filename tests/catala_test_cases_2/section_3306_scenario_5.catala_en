> Module Section_3306_scenario_5
> Using Sections as IRC

```catala
#[test]
declaration scope Section_3306_scenario_5:
  # We aggregate all section-specific results we need into a single tuple output,
  # so assertions can reference only this scope's output (as required).
  output results content
    (
      IRC.OrganizationSection3306EmployerStatusOutput,           # §3306(a) employer status (incl. (a)(3))
      IRC.WagePaymentEventSection3306WagesOutput,               # §3306(b) wages exclusions (incl. (b)(7))
      IRC.EmploymentRelationshipEventSection3306EmploymentOutput, # §3306(c) employment (incl. (c)(2))
      IRC.EmployerUnemploymentExciseTaxFilerSection3301TaxOutput  # total taxable wages for FUTA tax base
    )

scope Section_3306_scenario_5:
  # Scenario: Domestic service wages paid in a medium other than cash do not qualify under §3306(a)(3)
  # and are excluded under §3306(b)(7) when not in the course of trade or business; consequently,
  # domestic service is not included under §3306(c)(2) because the cash remuneration threshold is not met.
  # Tested law refs: §3306(a)(3), §3306(b)(7), §3306(c)(2)

  definition results equals
    # Entities
    let i4 equals IRC.Individual {
      -- id: 1
      -- is_counterfactual: false
    } in
    let org5 equals IRC.Organization {
      -- id: 1
      -- organization_type: IRC.OrganizationType.Club   # local college club context per §3306(a)(3), (c)(2)
      -- is_counterfactual: false
    } in

    # Events
    let emp_rel equals IRC.EmploymentRelationshipEvent {
      -- id: 1
      -- employer: org5
      -- employee: i4
      -- start_date: Date.of_year_month_day of 2024, 7, 1
      -- end_date: Date.of_year_month_day of 2024, 7, 31
      -- employment_category: IRC.EmploymentCategory.DomesticService
      -- service_location: IRC.ServiceLocation.WithinUnitedStates
      -- is_american_employer: false
      -- employee_is_us_citizen: true
      -- is_counterfactual: false
    } in

    # Noncash remuneration, not in course of trade or business (triggers §3306(b)(7) exclusion)
    let wage1 equals IRC.WagePaymentEvent {
      -- id: 1
      -- employer: org5
      -- employee: i4
      -- payment_date: Date.of_year_month_day of 2024, 7, 15
      -- amount: $1200
      -- payment_medium: IRC.PaymentMedium.NonCash
      -- payment_reason: IRC.PaymentReason.DomesticServiceNonBusiness
      -- is_under_plan_or_system: false
      -- is_for_employee_generally: false
      -- is_for_class_of_employees: false
      -- is_for_dependents: false
      -- is_not_in_course_of_trade_or_business: true
      -- would_have_been_paid_without_termination: true
      -- is_paid_to_survivor_or_estate: false
      -- is_counterfactual: false
    } in

    # Employer FUTA return (domestic service employer variant)
    let futa_return equals IRC.EmployerUnemploymentExciseTaxReturn {
      -- id: 1
      -- tax_year: 2024
      -- details: IRC.EmployerVariant.DomesticServiceEmployer content IRC.EmployerDomesticServiceVariant { -- employer: org5 }
    } in

    # §3306(a) employer status computation (checks (a)(3) domestic cash threshold)
    let employer_status equals
      (output of IRC.OrganizationSection3306EmployerStatus with {
        -- organization: org5
        -- calendar_year: 2024
        -- wage_payment_events: [ wage1 ]
        -- employment_relationship_events: [ emp_rel ]
      }).main_output
    in

    # §3306(b) wages exclusions computation (checks (b)(7): noncash, not in trade or business)
    let wage_result equals
      (output of IRC.WagePaymentEventSection3306Wages with {
        -- wage_payment_event: wage1
        -- employment_termination_events: []
        -- death_events: []
      }).main_output
    in

    # §3306(c) employment inclusion computation (checks (c)(2): domestic service cash threshold)
    let employment_result equals
      (output of IRC.EmploymentRelationshipEventSection3306Employment with {
        -- employment_relationship_event: emp_rel
        -- calendar_year: 2024
        -- wage_payment_events: [ wage1 ]
        -- employment_relationship_events: [ emp_rel ]
        -- student_enrollment_events: []
        -- hospital_patient_events: []
        -- immigration_admission_events: []
        -- parenthood_events: []
        -- birth_events: []
        -- marriage_events: []
      }).main_output
    in

    # FUTA §3301 tax base aggregation (needs wage, employer status, and employment results)
    let employer_tax equals
      (output of IRC.EmployerUnemploymentExciseTaxFilerSection3301Tax with {
        -- employer_unemployment_excise_tax_return: futa_return
        -- wage_payment_wages_results: [ wage_result ]
        -- organization_employer_statuses: [ employer_status ]
        -- employment_relationship_employment_results: [ employment_result ]
      }).main_output
    in

    # Aggregate all needed results into a single tuple output
    (employer_status, wage_result, employment_result, employer_tax)

  # Assertions - ONLY reference 'results' (the output of this scope), no re-calls or event re-creations.

  # §3306(a)(3): Domestic service employer threshold requires "wages in cash" ≥ $1,000 in the year or preceding.
  # Here remuneration is noncash, so threshold is NOT met.
  assertion (
    # employer_status_a3_domestic_cash_wages_threshold_met = false
    results.1.is_domestic_service_employer = false
  )

  # §3306(b)(7): Excludes remuneration paid in a medium other than cash for service not in the employer's trade or business.
  # We assert the exclusion flag and that the $1,200 payment is fully excluded (taxable amount before cap = $0).
  assertion (
    # wages_excluded_b7_noncash_not_trade_or_business = 1200
    results.2.is_excluded_by_nonbusiness_service = true
  )
  assertion (
    # Confirm excluded amount equals the payment amount: 1200 - 0 = 1200
    results.2.wage_payment_event.amount - results.2.taxable_amount_before_7000_cap = $1200
  )

  # §3306(c)(2): Domestic service in a private home, local college club, or local chapter is NOT employment
  # unless "cash remuneration" ≥ $1,000 in the year or preceding. Here there is no cash remuneration, so not included.
  assertion (
    # employment_domestic_included_under_c2 = false
    results.3.is_employment = false
  )

  # Total taxable wages for FUTA base should be $0 (all remuneration excluded by §3306(b)(7)).
  assertion (
    # taxable_wages_total_b = 0
    results.4.total_taxable_wages = $0
  )
```