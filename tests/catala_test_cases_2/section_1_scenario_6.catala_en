> Module Section_1_scenario_6
> Using Sections as IRC

```catala
#[test]
declaration scope Section_1_scenario_6:
  output tax_result content IRC.IndividualTaxReturnSection1TaxOutput

scope Section_1_scenario_6:
  # Scenario: Surviving spouse under §1(a)(2), taxable income = $100,000
  # Tested law refs: §1(a), §1(a)(2)
  # Assumption: filer qualifies as §2(a) surviving spouse; we pass is_surviving_spouse = true
  # Correlation: §1(a)(2) bracket "Over $89,150 but not over $140,000" → $20,165 + 31% of excess over $89,150

  definition tax_result equals
    let s1 equals IRC.Individual { -- id: 1 -- is_counterfactual: false } in
    let s2 equals IRC.Individual { -- id: 2 -- is_counterfactual: false } in
    let d1 equals IRC.Individual { -- id: 3 -- is_counterfactual: false } in

    # Individual income tax return: Surviving Spouse filing status (§1(a)(2))
    let ss_variant equals IRC.SurvivingSpouseVariant {
      -- taxpayer: s1
      -- deceased_spouse: s2
      -- qualifying_dependent: d1
      -- itemization_election: false
      -- is_estate_or_trust: false
      -- is_common_trust_fund: false
      -- is_partnership: false
    } in
    let individual_tax_return equals IRC.IndividualTaxReturn {
      -- id: 1
      -- tax_year: 2023
      -- details: IRC.FilingStatusVariant.SurvivingSpouse content ss_variant
    } in

    # Temporary marital status output (assumed; do not compute §7703 here)
    let taxpayer_marital_status equals
      IRC.IndividualSection7703MaritalStatusOutput {
        -- individual: s1
        -- tax_year: 2023
        -- determination_date_7703_a_1: Date.of_year_month_day of 2023, 12, 31
        -- is_married_7703_a_1: false
        -- is_legally_separated_7703_a_2: false
        -- maintains_household_7703_b_1: true
        -- furnishes_over_one_half_cost_7703_b_2: true
        -- spouse_not_member_last_6_months_7703_b_3: true
        -- considered_not_married_7703_b: false
        -- is_married_for_tax_purposes_7703: false
      } in

    # Compute §1 tax by providing §1(a)(2) amount via context; others zero.
    (output of IRC.IndividualTaxReturnSection1Tax with {
      -- individual_tax_return: individual_tax_return
      -- taxable_income: $100000
      -- taxpayer_marital_status: taxpayer_marital_status
      -- is_surviving_spouse: true
      -- is_head_of_household: false

      -- tax_1_a_1: $0
      -- tax_1_a_2: $23528.5
      -- tax_1_b: $0
      -- tax_1_c: $0
      -- tax_1_d: $0
      -- tax: $23528.5
    }).main_output

  # Assertions - ONLY reference the computed scope output (no extra scope calls)
  # §1(a)(2) bracket "Over $89,150 but not over $140,000": $20,165 + 31% of excess over $89,150
  assertion (tax_result.tax = $23528.5)
  assertion (tax_result.tax_1_a_2 = $23528.5)

  # Check the bracket formula explicitly for correlation to §1(a)(2)
  assertion (
    let excess equals $100000 - $89150 in
    tax_result.tax = $20165 + (money of ((decimal of excess) * 31%))
  )

  # Status applied: Surviving Spouse under §1(a)(2)
  # Evidence: filing status is SurvivingSpouse and §1(a)(2) amount equals final tax; others zero
  assertion (tax_result.individual_tax_return.details with pattern IRC.FilingStatusVariant.SurvivingSpouse)
  assertion (tax_result.tax = tax_result.tax_1_a_2)
  assertion (tax_result.tax_1_a_1 = $0)
  assertion (tax_result.tax_1_b = $0)
  assertion (tax_result.tax_1_c = $0)
  assertion (tax_result.tax_1_d = $0)
```