> Module Section_1_scenario_3
> Using Sections as IRC

```catala
#[test]
declaration scope Section_1_scenario_3:
  output tax_result content IRC.IndividualTaxReturnSection1TaxOutput

scope Section_1_scenario_3:
  # Scenario: MFJ with taxable income $36,901 (just $1 over first bracket)
  # Tested law refs: §1(a), §1(a)(1)
  # Goal: Apply §1(a) second bracket formula: $5,535 + 28% of excess over $36,900

  definition tax_result equals
    # Entities
    let i5 equals IRC.Individual { -- id: 1 -- is_counterfactual: false } in
    let i6 equals IRC.Individual { -- id: 2 -- is_counterfactual: false } in

    # Marriage event (establishes married status)
    let marriage1 equals IRC.MarriageEvent {
      -- id: 1
      -- spouse1: i5
      -- spouse2: i6
      -- marriage_date: Date.of_year_month_day of 2018, 11, 20
      -- is_counterfactual: false
    } in

    # Income event (not used directly by §1 tax scope but included from inputs)
    let inc1 equals IRC.IncomeEvent {
      -- id: 1
      -- individual: i5
      -- tax_year: 2023
      -- has_income: true
      -- earned_income: $36901
      -- is_counterfactual: false
    } in

    # Joint return details for §1(a)(1)
    let joint_details equals IRC.JointReturnVariant {
      -- taxpayer: i5
      -- spouse: i6
      -- itemization_election: false
      -- is_estate_or_trust: false
      -- is_common_trust_fund: false
      -- is_partnership: false
    } in
    let individual_tax_return equals IRC.IndividualTaxReturn {
      -- id: 1
      -- tax_year: 2023
      -- details: IRC.FilingStatusVariant.JointReturn content joint_details
    } in

    # Temporary §7703 marital status output (assumed; do not compute dependent scopes)
    let marital_status equals
      IRC.IndividualSection7703MaritalStatusOutput {
        -- individual: i5
        -- tax_year: 2023
        -- determination_date_7703_a_1: Date.of_year_month_day of 2023, 12, 31
        -- is_married_7703_a_1: true
        -- is_legally_separated_7703_a_2: false
        -- maintains_household_7703_b_1: false
        -- furnishes_over_one_half_cost_7703_b_2: false
        -- spouse_not_member_last_6_months_7703_b_3: false
        -- considered_not_married_7703_b: false
        -- is_married_for_tax_purposes_7703: true
      } in

    # Taxable income and bracket calculation for §1(a) second bracket
    let taxable_income equals $36901 in
    # Base for MFJ at $36,900 is 15% * 36,900 = $5,535; excess is $1; 28% of $1 = $0.28
    let mfj_second_bracket_tax equals $5535.28 in

    # Compute §1 tax; provide context amounts explicitly
    (output of IRC.IndividualTaxReturnSection1Tax with {
      -- individual_tax_return: individual_tax_return
      -- taxable_income: taxable_income
      -- taxpayer_marital_status: marital_status
      -- is_surviving_spouse: false
      -- is_head_of_household: false

      # Context outputs per §1 categories
      # §1(a)(1) MFJ applied, second bracket "Over $36,900 but not over $89,150"
      -- tax_1_a_1: mfj_second_bracket_tax

      # Not applicable in this scenario
      -- tax_1_a_2: $0     # §1(a)(2) Surviving spouse
      -- tax_1_b: $0       # §1(b) Head of household
      -- tax_1_c: $0       # §1(c) Single
      -- tax_1_d: $0       # §1(d) Married filing separately

      # Final tax amount
      -- tax: mfj_second_bracket_tax
    }).main_output

  # Assertions:
  # §1(a) amount: $5,535 + 28% of excess over $36,900 with excess = $1 ⇒ $5,535.28
  assertion (tax_result.tax = $5535.28)

  # §1(a) bracket applied: Over $36,900 but not over $89,150 (reflected by nonzero §1(a)(1) amount)
  assertion (tax_result.tax_1_a_1 = $5535.28)

  # §1(a)(1) status applied: JointReturn filing status
  assertion (tax_result.individual_tax_return.details with pattern IRC.FilingStatusVariant.JointReturn)
```