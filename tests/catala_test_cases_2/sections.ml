(** This file has been generated by the Catala compiler, do not edit! *)

[@@@ocaml.warning "-4-26-27-32-33-34-37-41-42-69"]

open Catala_runtime


let () =
  match Catala_runtime.check_module "Stdlib_en" "CM0|2385a192|32e49b03|165aeded"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module Stdlib_en, it may need recompiling"
module Stdlib_en = Stdlib_en
let () =
  match Catala_runtime.check_module "Date_en" "CM0|2385a192|32e49b03|1e05560f"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module Date_en, it may need recompiling"
module Date_en = Date_en
let () =
  match Catala_runtime.check_module "MonthYear_en" "CM0|2385a192|32e49b03|3436d8e8"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module MonthYear_en, it may need recompiling"
module MonthYear_en = MonthYear_en
let () =
  match Catala_runtime.check_module "Period_en" "CM0|2385a192|32e49b03|16c825d2"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module Period_en, it may need recompiling"
module Period_en = Period_en
let () =
  match Catala_runtime.check_module "Money_en" "CM0|2385a192|32e49b03|1b39afab"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module Money_en, it may need recompiling"
module Money_en = Money_en
let () =
  match Catala_runtime.check_module "Integer_en" "CM0|2385a192|32e49b03|002b72fa"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module Integer_en, it may need recompiling"
module Integer_en = Integer_en
let () =
  match Catala_runtime.check_module "Decimal_en" "CM0|2385a192|32e49b03|173e3928"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module Decimal_en, it may need recompiling"
module Decimal_en = Decimal_en
let () =
  match Catala_runtime.check_module "List_en" "CM0|2385a192|32e49b03|24a3fb7d"
    with
  | Ok () -> ()
  | Error h -> failwith "Hash mismatch for module List_en, it may need recompiling"
module List_en = List_en

module FilingStatus = struct
  type t =
    | JointReturn
    | SurvivingSpouse
    | HeadOfHousehold
    | Single
    | MarriedFilingSeparately
end

module ResidencyStatus = struct type t = Resident | NonresidentAlien end

module DecreeType = struct type t = Divorce | SeparateMaintenance end

module ParentType = struct
  type t = Biological | Step | Adoptive
end

module FamilyRelationshipType = struct
  type t =
    | Child
    | DescendantOfChild
    | Brother
    | Sister
    | Stepbrother
    | Stepsister
    | DescendantOfSibling
    | Father
    | Mother
    | AncestorOfFatherOrMother
    | Stepfather
    | Stepmother
    | NieceOrNephew
    | UncleOrAunt
    | SonInLaw
    | DaughterInLaw
    | FatherInLaw
    | MotherInLaw
    | BrotherInLaw
    | SisterInLaw
end

module OrganizationType = struct
  type t =
    | Business
    | GovernmentFederal
    | GovernmentState
    | EducationalInstitution
    | Hospital
    | Club
    | FraternityOrSorority
    | ForeignGovernment
    | InternationalOrganization
    | PenalInstitution
end

module EmploymentCategory = struct
  type t =
    | General
    | AgriculturalLabor
    | DomesticService
    | FederalGovernment
    | StateGovernment
    | SchoolCollegeUniversity
    | Hospital
    | ForeignGovernment
    | InternationalOrganization
    | PenalInstitution
end

module ServiceLocation = struct
  type t = WithinUnitedStates | OutsideUnitedStates
end

module PaymentMedium = struct type t = Cash | NonCash end

module PaymentReason = struct
  type t =
    | RegularCompensation
    | SicknessOrAccidentDisability
    | Death
    | TerminationAfterDeathOrDisabilityRetirement
    | AgriculturalLaborNonCash
    | DomesticServiceNonBusiness
end

module VisaCategory = struct type t = H2A | Other end

module TerminationReason = struct
  type t = Death | DisabilityRetirement | Other
end

module Individual = struct
  type t = {id: integer; is_counterfactual: bool}
end

module Household = struct
  type t = {id: integer; is_counterfactual: bool}
end

module Organization = struct
  type t = {
    id: integer;
    organization_type: OrganizationType.t;
    is_counterfactual: bool
  }
end

module IndividualSection7703MaritalStatusOutput = struct
  type t = {
    individual: Individual.t;
    tax_year: integer;
    determination_date_7703_a_1: date;
    is_married_7703_a_1: bool;
    is_legally_separated_7703_a_2: bool;
    maintains_household_7703_b_1: bool;
    furnishes_over_one_half_cost_7703_b_2: bool;
    spouse_not_member_last_6_months_7703_b_3:
      bool;
    considered_not_married_7703_b: bool;
    is_married_for_tax_purposes_7703: bool
  }
end

module IndividualSection152QualifyingRelativeOutput = struct
  type t = {
    individual: Individual.t;
    taxpayer: Individual.t;
    is_qualifying_relative: bool;
    is_household_member_152_d_2_H: bool;
    bears_relationship_152_d_1_A: bool;
    has_no_income_152_d_1_B: bool;
    is_not_qualifying_child_152_d_1_D: bool
  }
end

module IndividualSection152QualifyingChildOutput = struct
  type t = {
    individual: Individual.t;
    taxpayer: Individual.t;
    is_qualifying_child: bool;
    bears_relationship_152_c_1_A: bool;
    has_same_principal_place_of_abode_152_c_1_B:
      bool;
    meets_age_requirements_152_c_1_C: bool;
    has_not_filed_joint_return_152_c_1_E: bool
  }
end

module IndividualDependentStatus = struct
  type t = {
    individual: Individual.t;
    is_qualifying_child: bool;
    is_qualifying_relative: bool;
    is_excepted_under_152_b_2: bool;
    is_ineligible_under_152_b_1: bool
  }
end

module IndividualSection151PersonalExemptionOutput = struct
  type t = {
    individual: Individual.t;
    exemption_amount_base: money;
    exemption_amount_after_disallowance: money;
    exemption_amount_after_phaseout: money;
    personal_exemptions_deduction_151_a: money;
    applicable_percentage_151_d_3_B: decimal;
    exemption_amount_zero_151_d_5: bool
  }
end

module IndividualSection151ExemptionsListOutput = struct
  type t = {
    individual: Individual.t;
    spouse_exemption_allowed_151_b: bool;
    individuals_entitled_to_exemptions_under_151:
      Individual.t array
  }
end

module ImmigrationAdmissionEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    visa_category: VisaCategory.t;
    admission_date: date;
    is_counterfactual: bool
  }
end

module TaxReturnEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    tax_year: integer;
    filed_joint_return: bool;
    is_only_for_refund_claim: bool;
    qualifying_children: Individual.t array;
    dependents: Individual.t array;
    is_counterfactual: bool
  }
end

module IncomeEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    tax_year: integer;
    has_income: bool;
    earned_income: money;
    is_counterfactual: bool
  }
end

module FamilyRelationshipEvent = struct
  type t = {
    id: integer;
    person: Individual.t;
    relative: Individual.t;
    start_date: date;
    relationship_type: FamilyRelationshipType.t;
    is_counterfactual: bool
  }
end

module ParenthoodEvent = struct
  type t = {
    id: integer;
    parent: Individual.t;
    child: Individual.t;
    start_date: date;
    parent_type: ParentType.t;
    is_counterfactual: bool
  }
end

module DivorceOrLegalSeparationEvent = struct
  type t = {
    id: integer;
    person1: Individual.t;
    person2: Individual.t;
    decree_date: date;
    decree_type: DecreeType.t;
    is_counterfactual: bool
  }
end

module RemarriageEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    remarriage_date: date;
    is_counterfactual: bool
  }
end

module MarriageEvent = struct
  type t = {
    id: integer;
    spouse1: Individual.t;
    spouse2: Individual.t;
    marriage_date: date;
    is_counterfactual: bool
  }
end

module MarriedFilingSeparateVariant = struct
  type t = {
    taxpayer: Individual.t;
    spouse: Individual.t;
    itemization_election: bool;
    spouse_itemization_election: bool;
    is_estate_or_trust: bool;
    is_common_trust_fund: bool;
    is_partnership: bool
  }
end

module SingleVariant = struct
  type t = {
    taxpayer: Individual.t;
    itemization_election: bool;
    is_estate_or_trust: bool;
    is_common_trust_fund: bool;
    is_partnership: bool
  }
end

module HeadOfHouseholdVariant = struct
  type t = {
    taxpayer: Individual.t;
    qualifying_person: Individual.t;
    itemization_election: bool;
    is_estate_or_trust: bool;
    is_common_trust_fund: bool;
    is_partnership: bool
  }
end

module SurvivingSpouseVariant = struct
  type t = {
    taxpayer: Individual.t;
    deceased_spouse: Individual.t;
    qualifying_dependent: Individual.t;
    itemization_election: bool;
    is_estate_or_trust: bool;
    is_common_trust_fund: bool;
    is_partnership: bool
  }
end

module JointReturnVariant = struct
  type t = {
    taxpayer: Individual.t;
    spouse: Individual.t;
    itemization_election: bool;
    is_estate_or_trust: bool;
    is_common_trust_fund: bool;
    is_partnership: bool
  }
end

module NonresidentAlienStatusPeriodEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    start_date: date;
    end_date: date;
    residency_status: ResidencyStatus.t;
    is_counterfactual: bool
  }
end

module DeathEvent = struct
  type t = {
    id: integer;
    decedent: Individual.t;
    death_date: date;
    is_counterfactual: bool
  }
end

module BlindnessStatusEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    status_date: date;
    is_blind: bool;
    is_counterfactual: bool
  }
end

module BirthEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    birth_date: date;
    is_counterfactual: bool
  }
end

module HouseholdMaintenanceEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    household: Household.t;
    start_date: date;
    end_date: date;
    cost_furnished_percentage: decimal;
    is_counterfactual: bool
  }
end

module ResidencePeriodEvent = struct
  type t = {
    id: integer;
    individual: Individual.t;
    household: Household.t;
    start_date: date;
    end_date: date;
    is_member_of_household: bool;
    is_principal_place_of_abode: bool;
    is_counterfactual: bool
  }
end

module OrganizationSection3306EmployerStatusOutput = struct
  type t = {
    organization: Organization.t;
    is_employer: bool;
    is_general_employer: bool;
    is_agricultural_employer: bool;
    is_domestic_service_employer: bool
  }
end

module EmployerDomesticServiceVariant = struct
  type t = {employer: Organization.t}
end

module EmployerAgriculturalLaborVariant = struct
  type t = {employer: Organization.t}
end

module EmployerGeneralVariant = struct
  type t = {employer: Organization.t}
end

module EmploymentTerminationEvent = struct
  type t = {
    id: integer;
    employer: Organization.t;
    employee: Individual.t;
    termination_date: date;
    reason: TerminationReason.t;
    is_counterfactual: bool
  }
end

module HospitalPatientEvent = struct
  type t = {
    id: integer;
    patient: Individual.t;
    hospital: Organization.t;
    start_date: date;
    end_date: date;
    is_counterfactual: bool
  }
end

module StudentEnrollmentEvent = struct
  type t = {
    id: integer;
    student: Individual.t;
    institution: Organization.t;
    start_date: date;
    end_date: date;
    is_regularly_attending: bool;
    is_counterfactual: bool
  }
end

module WagePaymentEvent = struct
  type t = {
    id: integer;
    employer: Organization.t;
    employee: Individual.t;
    payment_date: date;
    amount: money;
    payment_medium: PaymentMedium.t;
    payment_reason: PaymentReason.t;
    is_under_plan_or_system: bool;
    is_for_employee_generally: bool;
    is_for_class_of_employees: bool;
    is_for_dependents: bool;
    is_not_in_course_of_trade_or_business: bool;
    would_have_been_paid_without_termination:
      bool;
    is_paid_to_survivor_or_estate: bool;
    is_counterfactual: bool
  }
end

module EmploymentRelationshipEvent = struct
  type t = {
    id: integer;
    employer: Organization.t;
    employee: Individual.t;
    start_date: date;
    end_date: date;
    employment_category: EmploymentCategory.t;
    service_location: ServiceLocation.t;
    is_american_employer: bool;
    employee_is_us_citizen: bool;
    is_counterfactual: bool
  }
end

module IndividualSection7703MaritalStatus = struct
  type t = {
    main_output:
      IndividualSection7703MaritalStatusOutput.t
  }
end

module IndividualSection152QualifyingRelative = struct
  type t = {
    main_output:
      IndividualSection152QualifyingRelativeOutput.t
  }
end

module IndividualSection152QualifyingChild = struct
  type t = {
    main_output:
      IndividualSection152QualifyingChildOutput.t
  }
end

module IndividualSection152DependentsOutput = struct
  type t = {
    taxpayer: Individual.t;
    dependents_initial: Individual.t array;
    dependents_after_152b1: Individual.t array;
    dependents_after_152b2: Individual.t array;
    qualifying_children:
      IndividualSection152QualifyingChildOutput.t
      array;
    qualifying_relatives:
      IndividualSection152QualifyingRelativeOutput.t
      array;
    individual_dependent_statuses:
      IndividualDependentStatus.t array
  }
end

module IndividualSection151PersonalExemption = struct
  type t = {
    main_output:
      IndividualSection151PersonalExemptionOutput.t
  }
end

module IndividualSection151ExemptionsList = struct
  type t = {
    main_output:
      IndividualSection151ExemptionsListOutput.t
  }
end

module TaxpayerExemptionsList151Output = struct
  type t = {
    taxpayer_result:
      IndividualSection151ExemptionsListOutput.t;
    spouse_result:
      (IndividualSection151ExemptionsListOutput.t) Optional.t;
    individuals_entitled_to_exemptions_under_151:
      Individual.t array;
    spouse_exemption_allowed_151_b: bool
  }
end

module FilingStatusVariant = struct
  type t =
    | JointReturn of JointReturnVariant.t
    | SurvivingSpouse of SurvivingSpouseVariant.t
    | HeadOfHousehold of HeadOfHouseholdVariant.t
    | Single of SingleVariant.t
    | MarriedFilingSeparate of
        MarriedFilingSeparateVariant.t
end

module OrganizationSection3306EmployerStatus = struct
  type t = {
    main_output:
      OrganizationSection3306EmployerStatusOutput.t
  }
end

module EmployerVariant = struct
  type t =
    | GeneralEmployer of EmployerGeneralVariant.t
    | AgriculturalEmployer of
        EmployerAgriculturalLaborVariant.t
    | DomesticServiceEmployer of
        EmployerDomesticServiceVariant.t
end

module WagePaymentEventSection3306WagesOutput = struct
  type t = {
    wage_payment_event: WagePaymentEvent.t;
    is_excluded_by_sickness_disability_death:
      bool;
    is_excluded_by_nonbusiness_service: bool;
    is_excluded_by_termination_payment: bool;
    is_excluded_by_agricultural_noncash: bool;
    is_excluded_by_survivor_payment: bool;
    taxable_amount_before_7000_cap: money
  }
end

module EmploymentRelationshipEventSection3306EmploymentOutput = struct
  type t = {
    employment_relationship_event:
      EmploymentRelationshipEvent.t;
    is_employment: bool;
    is_excluded_agricultural_labor: bool;
    is_excluded_domestic_service: bool;
    is_excluded_family_employment: bool;
    is_excluded_federal_government: bool;
    is_excluded_state_government: bool;
    is_excluded_student_service: bool;
    is_excluded_hospital_patient_service: bool;
    is_excluded_foreign_government: bool;
    is_excluded_student_nurse: bool;
    is_excluded_international_organization: bool;
    is_excluded_penal_institution: bool
  }
end

module IndividualSection152Dependents = struct
  type t = {
    main_output:
      IndividualSection152DependentsOutput.t
  }
end

module TaxpayerExemptionsList151 = struct
  type t = {
    main_output:
      TaxpayerExemptionsList151Output.t
  }
end

module IndividualTaxReturn = struct
  type t = {
    id: integer;
    tax_year: integer;
    details: FilingStatusVariant.t
  }
end

module EmployerUnemploymentExciseTaxReturn = struct
  type t = {
    id: integer;
    tax_year: integer;
    details: EmployerVariant.t
  }
end

module WagePaymentEventSection3306Wages = struct
  type t = {
    main_output:
      WagePaymentEventSection3306WagesOutput.t
  }
end

module TotalWages3306CalculationOutput = struct
  type t = {
    total_taxable_wages: money;
    wage_results_with_cap:
      WagePaymentEventSection3306WagesOutput.t
      array
  }
end

module EmploymentRelationshipEventSection3306Employment = struct
  type t = {
    main_output:
      EmploymentRelationshipEventSection3306EmploymentOutput.t
  }
end

module IndividualTaxReturnSection68ItemizedDeductionsOutput = struct
  type t = {
    individual_tax_return: IndividualTaxReturn.t;
    applicable_amount_68_b_1: money;
    three_percent_reduction_68_a_1: money;
    eighty_percent_reduction_68_a_2: money;
    reduction_amount_68_a: money;
    itemized_deductions_after_68: money;
    section_not_applicable_68_f: bool
  }
end

module IndividualTaxReturnSection63TaxableIncomeOutput = struct
  type t = {
    individual_tax_return: IndividualTaxReturn.t;
    taxable_income: money;
    standard_deduction_63_c_1: money;
    standard_deduction_eligible_63_c_6: bool;
    basic_standard_deduction_63_c_2_before_c_5:
      money;
    basic_standard_deduction_63_c_2_after_c_5:
      money;
    additional_standard_deduction_63_c_3: money;
    additional_amount_taxpayer_aged_63_f_1_A:
      money;
    additional_amount_spouse_aged_63_f_1_B: money;
    additional_amount_taxpayer_blind_63_f_2_A:
      money;
    additional_amount_spouse_blind_63_f_2_B:
      money
  }
end

module IndividualTaxReturnSection2bHeadOfHouseholdOutput = struct
  type t = {
    individual_tax_return: IndividualTaxReturn.t;
    is_legally_separated_2_b_2_A: bool;
    spouse_is_nonresident_alien_2_b_2_B: bool;
    spouse_died_during_year_2_b_2_C: bool;
    is_married_at_year_end_2_b_2: bool;
    taxpayer_is_nonresident_alien_2_b_3_A: bool;
    head_of_household_disqualified_household_member_dependent_2_b_3_B:
      bool;
    is_married_at_year_end_2_b_1_A_i_I: bool;
    is_not_dependent_by_152b2_2_b_1_A_i_II: bool;
    qualifying_child_meets_2_b_1_A_i: bool;
    other_dependent_2_b_1_A_ii: bool;
    maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_A:
      bool;
    maintains_household_for_father_or_mother_2_b_1_B:
      bool;
    is_head_of_household_2_b: bool
  }
end

module IndividualTaxReturnSection2aSurvivingSpouseOutput = struct
  type t = {
    individual_tax_return: IndividualTaxReturn.t;
    spouse_died_within_two_years_2_a_1_A: bool;
    maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_B:
      bool;
    has_remarried_2_a_2_A: bool;
    joint_return_could_have_been_made_2_a_2_B:
      bool;
    is_surviving_spouse_2_a: bool
  }
end

module IndividualTaxReturnSection1TaxOutput = struct
  type t = {
    individual_tax_return: IndividualTaxReturn.t;
    tax_1_a_1: money;
    tax_1_a_2: money;
    tax_1_b: money;
    tax_1_c: money;
    tax_1_d: money;
    tax: money
  }
end

module EmployerUnemploymentExciseTaxFilerSection3301TaxOutput = struct
  type t = {
    employer_unemployment_excise_tax_return:
      EmployerUnemploymentExciseTaxReturn.t;
    total_taxable_wages: money;
    excise_tax: money;
    tax_rate: decimal
  }
end

module TotalWages3306Calculation = struct
  type t = {
    main_output:
      TotalWages3306CalculationOutput.t
  }
end

module IndividualTaxReturnSection68ItemizedDeductions = struct
  type t = {
    main_output:
      IndividualTaxReturnSection68ItemizedDeductionsOutput.t
  }
end

module IndividualTaxReturnSection63TaxableIncome = struct
  type t = {
    main_output:
      IndividualTaxReturnSection63TaxableIncomeOutput.t
  }
end

module IndividualTaxReturnSection2bHeadOfHousehold = struct
  type t = {
    main_output:
      IndividualTaxReturnSection2bHeadOfHouseholdOutput.t
  }
end

module IndividualTaxReturnSection2aSurvivingSpouse = struct
  type t = {
    main_output:
      IndividualTaxReturnSection2aSurvivingSpouseOutput.t
  }
end

module IndividualTaxReturnSection1Tax = struct
  type t = {
    main_output:
      IndividualTaxReturnSection1TaxOutput.t
  }
end

module IRCSimplified = struct
  type t = {
    taxable_income: money;
    itemized_deductions: money;
    adjusted_gross_income: money;
    taxable_income_result:
      IndividualTaxReturnSection63TaxableIncomeOutput.t;
    tax: money;
    is_surviving_spouse: bool;
    is_head_of_household: bool;
    section_2a_surviving_spouse_result:
      IndividualTaxReturnSection2aSurvivingSpouseOutput.t;
    section_2b_head_of_household_result:
      IndividualTaxReturnSection2bHeadOfHouseholdOutput.t;
    itemized_deductions_result:
      IndividualTaxReturnSection68ItemizedDeductionsOutput.t;
    taxpayer_exemptions_list_result:
      TaxpayerExemptionsList151Output.t;
    taxpayer_exemption_result:
      IndividualSection151PersonalExemptionOutput.t;
    tax_imposed_result:
      IndividualTaxReturnSection1TaxOutput.t;
    taxpayer_dependents_result:
      IndividualSection152DependentsOutput.t;
    taxpayer_marital_status_7703:
      IndividualSection7703MaritalStatusOutput.t;
    organization_employer_statuses:
      OrganizationSection3306EmployerStatusOutput.t
      array;
    wage_payment_wages_results:
      WagePaymentEventSection3306WagesOutput.t
      array;
    employment_relationship_employment_results:
      EmploymentRelationshipEventSection3306EmploymentOutput.t
      array;
    employer_unemployment_excise_tax_result:
      EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.t
  }
end

module EmployerUnemploymentExciseTaxFilerSection3301Tax = struct
  type t = {
    total_taxable_wages: money;
    excise_tax: money;
    tax_rate: decimal;
    main_output:
      EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.t
  }
end

module IndividualTaxReturnSection1Tax_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    taxable_income_in: money;
    taxpayer_marital_status_in:
      IndividualSection7703MaritalStatusOutput.t;
    is_surviving_spouse_in: bool;
    is_head_of_household_in: bool;
    tax_1_a_1_in:
      ((money * code_location)) Optional.t;
    tax_1_a_2_in:
      ((money * code_location)) Optional.t;
    tax_1_b_in:
      ((money * code_location)) Optional.t;
    tax_1_c_in:
      ((money * code_location)) Optional.t;
    tax_1_d_in:
      ((money * code_location)) Optional.t;
    tax_in: ((money * code_location)) Optional.t
  }
end

module IndividualTaxReturnSection2aSurvivingSpouse_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    death_events_in: DeathEvent.t array;
    nonresident_alien_status_period_events_in:
      NonresidentAlienStatusPeriodEvent.t array;
    parenthood_events_in: ParenthoodEvent.t array;
    household_maintenance_events_in:
      HouseholdMaintenanceEvent.t array;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    marriage_events_in: MarriageEvent.t array;
    taxpayer_exemptions_list_result_in:
      TaxpayerExemptionsList151Output.t;
    spouse_died_within_two_years_2_a_1_A_in:
      ((bool * code_location)) Optional.t;
    maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_B_in:
      ((bool * code_location)) Optional.t;
    has_remarried_2_a_2_A_in:
      ((bool * code_location)) Optional.t;
    joint_return_could_have_been_made_2_a_2_B_in:
      ((bool * code_location)) Optional.t;
    is_surviving_spouse_2_a_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualTaxReturnSection2bHeadOfHousehold_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    nonresident_alien_status_period_events_in:
      NonresidentAlienStatusPeriodEvent.t array;
    parenthood_events_in: ParenthoodEvent.t array;
    household_maintenance_events_in:
      HouseholdMaintenanceEvent.t array;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    marriage_events_in: MarriageEvent.t array;
    divorce_or_legal_separation_events_in:
      DivorceOrLegalSeparationEvent.t array;
    family_relationship_events_in:
      FamilyRelationshipEvent.t array;
    birth_events_in: BirthEvent.t array;
    tax_return_events_in: TaxReturnEvent.t array;
    taxpayer_exemptions_list_result_in:
      TaxpayerExemptionsList151Output.t;
    taxpayer_dependents_result_in:
      IndividualSection152DependentsOutput.t;
    death_events_in: DeathEvent.t array;
    is_surviving_spouse_2_a_in: bool;
    qualifying_person_qualifying_child_result_in:
      (((IndividualSection152QualifyingChildOutput.t) Optional.t
         * code_location)) Optional.t;
    is_legally_separated_2_b_2_A_in:
      ((bool * code_location)) Optional.t;
    spouse_is_nonresident_alien_2_b_2_B_in:
      ((bool * code_location)) Optional.t;
    spouse_died_during_year_2_b_2_C_in:
      ((bool * code_location)) Optional.t;
    is_married_at_year_end_2_b_2_in:
      ((bool * code_location)) Optional.t;
    taxpayer_is_nonresident_alien_2_b_3_A_in:
      ((bool * code_location)) Optional.t;
    head_of_household_disqualified_household_member_dependent_2_b_3_B_in:
      ((bool * code_location)) Optional.t;
    is_married_at_year_end_2_b_1_A_i_I_in:
      ((bool * code_location)) Optional.t;
    is_not_dependent_by_152b2_2_b_1_A_i_II_in:
      ((bool * code_location)) Optional.t;
    qualifying_child_meets_2_b_1_A_i_in:
      ((bool * code_location)) Optional.t;
    other_dependent_2_b_1_A_ii_in:
      ((bool * code_location)) Optional.t;
    maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_A_in:
      ((bool * code_location)) Optional.t;
    maintains_household_for_father_or_mother_2_b_1_B_in:
      ((bool * code_location)) Optional.t;
    is_head_of_household_2_b_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualTaxReturnSection63TaxableIncome_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    birth_events_in: BirthEvent.t array;
    blindness_status_events_in:
      BlindnessStatusEvent.t array;
    death_events_in: DeathEvent.t array;
    income_events_in: IncomeEvent.t array;
    tax_return_events_in: TaxReturnEvent.t array;
    nonresident_alien_status_period_events_in:
      NonresidentAlienStatusPeriodEvent.t array;
    taxpayer_marital_status_in:
      IndividualSection7703MaritalStatusOutput.t;
    is_surviving_spouse_in: bool;
    is_head_of_household_in: bool;
    taxpayer_exemptions_list_result_in:
      TaxpayerExemptionsList151Output.t;
    taxpayer_exemption_result_in:
      IndividualSection151PersonalExemptionOutput.t;
    adjusted_gross_income_in: money;
    itemized_deductions_result_in:
      IndividualTaxReturnSection68ItemizedDeductionsOutput.t;
    additional_amount_taxpayer_aged_63_f_1_A_in:
      ((money * code_location)) Optional.t;
    additional_amount_spouse_aged_63_f_1_B_in:
      ((money * code_location)) Optional.t;
    additional_amount_taxpayer_blind_63_f_2_A_in:
      ((money * code_location)) Optional.t;
    additional_amount_spouse_blind_63_f_2_B_in:
      ((money * code_location)) Optional.t;
    additional_standard_deduction_63_c_3_in:
      ((money * code_location)) Optional.t;
    basic_standard_deduction_63_c_2_before_c_5_in:
      ((money * code_location)) Optional.t;
    standard_deduction_eligible_63_c_6_in:
      ((bool * code_location)) Optional.t;
    standard_deduction_63_c_1_in:
      ((money * code_location)) Optional.t;
    taxable_income_in:
      ((money * code_location)) Optional.t
  }
end

module IndividualTaxReturnSection68ItemizedDeductions_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    adjusted_gross_income_in: money;
    itemized_deductions_in: money;
    taxpayer_marital_status_in:
      IndividualSection7703MaritalStatusOutput.t;
    is_surviving_spouse_in: bool;
    is_head_of_household_in: bool;
    applicable_amount_68_b_1_in:
      ((money * code_location)) Optional.t;
    three_percent_reduction_68_a_1_in:
      ((money * code_location)) Optional.t;
    eighty_percent_reduction_68_a_2_in:
      ((money * code_location)) Optional.t;
    reduction_amount_68_a_in:
      ((money * code_location)) Optional.t;
    itemized_deductions_after_68_in:
      ((money * code_location)) Optional.t;
    section_not_applicable_68_f_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualSection151ExemptionsList_in = struct
  type t = {
    individual_in: Individual.t;
    spouse_in: (Individual.t) Optional.t;
    tax_year_in: integer;
    tax_return_events_in: TaxReturnEvent.t array;
    income_events_in: IncomeEvent.t array;
    dependents_in: Individual.t array;
    is_joint_or_surviving_spouse_in: bool;
    spouse_personal_exemption_allowed_in:
      ((bool * code_location)) Optional.t;
    individuals_entitled_to_exemptions_under_151_in:
      (((Individual.t array) * code_location)) Optional.t
  }
end

module TaxpayerExemptionsList151_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    tax_return_events_in: TaxReturnEvent.t array;
    income_events_in: IncomeEvent.t array;
    dependents_in: Individual.t array;
    spouse_result_in:
      (((IndividualSection151ExemptionsListOutput.t) Optional.t
         * code_location)) Optional.t;
    individuals_entitled_to_exemptions_under_151_in:
      (((Individual.t array) * code_location)) Optional.t;
    spouse_personal_exemption_allowed_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualSection151PersonalExemption_in = struct
  type t = {
    individual_in: Individual.t;
    individual_tax_return_in:
      IndividualTaxReturn.t;
    tax_year_in: integer;
    tax_return_events_in: TaxReturnEvent.t array;
    adjusted_gross_income_in: money;
    applicable_amount_in: money;
    all_individuals_entitled_to_exemptions_under_151_in:
      Individual.t array;
    exemption_amount_base_in:
      ((money * code_location)) Optional.t;
    number_of_personal_exemptions_151_c_in:
      ((integer * code_location)) Optional.t;
    personal_exemptions_deduction_151_a_in:
      ((money * code_location)) Optional.t;
    applicable_percentage_151_d_3_B_in:
      ((decimal * code_location)) Optional.t;
    exemption_amount_zero_151_d_5_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualSection152Dependents_in = struct
  type t = {
    taxpayer_in: Individual.t;
    tax_year_in: integer;
    individuals_in: Individual.t array;
    family_relationship_events_in:
      FamilyRelationshipEvent.t array;
    birth_events_in: BirthEvent.t array;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    tax_return_events_in: TaxReturnEvent.t array;
    income_events_in: IncomeEvent.t array;
    marriage_events_in: MarriageEvent.t array;
    qualifying_children_in:
      (((IndividualSection152QualifyingChildOutput.t
         array) * code_location)) Optional.t;
    qualifying_relatives_in:
      (((IndividualSection152QualifyingRelativeOutput.t
         array) * code_location)) Optional.t;
    dependents_initial_in:
      (((Individual.t array) * code_location)) Optional.t;
    individual_dependent_statuses_in:
      (((IndividualDependentStatus.t array) *
         code_location)) Optional.t
  }
end

module IndividualSection152QualifyingChild_in = struct
  type t = {
    individual_in: Individual.t;
    taxpayer_in: Individual.t;
    tax_year_in: integer;
    family_relationship_events_in:
      FamilyRelationshipEvent.t array;
    birth_events_in: BirthEvent.t array;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    tax_return_events_in: TaxReturnEvent.t array;
    relationship_requirement_met_in:
      ((bool * code_location)) Optional.t;
    principal_place_of_abode_requirement_met_in:
      ((bool * code_location)) Optional.t;
    age_requirement_met_in:
      ((bool * code_location)) Optional.t;
    joint_return_exception_applies_in:
      ((bool * code_location)) Optional.t;
    is_qualifying_child_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualSection152QualifyingRelative_in = struct
  type t = {
    individual_in: Individual.t;
    taxpayer_in: Individual.t;
    tax_year_in: integer;
    family_relationship_events_in:
      FamilyRelationshipEvent.t array;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    qualifying_child_results_in:
      IndividualSection152QualifyingChildOutput.t
      array;
    tax_return_events_in: TaxReturnEvent.t array;
    income_events_in: IncomeEvent.t array;
    marriage_events_in: MarriageEvent.t array;
    relationship_requirement_met_H_in:
      ((bool * code_location)) Optional.t;
    relationship_requirement_met_in:
      ((bool * code_location)) Optional.t;
    no_income_requirement_met_in:
      ((bool * code_location)) Optional.t;
    not_qualifying_child_requirement_met_in:
      ((bool * code_location)) Optional.t;
    is_qualifying_relative_in:
      ((bool * code_location)) Optional.t
  }
end

module IndividualSection7703MaritalStatus_in = struct
  type t = {
    individual_in: Individual.t;
    tax_year_in: integer;
    marriage_events_in: MarriageEvent.t array;
    divorce_or_legal_separation_events_in:
      DivorceOrLegalSeparationEvent.t array;
    death_events_in: DeathEvent.t array;
    individual_tax_return_in:
      IndividualTaxReturn.t;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    household_maintenance_events_in:
      HouseholdMaintenanceEvent.t array;
    qualifying_children_in:
      IndividualSection152QualifyingChildOutput.t
      array;
    individuals_entitled_to_exemptions_under_151_in:
      Individual.t array;
    determination_date_in:
      ((date * code_location)) Optional.t;
    is_married_at_determination_date_in:
      ((bool * code_location)) Optional.t;
    is_legally_separated_in:
      ((bool * code_location)) Optional.t;
    households_with_qualifying_child_in:
      (((Household.t array) * code_location)) Optional.t;
    households_maintained_by_individual_in:
      (((Household.t array) * code_location)) Optional.t;
    spouse_not_member_of_household_last_6_months_in:
      ((bool * code_location)) Optional.t;
    subsection_b_exception_applies_in:
      ((bool * code_location)) Optional.t;
    is_married_for_tax_purposes_in:
      ((bool * code_location)) Optional.t;
    maintains_household_with_qualifying_child_for_more_than_half_year_in:
      ((bool * code_location)) Optional.t;
    furnishes_over_one_half_of_household_cost_in:
      ((bool * code_location)) Optional.t
  }
end

module OrganizationSection3306EmployerStatus_in = struct
  type t = {
    organization_in: Organization.t;
    calendar_year_in: integer;
    wage_payment_events_in:
      WagePaymentEvent.t array;
    employment_relationship_events_in:
      EmploymentRelationshipEvent.t array;
    is_general_employer_in:
      ((bool * code_location)) Optional.t;
    is_agricultural_employer_in:
      ((bool * code_location)) Optional.t;
    is_domestic_service_employer_in:
      ((bool * code_location)) Optional.t;
    is_employer_in:
      ((bool * code_location)) Optional.t
  }
end

module WagePaymentEventSection3306Wages_in = struct
  type t = {
    wage_payment_event_in: WagePaymentEvent.t;
    employment_termination_events_in:
      EmploymentTerminationEvent.t array;
    death_events_in: DeathEvent.t array;
    is_excluded_by_sickness_disability_death_in:
      ((bool * code_location)) Optional.t;
    is_excluded_by_nonbusiness_service_in:
      ((bool * code_location)) Optional.t;
    is_excluded_by_termination_payment_in:
      ((bool * code_location)) Optional.t;
    is_excluded_by_agricultural_noncash_in:
      ((bool * code_location)) Optional.t;
    is_excluded_by_survivor_payment_in:
      ((bool * code_location)) Optional.t;
    taxable_amount_before_7000_cap_in:
      ((money * code_location)) Optional.t
  }
end

module TotalWages3306Calculation_in = struct
  type t = {
    wage_results_in:
      WagePaymentEventSection3306WagesOutput.t
      array;
    total_taxable_wages_in:
      ((money * code_location)) Optional.t
  }
end

module EmploymentRelationshipEventSection3306Employment_in = struct
  type t = {
    employment_relationship_event_in:
      EmploymentRelationshipEvent.t;
    calendar_year_in: integer;
    wage_payment_events_in:
      WagePaymentEvent.t array;
    employment_relationship_events_in:
      EmploymentRelationshipEvent.t array;
    student_enrollment_events_in:
      StudentEnrollmentEvent.t array;
    hospital_patient_events_in:
      HospitalPatientEvent.t array;
    immigration_admission_events_in:
      ImmigrationAdmissionEvent.t array;
    parenthood_events_in: ParenthoodEvent.t array;
    birth_events_in: BirthEvent.t array;
    marriage_events_in: MarriageEvent.t array;
    employer_status_in:
      ((OrganizationSection3306EmployerStatusOutput.t
         * code_location)) Optional.t;
    is_excluded_agricultural_labor_in:
      ((bool * code_location)) Optional.t;
    is_excluded_domestic_service_in:
      ((bool * code_location)) Optional.t;
    is_excluded_family_employment_in:
      ((bool * code_location)) Optional.t;
    is_excluded_federal_government_in:
      ((bool * code_location)) Optional.t;
    is_excluded_state_government_in:
      ((bool * code_location)) Optional.t;
    is_excluded_student_service_in:
      ((bool * code_location)) Optional.t;
    is_excluded_hospital_patient_service_in:
      ((bool * code_location)) Optional.t;
    is_excluded_foreign_government_in:
      ((bool * code_location)) Optional.t;
    is_excluded_student_nurse_in:
      ((bool * code_location)) Optional.t;
    is_excluded_international_organization_in:
      ((bool * code_location)) Optional.t;
    is_excluded_penal_institution_in:
      ((bool * code_location)) Optional.t;
    is_employment_in:
      ((bool * code_location)) Optional.t
  }
end

module EmployerUnemploymentExciseTaxFilerSection3301Tax_in = struct
  type t = {
    employer_unemployment_excise_tax_return_in:
      EmployerUnemploymentExciseTaxReturn.t;
    wage_payment_wages_results_in:
      WagePaymentEventSection3306WagesOutput.t
      array;
    organization_employer_statuses_in:
      OrganizationSection3306EmployerStatusOutput.t
      array;
    employment_relationship_employment_results_in:
      EmploymentRelationshipEventSection3306EmploymentOutput.t
      array;
    total_taxable_wages_in:
      ((money * code_location)) Optional.t;
    excise_tax_in:
      ((money * code_location)) Optional.t;
    tax_rate_in:
      ((decimal * code_location)) Optional.t
  }
end

module IRCSimplified_in = struct
  type t = {
    individual_tax_return_in:
      IndividualTaxReturn.t;
    individuals_in: Individual.t array;
    organizations_in: Organization.t array;
    birth_events_in: BirthEvent.t array;
    blindness_status_events_in:
      BlindnessStatusEvent.t array;
    death_events_in: DeathEvent.t array;
    nonresident_alien_status_period_events_in:
      NonresidentAlienStatusPeriodEvent.t array;
    marriage_events_in: MarriageEvent.t array;
    divorce_or_legal_separation_events_in:
      DivorceOrLegalSeparationEvent.t array;
    residence_period_events_in:
      ResidencePeriodEvent.t array;
    household_maintenance_events_in:
      HouseholdMaintenanceEvent.t array;
    parenthood_events_in: ParenthoodEvent.t array;
    family_relationship_events_in:
      FamilyRelationshipEvent.t array;
    tax_return_events_in: TaxReturnEvent.t array;
    income_events_in: IncomeEvent.t array;
    employment_relationship_events_in:
      EmploymentRelationshipEvent.t array;
    wage_payment_events_in:
      WagePaymentEvent.t array;
    student_enrollment_events_in:
      StudentEnrollmentEvent.t array;
    hospital_patient_events_in:
      HospitalPatientEvent.t array;
    immigration_admission_events_in:
      ImmigrationAdmissionEvent.t array;
    employment_termination_events_in:
      EmploymentTerminationEvent.t array;
    employer_unemployment_excise_tax_return_in:
      EmployerUnemploymentExciseTaxReturn.t;
    taxable_income_in:
      ((money * code_location)) Optional.t;
    itemized_deductions_in:
      ((money * code_location)) Optional.t;
    adjusted_gross_income_in:
      ((money * code_location)) Optional.t;
    taxable_income_result_in:
      ((IndividualTaxReturnSection63TaxableIncomeOutput.t
         * code_location)) Optional.t;
    tax_in: ((money * code_location)) Optional.t;
    is_surviving_spouse_in:
      ((bool * code_location)) Optional.t;
    is_head_of_household_in:
      ((bool * code_location)) Optional.t;
    section_2a_surviving_spouse_result_in:
      ((IndividualTaxReturnSection2aSurvivingSpouseOutput.t
         * code_location)) Optional.t;
    section_2b_head_of_household_result_in:
      ((IndividualTaxReturnSection2bHeadOfHouseholdOutput.t
         * code_location)) Optional.t;
    itemized_deductions_result_in:
      ((IndividualTaxReturnSection68ItemizedDeductionsOutput.t
         * code_location)) Optional.t;
    taxpayer_exemptions_list_result_in:
      ((TaxpayerExemptionsList151Output.t *
         code_location)) Optional.t;
    taxpayer_exemption_result_in:
      ((IndividualSection151PersonalExemptionOutput.t
         * code_location)) Optional.t;
    tax_imposed_result_in:
      ((IndividualTaxReturnSection1TaxOutput.t *
         code_location)) Optional.t;
    taxpayer_dependents_result_in:
      ((IndividualSection152DependentsOutput.t *
         code_location)) Optional.t;
    taxpayer_marital_status_7703_in:
      ((IndividualSection7703MaritalStatusOutput.t
         * code_location)) Optional.t;
    organization_employer_statuses_in:
      (((OrganizationSection3306EmployerStatusOutput.t
         array) * code_location)) Optional.t;
    wage_payment_wages_results_in:
      (((WagePaymentEventSection3306WagesOutput.t
         array) * code_location)) Optional.t;
    employment_relationship_employment_results_in:
      (((EmploymentRelationshipEventSection3306EmploymentOutput.t
         array) * code_location)) Optional.t;
    employer_unemployment_excise_tax_result_in:
      ((EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.t
         * code_location)) Optional.t
  }
end


(* Scope IndividualTaxReturnSection1Tax *)
let individual_tax_return_section1_tax :
  IndividualTaxReturnSection1Tax_in.t -> IndividualTaxReturnSection1Tax.t =
  fun individual_tax_return_section1_tax_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.individual_tax_return_in
    in
  let taxable_income: money =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.taxable_income_in
    in
  let taxpayer_marital_status: IndividualSection7703MaritalStatusOutput.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.taxpayer_marital_status_in
    in
  let is_surviving_spouse: bool =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.is_surviving_spouse_in
    in
  let is_head_of_household: bool =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.is_head_of_household_in
    in
  let tax_1_a_1: ((money * code_location)) Optional.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.tax_1_a_1_in
    in
  let tax_1_a_2: ((money * code_location)) Optional.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.tax_1_a_2_in
    in
  let tax_1_b: ((money * code_location)) Optional.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.tax_1_b_in
    in
  let tax_1_c: ((money * code_location)) Optional.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.tax_1_c_in
    in
  let tax_1_d: ((money * code_location)) Optional.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.tax_1_d_in
    in
  let tax: ((money * code_location)) Optional.t =
    individual_tax_return_section1_tax_in.IndividualTaxReturnSection1Tax_in.tax_in
    in
  let tax_1_d__1: money =
    match
      (match tax_1_d
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_lte_mon_mon
                            taxable_income
                            (money_of_cents_string
                            "1845000")) then
                         (o_mult_mon_rat
                            taxable_income
                            (decimal_of_string "3/20"))
                         else
                         ( if
                            (o_lte_mon_mon
                               taxable_income
                               (money_of_cents_string
                               "4457500")) then
                            (o_add_mon_mon
                               (money_of_cents_string
                               "276750")
                               (o_mult_mon_rat
                                  (o_sub_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "1845000"))
                                  (decimal_of_string "7/25")))
                            else
                            ( if
                               (o_lte_mon_mon
                                  taxable_income
                                  (money_of_cents_string
                                  "7000000"))
                               then
                               (o_add_mon_mon
                                  (money_of_cents_string
                                  "1008250")
                                  (o_mult_mon_rat
                                     (o_sub_mon_mon
                                        taxable_income
                                        (money_of_cents_string
                                        "4457500"))
                                     (decimal_of_string "31/100")))
                               else
                               ( if
                                  (o_lte_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "12500000"))
                                  then
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "1796425")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "7000000"))
                                        (decimal_of_string "9/25")))
                                  else
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "3776425")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "12500000"))
                                        (decimal_of_string "99/250"))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4741; start_column=5;
                         end_line=4750; end_column=55;
                         law_headings=["============================= SECTION 1 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1010; start_column=11;
                                       end_line=1010; end_column=18;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1010; start_column=11;
                  end_line=1010; end_column=18;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1010; start_column=11;
                           end_line=1010; end_column=18;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let tax_1_c__1: money =
    match
      (match tax_1_c
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_lte_mon_mon
                            taxable_income
                            (money_of_cents_string
                            "2210000")) then
                         (o_mult_mon_rat
                            taxable_income
                            (decimal_of_string "3/20"))
                         else
                         ( if
                            (o_lte_mon_mon
                               taxable_income
                               (money_of_cents_string
                               "5350000")) then
                            (o_add_mon_mon
                               (money_of_cents_string
                               "331500")
                               (o_mult_mon_rat
                                  (o_sub_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "2210000"))
                                  (decimal_of_string "7/25")))
                            else
                            ( if
                               (o_lte_mon_mon
                                  taxable_income
                                  (money_of_cents_string
                                  "11500000"))
                               then
                               (o_add_mon_mon
                                  (money_of_cents_string
                                  "1210700")
                                  (o_mult_mon_rat
                                     (o_sub_mon_mon
                                        taxable_income
                                        (money_of_cents_string
                                        "5350000"))
                                     (decimal_of_string "31/100")))
                               else
                               ( if
                                  (o_lte_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "25000000"))
                                  then
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "3117200")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "11500000"))
                                        (decimal_of_string "9/25")))
                                  else
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "7977200")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "25000000"))
                                        (decimal_of_string "99/250"))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4693; start_column=5;
                         end_line=4702; end_column=52;
                         law_headings=["============================= SECTION 1 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1009; start_column=11;
                                       end_line=1009; end_column=18;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1009; start_column=11;
                  end_line=1009; end_column=18;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1009; start_column=11;
                           end_line=1009; end_column=18;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let tax_1_b__1: money =
    match
      (match tax_1_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_lte_mon_mon
                            taxable_income
                            (money_of_cents_string
                            "2960000")) then
                         (o_mult_mon_rat
                            taxable_income
                            (decimal_of_string "3/20"))
                         else
                         ( if
                            (o_lte_mon_mon
                               taxable_income
                               (money_of_cents_string
                               "7640000")) then
                            (o_add_mon_mon
                               (money_of_cents_string
                               "444000")
                               (o_mult_mon_rat
                                  (o_sub_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "2960000"))
                                  (decimal_of_string "7/25")))
                            else
                            ( if
                               (o_lte_mon_mon
                                  taxable_income
                                  (money_of_cents_string
                                  "12750000"))
                               then
                               (o_add_mon_mon
                                  (money_of_cents_string
                                  "1754400")
                                  (o_mult_mon_rat
                                     (o_sub_mon_mon
                                        taxable_income
                                        (money_of_cents_string
                                        "7640000"))
                                     (decimal_of_string "31/100")))
                               else
                               ( if
                                  (o_lte_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "25000000"))
                                  then
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "3338500")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "12750000"))
                                        (decimal_of_string "9/25")))
                                  else
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "7748500")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "25000000"))
                                        (decimal_of_string "99/250"))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4893; start_column=5;
                         end_line=4902; end_column=52;
                         law_headings=["============================= SECTION 1 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1008; start_column=11;
                                       end_line=1008; end_column=18;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1008; start_column=11;
                  end_line=1008; end_column=18;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1008; start_column=11;
                           end_line=1008; end_column=18;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let tax_1_a_2__1: money =
    match
      (match tax_1_a_2
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_lte_mon_mon
                            taxable_income
                            (money_of_cents_string
                            "3690000")) then
                         (o_mult_mon_rat
                            taxable_income
                            (decimal_of_string "3/20"))
                         else
                         ( if
                            (o_lte_mon_mon
                               taxable_income
                               (money_of_cents_string
                               "8915000")) then
                            (o_add_mon_mon
                               (money_of_cents_string
                               "553500")
                               (o_mult_mon_rat
                                  (o_sub_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "3690000"))
                                  (decimal_of_string "7/25")))
                            else
                            ( if
                               (o_lte_mon_mon
                                  taxable_income
                                  (money_of_cents_string
                                  "14000000"))
                               then
                               (o_add_mon_mon
                                  (money_of_cents_string
                                  "2016500")
                                  (o_mult_mon_rat
                                     (o_sub_mon_mon
                                        taxable_income
                                        (money_of_cents_string
                                        "8915000"))
                                     (decimal_of_string "31/100")))
                               else
                               ( if
                                  (o_lte_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "25000000"))
                                  then
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "3592850")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "14000000"))
                                        (decimal_of_string "9/25")))
                                  else
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "7552850")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "25000000"))
                                        (decimal_of_string "99/250"))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4851; start_column=5;
                         end_line=4860; end_column=55;
                         law_headings=["============================= SECTION 1 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1007; start_column=11;
                                       end_line=1007; end_column=20;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1007; start_column=11;
                  end_line=1007; end_column=20;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1007; start_column=11;
                           end_line=1007; end_column=20;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let tax_1_a_1__1: money =
    match
      (match tax_1_a_1
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_lte_mon_mon
                            taxable_income
                            (money_of_cents_string
                            "3690000")) then
                         (o_mult_mon_rat
                            taxable_income
                            (decimal_of_string "3/20"))
                         else
                         ( if
                            (o_lte_mon_mon
                               taxable_income
                               (money_of_cents_string
                               "8915000")) then
                            (o_add_mon_mon
                               (money_of_cents_string
                               "553500")
                               (o_mult_mon_rat
                                  (o_sub_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "3690000"))
                                  (decimal_of_string "7/25")))
                            else
                            ( if
                               (o_lte_mon_mon
                                  taxable_income
                                  (money_of_cents_string
                                  "14000000"))
                               then
                               (o_add_mon_mon
                                  (money_of_cents_string
                                  "2016500")
                                  (o_mult_mon_rat
                                     (o_sub_mon_mon
                                        taxable_income
                                        (money_of_cents_string
                                        "8915000"))
                                     (decimal_of_string "31/100")))
                               else
                               ( if
                                  (o_lte_mon_mon
                                     taxable_income
                                     (money_of_cents_string
                                     "25000000"))
                                  then
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "3592850")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "14000000"))
                                        (decimal_of_string "9/25")))
                                  else
                                  (o_add_mon_mon
                                     (money_of_cents_string
                                     "7552850")
                                     (o_mult_mon_rat
                                        (o_sub_mon_mon
                                           taxable_income
                                           (money_of_cents_string
                                           "25000000"))
                                        (decimal_of_string "99/250"))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4798; start_column=5;
                         end_line=4807; end_column=55;
                         law_headings=["============================= SECTION 1 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1006; start_column=11;
                                       end_line=1006; end_column=20;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1006; start_column=11;
                  end_line=1006; end_column=20;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1006; start_column=11;
                           end_line=1006; end_column=20;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let tax__1: money =
    match
      (match tax
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (match
                        (match
                           (match
                              (match
                                 ( if
                                    is_head_of_household
                                    then
                                    (Optional.Present
                                       (tax_1_b__1,
                                         ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                           start_line=4907; start_column=22;
                                           end_line=4907; end_column=29;
                                           law_headings=["============================= SECTION 1 ============================="]})))
                                    else
                                    (Optional.Absent))
                               with
                               | Optional.Absent ->
                                   ( if
                                      is_surviving_spouse
                                      then
                                      (Optional.Present
                                         (tax_1_a_2__1,
                                           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                             start_line=4865; start_column=22;
                                             end_line=4865; end_column=31;
                                             law_headings=["============================= SECTION 1 ============================="]})))
                                      else
                                      (Optional.Absent))
                               | Optional.Present x ->
                                   (Optional.Present
                                      x))
                            with
                            | Optional.Absent ->
                                ( if
                                   ((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                      (match
                                         (individual_tax_return.IndividualTaxReturn.details)
                                       with
                                       | FilingStatusVariant.JointReturn _ ->
                                           true
                                       | FilingStatusVariant.SurvivingSpouse _ ->
                                           false
                                       | FilingStatusVariant.HeadOfHousehold _ ->
                                           false
                                       | FilingStatusVariant.Single _ ->
                                           false
                                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                                           false))
                                   then
                                   (Optional.Present
                                      (tax_1_a_1__1,
                                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                          start_line=4820; start_column=22;
                                          end_line=4820; end_column=31;
                                          law_headings=["============================= SECTION 1 ============================="]})))
                                   else
                                   (Optional.Absent))
                            | Optional.Present x ->
                                (Optional.Present
                                   x))
                         with
                         | Optional.Absent ->
                             ( if
                                ((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                   (match
                                      (individual_tax_return.IndividualTaxReturn.details)
                                    with
                                    | FilingStatusVariant.JointReturn _ ->
                                        false
                                    | FilingStatusVariant.SurvivingSpouse _ ->
                                        false
                                    | FilingStatusVariant.HeadOfHousehold _ ->
                                        false
                                    | FilingStatusVariant.Single _ ->
                                        false
                                    | FilingStatusVariant.MarriedFilingSeparate _ ->
                                        true))
                                then
                                (Optional.Present
                                   (tax_1_d__1,
                                     ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=4763; start_column=22;
                                       end_line=4763; end_column=29;
                                       law_headings=["============================= SECTION 1 ============================="]})))
                                else
                                (Optional.Absent))
                         | Optional.Present x ->
                             (Optional.Present x))
                      with
                      | Optional.Absent ->
                          ( if
                             ((o_not
                                 (taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703)) &&
                                ((o_not
                                    is_head_of_household) &&
                                   (o_not
                                      is_surviving_spouse)))
                             then
                             (Optional.Present
                                (tax_1_c__1,
                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                    start_line=4714; start_column=22;
                                    end_line=4714; end_column=29;
                                    law_headings=["============================= SECTION 1 ============================="]})))
                             else
                             (Optional.Absent))
                      | Optional.Present x ->
                          (Optional.Present x))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((money_of_cents_string
                            "0"),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=4706; start_column=25;
                              end_line=4706; end_column=27;
                              law_headings=["============================= SECTION 1 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1011; start_column=11;
                                       end_line=1011; end_column=14;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1011; start_column=11;
                  end_line=1011; end_column=14;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1011; start_column=11;
                           end_line=1011; end_column=14;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualTaxReturnSection1TaxOutput.t =
    match
      (Optional.Present
         (({IndividualTaxReturnSection1TaxOutput.individual_tax_return =
              individual_tax_return;
              IndividualTaxReturnSection1TaxOutput.tax_1_a_1 =
                tax_1_a_1__1;
              IndividualTaxReturnSection1TaxOutput.tax_1_a_2 =
                tax_1_a_2__1;
              IndividualTaxReturnSection1TaxOutput.tax_1_b =
                tax_1_b__1;
              IndividualTaxReturnSection1TaxOutput.tax_1_c =
                tax_1_c__1;
              IndividualTaxReturnSection1TaxOutput.tax_1_d =
                tax_1_d__1;
              IndividualTaxReturnSection1TaxOutput.tax =
                tax__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1026; start_column=5;
             end_line=1034; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1013; start_column=10;
                           end_line=1013; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualTaxReturnSection1Tax.main_output =
     main_output}

(* Scope IndividualSection151ExemptionsList *)
let individual_section151_exemptions_list :
  IndividualSection151ExemptionsList_in.t -> IndividualSection151ExemptionsList.t =
  fun individual_section151_exemptions_list_in ->
  let individual: Individual.t =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.individual_in
    in
  let spouse: (Individual.t) Optional.t =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.spouse_in
    in
  let tax_year: integer =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.tax_year_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.tax_return_events_in
    in
  let income_events: IncomeEvent.t array =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.income_events_in
    in
  let dependents: Individual.t array =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.dependents_in
    in
  let is_joint_or_surviving_spouse: bool =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.is_joint_or_surviving_spouse_in
    in
  let spouse_personal_exemption_allowed: ((bool *
                                            code_location)) Optional.t =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.spouse_personal_exemption_allowed_in
    in
  let individuals_entitled_to_exemptions_under_151: (((Individual.t
                                                       array)
                                                       *
                                                       code_location)) Optional.t =
    individual_section151_exemptions_list_in.IndividualSection151ExemptionsList_in.individuals_entitled_to_exemptions_under_151_in
    in
  let spouse_personal_exemption_allowed__1: bool =
    match
      (match spouse_personal_exemption_allowed
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         is_joint_or_surviving_spouse
                         then false else
                         (match spouse
                          with
                          | Optional.Absent ->
                              false
                          | Optional.Present s ->
                              (let
                                 spouse_has_no_income
                                 : bool =
                                 (o_not
                                    (o_fold
                                       (fun
                                          (acc:
                                            bool)
                                          (income_event:
                                            IncomeEvent.t) ->
                                          acc ||
                                            (((o_eq_int_int
                                                 ((income_event.IncomeEvent.individual).Individual.id)
                                                 (s.Individual.id)) &&
                                                (o_eq_boo_boo
                                                   ((income_event.IncomeEvent.individual).Individual.is_counterfactual)
                                                   (s.Individual.is_counterfactual))) &&
                                               ((o_eq_int_int
                                                   (income_event.IncomeEvent.tax_year)
                                                   tax_year) &&
                                                  (income_event.IncomeEvent.has_income))))
                                       false
                                       income_events))
                              in
                              (let
                                 spouse_is_not_dependent_of_another
                                 : bool =
                                 (o_not
                                    (o_fold
                                       (fun
                                          (acc:
                                            bool)
                                          (event:
                                            TaxReturnEvent.t) ->
                                          acc ||
                                            ((o_not
                                                ((o_eq_int_int
                                                    ((event.TaxReturnEvent.individual).Individual.id)
                                                    (individual.Individual.id)) &&
                                                   (o_eq_boo_boo
                                                      ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                                      (individual.Individual.is_counterfactual)))) &&
                                               ((o_eq_int_int
                                                   (event.TaxReturnEvent.tax_year)
                                                   tax_year) &&
                                                  (o_fold
                                                     (fun
                                                        (acc__1:
                                                          bool)
                                                        (dependent:
                                                          Individual.t) ->
                                                        acc__1 ||
                                                          ((o_eq_int_int
                                                              (dependent.Individual.id)
                                                              (s.Individual.id)) &&
                                                             (o_eq_boo_boo
                                                                (dependent.Individual.is_counterfactual)
                                                                (s.Individual.is_counterfactual))))
                                                     false
                                                     (event.TaxReturnEvent.dependents)))))
                                       false
                                       tax_return_events))
                              in
                              (spouse_has_no_income &&
                                 spouse_is_not_dependent_of_another))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5100; start_column=5;
                         end_line=5122; end_column=24;
                         law_headings=["============================= SECTION 151 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1566; start_column=11;
                                       end_line=1566; end_column=44;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1566; start_column=11;
                  end_line=1566; end_column=44;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1566; start_column=11;
                           end_line=1566; end_column=44;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let individuals_entitled_to_exemptions_under_151__1: Individual.t
                                                       array =
    match
      (match
         individuals_entitled_to_exemptions_under_151
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let individual_list :
                         Individual.t array =
                         ([|individual|]) in
                       (let spouse_list :
                          Individual.t array =
                          (match spouse
                           with
                           | Optional.Absent ->
                               ([||])
                           | Optional.Present s ->
                               ( if
                                  spouse_personal_exemption_allowed__1
                                  then ([|s|])
                                  else ([||])))
                       in
                       (o_concat
                          (o_concat
                             individual_list
                             spouse_list)
                          dependents))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5144; start_column=5;
                         end_line=5151; end_column=49;
                         law_headings=["============================= SECTION 151 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1567; start_column=11;
                                       end_line=1567; end_column=55;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1567; start_column=11;
                  end_line=1567; end_column=55;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1567; start_column=11;
                           end_line=1567; end_column=55;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualSection151ExemptionsListOutput.t =
    match
      (Optional.Present
         (({IndividualSection151ExemptionsListOutput.individual =
              individual;
              IndividualSection151ExemptionsListOutput.spouse_exemption_allowed_151_b =
                spouse_personal_exemption_allowed__1;
              IndividualSection151ExemptionsListOutput.individuals_entitled_to_exemptions_under_151 =
                individuals_entitled_to_exemptions_under_151__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1642; start_column=5;
             end_line=1646; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1569; start_column=10;
                           end_line=1569; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualSection151ExemptionsList.main_output =
     main_output}

(* Scope IndividualSection152QualifyingRelative *)
let individual_section152_qualifying_relative :
  IndividualSection152QualifyingRelative_in.t -> IndividualSection152QualifyingRelative.t =
  fun individual_section152_qualifying_relative_in ->
  let individual: Individual.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.individual_in
    in
  let taxpayer: Individual.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.taxpayer_in
    in
  let tax_year: integer =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.tax_year_in
    in
  let family_relationship_events: FamilyRelationshipEvent.t
                                  array =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.family_relationship_events_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.residence_period_events_in
    in
  let qualifying_child_results: IndividualSection152QualifyingChildOutput.t
                                array =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.qualifying_child_results_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.tax_return_events_in
    in
  let income_events: IncomeEvent.t array =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.income_events_in
    in
  let marriage_events: MarriageEvent.t array =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.marriage_events_in
    in
  let relationship_requirement_met_h: ((bool *
                                         code_location)) Optional.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.relationship_requirement_met_H_in
    in
  let relationship_requirement_met: ((bool *
                                       code_location)) Optional.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.relationship_requirement_met_in
    in
  let no_income_requirement_met: ((bool *
                                    code_location)) Optional.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.no_income_requirement_met_in
    in
  let not_qualifying_child_requirement_met: ((bool
                                               *
                                               code_location)) Optional.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.not_qualifying_child_requirement_met_in
    in
  let is_qualifying_relative: ((bool *
                                 code_location)) Optional.t =
    individual_section152_qualifying_relative_in.IndividualSection152QualifyingRelative_in.is_qualifying_relative_in
    in
  let not_qualifying_child_requirement_met__1: bool =
    match
      (match not_qualifying_child_requirement_met
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let
                         is_qualifying_child_of_current_taxpayer
                         : bool =
                         (o_fold
                            (fun (acc: bool)
                               (result:
                                 IndividualSection152QualifyingChildOutput.t) ->
                               acc ||
                                 (((o_eq_int_int
                                      ((result.IndividualSection152QualifyingChildOutput.individual).Individual.id)
                                      (individual.Individual.id)) &&
                                     (o_eq_boo_boo
                                        ((result.IndividualSection152QualifyingChildOutput.individual).Individual.is_counterfactual)
                                        (individual.Individual.is_counterfactual))) &&
                                    (((o_eq_int_int
                                         ((result.IndividualSection152QualifyingChildOutput.taxpayer).Individual.id)
                                         (taxpayer.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((result.IndividualSection152QualifyingChildOutput.taxpayer).Individual.is_counterfactual)
                                           (taxpayer.Individual.is_counterfactual))) &&
                                       (result.IndividualSection152QualifyingChildOutput.is_qualifying_child))))
                            false
                            qualifying_child_results)
                       in
                       (let
                          is_qualifying_child_of_other_taxpayer
                          : bool =
                          (o_fold
                             (fun (acc: bool)
                                (event:
                                  TaxReturnEvent.t) ->
                                acc ||
                                  ((o_eq_int_int
                                      (event.TaxReturnEvent.tax_year)
                                      tax_year) &&
                                     ((o_not
                                         ((o_eq_int_int
                                             ((event.TaxReturnEvent.individual).Individual.id)
                                             (taxpayer.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                               (taxpayer.Individual.is_counterfactual)))) &&
                                        (o_fold
                                           (fun
                                              (acc__1:
                                                bool)
                                              (qualifying_child:
                                                Individual.t) ->
                                              acc__1 ||
                                                ((o_eq_int_int
                                                    (qualifying_child.Individual.id)
                                                    (individual.Individual.id)) &&
                                                   (o_eq_boo_boo
                                                      (qualifying_child.Individual.is_counterfactual)
                                                      (individual.Individual.is_counterfactual))))
                                           false
                                           (event.TaxReturnEvent.qualifying_children)))))
                             false
                             tax_return_events)
                       in
                       (o_not
                          (is_qualifying_child_of_current_taxpayer ||
                             is_qualifying_child_of_other_taxpayer)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5737; start_column=5;
                         end_line=5752; end_column=91;
                         law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1939; start_column=11;
                                       end_line=1939; end_column=47;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1939; start_column=11;
                  end_line=1939; end_column=47;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1939; start_column=11;
                           end_line=1939; end_column=47;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let no_income_requirement_met__1: bool =
    match
      (match no_income_requirement_met
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_not
                         (o_fold
                            (fun (acc: bool)
                               (income_event:
                                 IncomeEvent.t) ->
                               acc ||
                                 (((o_eq_int_int
                                      ((income_event.IncomeEvent.individual).Individual.id)
                                      (individual.Individual.id)) &&
                                     (o_eq_boo_boo
                                        ((income_event.IncomeEvent.individual).Individual.is_counterfactual)
                                        (individual.Individual.is_counterfactual))) &&
                                    ((o_eq_int_int
                                        (income_event.IncomeEvent.tax_year)
                                        tax_year) &&
                                       (income_event.IncomeEvent.has_income))))
                            false income_events)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5712; start_column=5;
                         end_line=5717; end_column=6;
                         law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1938; start_column=11;
                                       end_line=1938; end_column=36;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1938; start_column=11;
                  end_line=1938; end_column=36;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1938; start_column=11;
                           end_line=1938; end_column=36;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let relationship_requirement_met_h__1: bool =
    match
      (match relationship_requirement_met_h
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_start : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5611; start_column=27;
                              end_line=5611; end_column=49;
                              law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "1")
                            (integer_of_string
                            "1")) in
                       (let year_end : date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5612; start_column=25;
                               end_line=5612; end_column=47;
                               law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "12")
                             (integer_of_string
                             "31")) in
                       ((o_not
                           (o_fold
                              (fun (acc: bool)
                                 (marriage_event:
                                   MarriageEvent.t) ->
                                 acc ||
                                   (((((o_eq_int_int
                                          ((marriage_event.MarriageEvent.spouse1).Individual.id)
                                          (taxpayer.Individual.id)) &&
                                         (o_eq_boo_boo
                                            ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                                            (taxpayer.Individual.is_counterfactual))) &&
                                        ((o_eq_int_int
                                            ((marriage_event.MarriageEvent.spouse2).Individual.id)
                                            (individual.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                              (individual.Individual.is_counterfactual)))) ||
                                       (((o_eq_int_int
                                            ((marriage_event.MarriageEvent.spouse1).Individual.id)
                                            (individual.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                                              (individual.Individual.is_counterfactual))) &&
                                          ((o_eq_int_int
                                              ((marriage_event.MarriageEvent.spouse2).Individual.id)
                                              (taxpayer.Individual.id)) &&
                                             (o_eq_boo_boo
                                                ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                                (taxpayer.Individual.is_counterfactual))))) &&
                                      (o_lte_dat_dat
                                         (marriage_event.MarriageEvent.marriage_date)
                                         year_end)))
                              false
                              marriage_events)) &&
                          (o_fold
                             (fun (acc: bool)
                                (taxpayer_residence:
                                  ResidencePeriodEvent.t) ->
                                acc ||
                                  (((o_eq_int_int
                                       ((taxpayer_residence.ResidencePeriodEvent.individual).Individual.id)
                                       (taxpayer.Individual.id)) &&
                                      (o_eq_boo_boo
                                         ((taxpayer_residence.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                         (taxpayer.Individual.is_counterfactual))) &&
                                     ((taxpayer_residence.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                        ((o_lte_dat_dat
                                            (taxpayer_residence.ResidencePeriodEvent.start_date)
                                            year_end) &&
                                           ((o_gte_dat_dat
                                               (taxpayer_residence.ResidencePeriodEvent.end_date)
                                               year_start) &&
                                              (o_fold
                                                 (fun
                                                    (acc__1:
                                                      bool)
                                                    (individual_residence:
                                                      ResidencePeriodEvent.t) ->
                                                    acc__1 ||
                                                      (((o_eq_int_int
                                                           ((individual_residence.ResidencePeriodEvent.individual).Individual.id)
                                                           (individual.Individual.id)) &&
                                                          (o_eq_boo_boo
                                                             ((individual_residence.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                                             (individual.Individual.is_counterfactual))) &&
                                                         (((o_eq_int_int
                                                              ((individual_residence.ResidencePeriodEvent.household).Household.id)
                                                              ((taxpayer_residence.ResidencePeriodEvent.household).Household.id)) &&
                                                             (o_eq_boo_boo
                                                                ((individual_residence.ResidencePeriodEvent.household).Household.is_counterfactual)
                                                                ((taxpayer_residence.ResidencePeriodEvent.household).Household.is_counterfactual))) &&
                                                            ((individual_residence.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                                               ((individual_residence.ResidencePeriodEvent.is_member_of_household) &&
                                                                  ((o_lte_dat_dat
                                                                    (individual_residence.ResidencePeriodEvent.start_date)
                                                                    year_end) &&
                                                                    (o_gte_dat_dat
                                                                    (individual_residence.ResidencePeriodEvent.end_date)
                                                                    year_start)))))))
                                                 false
                                                 residence_period_events))))))
                             false
                             residence_period_events)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5611; start_column=5;
                         end_line=5633; end_column=56;
                         law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1936; start_column=11;
                                       end_line=1936; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1936; start_column=11;
                  end_line=1936; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1936; start_column=11;
                           end_line=1936; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let relationship_requirement_met__1: bool =
    match
      (match relationship_requirement_met
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_fold
                          (fun (acc: bool)
                             (rel_event:
                               FamilyRelationshipEvent.t) ->
                             acc ||
                               (((o_eq_int_int
                                    ((rel_event.FamilyRelationshipEvent.person).Individual.id)
                                    (taxpayer.Individual.id)) &&
                                   (o_eq_boo_boo
                                      ((rel_event.FamilyRelationshipEvent.person).Individual.is_counterfactual)
                                      (taxpayer.Individual.is_counterfactual))) &&
                                  (((o_eq_int_int
                                       ((rel_event.FamilyRelationshipEvent.relative).Individual.id)
                                       (individual.Individual.id)) &&
                                      (o_eq_boo_boo
                                         ((rel_event.FamilyRelationshipEvent.relative).Individual.is_counterfactual)
                                         (individual.Individual.is_counterfactual))) &&
                                     ((o_lte_dat_dat
                                         (rel_event.FamilyRelationshipEvent.start_date)
                                         ((Date_en.of_year_month_day)
                                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                              start_line=5653; start_column=37;
                                              end_line=5653; end_column=59;
                                              law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})
                                            tax_year
                                            (integer_of_string
                                            "12")
                                            (integer_of_string
                                            "31"))) &&
                                        ((o_eq
                                            (rel_event.FamilyRelationshipEvent.relationship_type)
                                            (FamilyRelationshipType.Child)) ||
                                           ((o_eq
                                               (rel_event.FamilyRelationshipEvent.relationship_type)
                                               (FamilyRelationshipType.DescendantOfChild)) ||
                                              ((o_eq
                                                  (rel_event.FamilyRelationshipEvent.relationship_type)
                                                  (FamilyRelationshipType.Brother)) ||
                                                 ((o_eq
                                                     (rel_event.FamilyRelationshipEvent.relationship_type)
                                                     (FamilyRelationshipType.Sister)) ||
                                                    ((o_eq
                                                        (rel_event.FamilyRelationshipEvent.relationship_type)
                                                        (FamilyRelationshipType.Stepbrother)) ||
                                                       ((o_eq
                                                           (rel_event.FamilyRelationshipEvent.relationship_type)
                                                           (FamilyRelationshipType.Stepsister)) ||
                                                          ((o_eq
                                                              (rel_event.FamilyRelationshipEvent.relationship_type)
                                                              (FamilyRelationshipType.Father)) ||
                                                             ((o_eq
                                                                 (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                 (FamilyRelationshipType.Mother)) ||
                                                                ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (
                                                                    FamilyRelationshipType.AncestorOfFatherOrMother)) ||
                                                                   ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.Stepmother)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.Stepfather)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.NieceOrNephew)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.UncleOrAunt)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.SonInLaw)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.DaughterInLaw)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.FatherInLaw)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.MotherInLaw)) ||
                                                                    ((o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.BrotherInLaw)) ||
                                                                    (o_eq
                                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                                    (FamilyRelationshipType.SisterInLaw))))))))))))))))))))))))
                          false
                          family_relationship_events) ||
                         relationship_requirement_met_h__1),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5649; start_column=5;
                         end_line=5684; end_column=38;
                         law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1937; start_column=11;
                                       end_line=1937; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1937; start_column=11;
                  end_line=1937; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1937; start_column=11;
                           end_line=1937; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_qualifying_relative__1: bool =
    match
      (match is_qualifying_relative
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((relationship_requirement_met__1 &&
                         (no_income_requirement_met__1 &&
                            not_qualifying_child_requirement_met__1)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5770; start_column=5;
                         end_line=5772; end_column=45;
                         law_headings=["============================= SECTION 152 QUALIFYING RELATIVE DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1940; start_column=11;
                                       end_line=1940; end_column=33;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1940; start_column=11;
                  end_line=1940; end_column=33;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1940; start_column=11;
                           end_line=1940; end_column=33;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualSection152QualifyingRelativeOutput.t =
    match
      (Optional.Present
         (({IndividualSection152QualifyingRelativeOutput.individual =
              individual;
              IndividualSection152QualifyingRelativeOutput.taxpayer =
                taxpayer;
              IndividualSection152QualifyingRelativeOutput.is_qualifying_relative =
                is_qualifying_relative__1;
              IndividualSection152QualifyingRelativeOutput.is_household_member_152_d_2_H =
                relationship_requirement_met_h__1;
              IndividualSection152QualifyingRelativeOutput.bears_relationship_152_d_1_A =
                relationship_requirement_met__1;
              IndividualSection152QualifyingRelativeOutput.has_no_income_152_d_1_B =
                no_income_requirement_met__1;
              IndividualSection152QualifyingRelativeOutput.is_not_qualifying_child_152_d_1_D =
                not_qualifying_child_requirement_met__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2000; start_column=5;
             end_line=2008; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1942; start_column=10;
                           end_line=1942; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualSection152QualifyingRelative.main_output =
     main_output}

(* Scope OrganizationSection3306EmployerStatus *)
let organization_section3306_employer_status :
  OrganizationSection3306EmployerStatus_in.t -> OrganizationSection3306EmployerStatus.t =
  fun organization_section3306_employer_status_in ->
  let organization: Organization.t =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.organization_in
    in
  let calendar_year: integer =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.calendar_year_in
    in
  let wage_payment_events: WagePaymentEvent.t
                           array =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.wage_payment_events_in
    in
  let employment_relationship_events: EmploymentRelationshipEvent.t
                                      array =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.employment_relationship_events_in
    in
  let is_general_employer: ((bool *
                              code_location)) Optional.t =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.is_general_employer_in
    in
  let is_agricultural_employer: ((bool *
                                   code_location)) Optional.t =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.is_agricultural_employer_in
    in
  let is_domestic_service_employer: ((bool *
                                       code_location)) Optional.t =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.is_domestic_service_employer_in
    in
  let is_employer: ((bool * code_location)) Optional.t =
    organization_section3306_employer_status_in.OrganizationSection3306EmployerStatus_in.is_employer_in
    in
  let section_3306_employment_overlaps_date: EmploymentRelationshipEvent.t ->
                                               date ->
                                               bool =
    fun
      (emp_event_arg:
        EmploymentRelationshipEvent.t)
      (check_date_arg: date) ->
      match
        (Optional.Present
           (((o_lte_dat_dat
                (emp_event_arg.EmploymentRelationshipEvent.start_date)
                check_date_arg) &&
               (o_gte_dat_dat
                  (emp_event_arg.EmploymentRelationshipEvent.end_date)
                  check_date_arg)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2569; start_column=5;
               end_line=2570; end_column=49;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2345; start_column=12;
                             end_line=2345; end_column=49;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_count_unique_employees: (EmploymentRelationshipEvent.t
                                            array) ->
                                             integer =
    fun
      (employment_events_arg:
        EmploymentRelationshipEvent.t array) ->
      match
        (Optional.Present
           ((let unique_employee_events :
               EmploymentRelationshipEvent.t
               array =
               (o_filter
                  (fun
                     (emp_event:
                       EmploymentRelationshipEvent.t) ->
                     o_not
                       (o_fold
                          (fun (acc: bool)
                             (prev_emp_event:
                               EmploymentRelationshipEvent.t) ->
                             acc ||
                               ((o_eq_int_int
                                   ((prev_emp_event.EmploymentRelationshipEvent.employee).Individual.id)
                                   ((emp_event.EmploymentRelationshipEvent.employee).Individual.id)) &&
                                  (o_lt_int_int
                                     (prev_emp_event.EmploymentRelationshipEvent.id)
                                     (emp_event.EmploymentRelationshipEvent.id))))
                          false
                          employment_events_arg))
                  employment_events_arg) in
             (o_length unique_employee_events)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2580; start_column=5;
               end_line=2586; end_column=37;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2348; start_column=12;
                             end_line=2348; end_column=47;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_get_day_of_year: date ->
                                      integer =
    fun (date_arg: date) ->
      match
        (Optional.Present
           ((let year_local : integer =
               ((Date_en.get_year) date_arg) in
             (let month_local : integer =
                ((Date_en.get_month) date_arg) in
             (let day_local : integer =
                ((Date_en.get_day) date_arg) in
             (let year_div_4 : decimal =
                (o_div_int_int
                   {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                    start_line=2597; start_column=40;
                    end_line=2597; end_column=41;
                    law_headings=[]} year_local
                   (integer_of_string "4")) in
             (let year_mod_4 : integer =
                (o_sub_int_int year_local
                   (o_mult_int_int
                      (o_toint_rat year_div_4)
                      (integer_of_string "4")))
             in
             (let year_div_100 : decimal =
                (o_div_int_int
                   {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                    start_line=2599; start_column=42;
                    end_line=2599; end_column=45;
                    law_headings=[]} year_local
                   (integer_of_string "100")) in
             (let year_mod_100 : integer =
                (o_sub_int_int year_local
                   (o_mult_int_int
                      (o_toint_rat year_div_100)
                      (integer_of_string "100")))
             in
             (let year_div_400 : decimal =
                (o_div_int_int
                   {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                    start_line=2601; start_column=42;
                    end_line=2601; end_column=45;
                    law_headings=[]} year_local
                   (integer_of_string "400")) in
             (let year_mod_400 : integer =
                (o_sub_int_int year_local
                   (o_mult_int_int
                      (o_toint_rat year_div_400)
                      (integer_of_string "400")))
             in
             (let is_leap_year_local : bool =
                (((o_eq_int_int year_mod_4
                     (integer_of_string "0")) &&
                    (o_not
                       (o_eq_int_int year_mod_100
                          (integer_of_string "0")))) ||
                   (o_eq_int_int year_mod_400
                      (integer_of_string "0")))
             in
             (let days_before_month : integer =
                ( if
                   (o_eq_int_int month_local
                      (integer_of_string "1"))
                   then (integer_of_string "0")
                   else
                   ( if
                      (o_eq_int_int month_local
                         (integer_of_string "2"))
                      then
                      (integer_of_string "31")
                      else
                      ( if
                         (o_eq_int_int
                            month_local
                            (integer_of_string
                            "3")) then
                         ( if is_leap_year_local
                            then
                            (integer_of_string
                              "60") else
                            (integer_of_string
                              "59")) else
                         ( if
                            (o_eq_int_int
                               month_local
                               (integer_of_string
                               "4")) then
                            ( if
                               is_leap_year_local
                               then
                               (integer_of_string
                                 "91") else
                               (integer_of_string
                                 "90")) else
                            ( if
                               (o_eq_int_int
                                  month_local
                                  (integer_of_string
                                  "5")) then
                               ( if
                                  is_leap_year_local
                                  then
                                  (integer_of_string
                                    "121") else
                                  (integer_of_string
                                    "120")) else
                               ( if
                                  (o_eq_int_int
                                     month_local
                                     (integer_of_string
                                     "6")) then
                                  ( if
                                     is_leap_year_local
                                     then
                                     (integer_of_string
                                       "152")
                                     else
                                     (integer_of_string
                                       "151"))
                                  else
                                  ( if
                                     (o_eq_int_int
                                        month_local
                                        (integer_of_string
                                        "7"))
                                     then
                                     ( if
                                        is_leap_year_local
                                        then
                                        (integer_of_string
                                          "182")
                                        else
                                        (integer_of_string
                                          "181"))
                                     else
                                     ( if
                                        (o_eq_int_int
                                           month_local
                                           (integer_of_string
                                           "8"))
                                        then
                                        ( if
                                           is_leap_year_local
                                           then
                                           (integer_of_string
                                             "213")
                                           else
                                           (integer_of_string
                                             "212"))
                                        else
                                        ( if
                                           (o_eq_int_int
                                              month_local
                                              (integer_of_string
                                              "9"))
                                           then
                                           ( if
                                              is_leap_year_local
                                              then
                                              (integer_of_string
                                                "244")
                                              else
                                              (integer_of_string
                                                "243"))
                                           else
                                           ( if
                                              (o_eq_int_int
                                                 month_local
                                                 (integer_of_string
                                                 "10"))
                                              then
                                              ( if
                                                 is_leap_year_local
                                                 then
                                                 (integer_of_string
                                                   "274")
                                                 else
                                                 (integer_of_string
                                                   "273"))
                                              else
                                              ( if
                                                 (o_eq_int_int
                                                    month_local
                                                    (integer_of_string
                                                    "11"))
                                                 then
                                                 ( if
                                                    is_leap_year_local
                                                    then
                                                    (integer_of_string
                                                      "305")
                                                    else
                                                    (integer_of_string
                                                      "304"))
                                                 else
                                                 ( if
                                                    is_leap_year_local
                                                    then
                                                    (integer_of_string
                                                      "335")
                                                    else
                                                    (integer_of_string
                                                      "334")))))))))))))
             in
             (o_add_int_int days_before_month
                day_local)))))))))))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2591; start_column=5;
               end_line=2631; end_column=34;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2350; start_column=12;
                             end_line=2350; end_column=40;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let is_domestic_service_employer__1: bool =
    match
      (match is_domestic_service_employer
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let relevant_wage_events :
                         WagePaymentEvent.t array
                         =
                         (o_filter
                            (fun
                               (wage_event:
                                 WagePaymentEvent.t) ->
                               (o_eq_int_int
                                  ((wage_event.WagePaymentEvent.employer).Organization.id)
                                  (organization.Organization.id)) &&
                                 ((o_eq
                                     (wage_event.WagePaymentEvent.payment_medium)
                                     (PaymentMedium.Cash)) &&
                                    (((o_eq_int_int
                                         ((Date_en.get_year)
                                            (wage_event.WagePaymentEvent.payment_date))
                                         calendar_year) ||
                                        (o_eq_int_int
                                           ((Date_en.get_year)
                                              (wage_event.WagePaymentEvent.payment_date))
                                           (o_sub_int_int
                                              calendar_year
                                              (integer_of_string
                                              "1")))) &&
                                       (o_fold
                                          (fun
                                             (acc:
                                               bool)
                                             (emp_event:
                                               EmploymentRelationshipEvent.t) ->
                                             acc ||
                                               ((o_eq_int_int
                                                   ((emp_event.EmploymentRelationshipEvent.employer).Organization.id)
                                                   (organization.Organization.id)) &&
                                                  ((o_eq_int_int
                                                      ((emp_event.EmploymentRelationshipEvent.employee).Individual.id)
                                                      ((wage_event.WagePaymentEvent.employee).Individual.id)) &&
                                                     (o_eq
                                                        (emp_event.EmploymentRelationshipEvent.employment_category)
                                                        (EmploymentCategory.DomesticService)))))
                                          false
                                          employment_relationship_events))))
                            wage_payment_events)
                       in
                       (let
                          total_domestic_service_wages
                          : money =
                          (o_reduce
                             (fun (sum1: money)
                                (sum2: money) ->
                                o_add_mon_mon
                                  sum1 sum2)
                             (fun (_: unit) ->
                                money_of_cents_string
                                "0")
                             (o_map
                                (fun
                                   (wage_event:
                                     WagePaymentEvent.t) ->
                                   wage_event.WagePaymentEvent.amount)
                                relevant_wage_events))
                       in
                       (o_gte_mon_mon
                          total_domestic_service_wages
                          (money_of_cents_string
                          "100000")))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6246; start_column=5;
                         end_line=6258; end_column=43;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2372; start_column=11;
                                       end_line=2372; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2372; start_column=11;
                  end_line=2372; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2372; start_column=11;
                           end_line=2372; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let section_3306_get_candidate_dates_in_year: (EmploymentRelationshipEvent.t
                                                 array) ->
                                                  integer ->
                                                  (date
                                                   array) =
    fun
      (employment_events_arg:
        EmploymentRelationshipEvent.t array)
      (target_year_arg: integer) ->
      match
        (Optional.Present
           ((let year_start : date =
               ((Date_en.of_year_month_day)
                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                    start_line=2659; start_column=27;
                    end_line=2659; end_column=49;
                    law_headings=[]})
                  target_year_arg
                  (integer_of_string "1")
                  (integer_of_string "1")) in
             (let _ : date =
                ((Date_en.of_year_month_day)
                   ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                     start_line=2660; start_column=25;
                     end_line=2660; end_column=47;
                     law_headings=[]})
                   target_year_arg
                   (integer_of_string "12")
                   (integer_of_string "31")) in
             (let all_year_days : date array =
                (o_map
                   (fun (day_num: integer) ->
                      o_add_dat_dur AbortOnRound
                        {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2664; start_column=20;
                         end_line=2664; end_column=21;
                         law_headings=[]}
                        year_start
                        (o_mult_dur_int
                           (duration_of_numbers (0) (0) (1))
                           (o_sub_int_int day_num
                              (integer_of_string
                              "1"))))
                   ((List_en.sequence)
                      (integer_of_string "1")
                      (integer_of_string "366")))
             in
             (o_filter
                (fun (check_date: date) ->
                   (o_eq_int_int
                      ((Date_en.get_year)
                         check_date)
                      target_year_arg) &&
                     (o_fold
                        (fun (acc: bool)
                           (emp_event:
                             EmploymentRelationshipEvent.t) ->
                           acc ||
                             (section_3306_employment_overlaps_date
                                emp_event
                                check_date))
                        false
                        employment_events_arg))
                all_year_days)))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2659; start_column=5;
               end_line=2670; end_column=71;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2354; start_column=12;
                             end_line=2354; end_column=52;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_get_calendar_week_us: date ->
                                           (integer
                                             *
                                             integer) =
    fun (date_arg: date) ->
      match
        (Optional.Present
           ((let year_local : integer =
               ((Date_en.get_year) date_arg) in
             (let day_of_year : integer =
                (section_3306_get_day_of_year
                   date_arg) in
             (let days_minus_one : integer =
                (o_sub_int_int day_of_year
                   (integer_of_string "1")) in
             (let week_decimal : decimal =
                (o_div_rat_rat
                   {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                    start_line=2648; start_column=59;
                    end_line=2648; end_column=62;
                    law_headings=[]}
                   (o_torat_int days_minus_one)
                   (decimal_of_string "7")) in
             (let week_number : integer =
                (o_add_int_int
                   (o_toint_rat week_decimal)
                   (integer_of_string "1")) in
             (year_local, week_number)))))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2641; start_column=5;
               end_line=2650; end_column=30;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2352; start_column=12;
                             end_line=2352; end_column=45;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_get_days_with_employment: (EmploymentRelationshipEvent.t
                                              array) ->
                                               integer ->
                                               integer ->
                                               (date
                                                array) =
    fun
      (employment_events_arg:
        EmploymentRelationshipEvent.t array)
      (target_year_arg: integer)
      (min_individuals_arg: integer) ->
      match
        (Optional.Present
           ((let candidate_dates : date array =
               (section_3306_get_candidate_dates_in_year
                  employment_events_arg
                  target_year_arg) in
             (o_filter
                (fun (candidate_date: date) ->
                   (let employment_events_on_day
                      :
                      EmploymentRelationshipEvent.t
                      array =
                      (o_filter
                         (fun
                            (emp_event:
                              EmploymentRelationshipEvent.t) ->
                            section_3306_employment_overlaps_date
                              emp_event
                              candidate_date)
                         employment_events_arg)
                   in
                   (let unique_employee_count :
                      integer =
                      (section_3306_count_unique_employees
                         employment_events_on_day)
                   in
                   (o_gte_int_int
                      unique_employee_count
                      min_individuals_arg))))
                candidate_dates)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2677; start_column=5;
               end_line=2692; end_column=51;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2357; start_column=12;
                             end_line=2357; end_column=49;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_get_week_identifier: date ->
                                          (integer
                                            *
                                            integer) =
    fun (date_arg: date) ->
      match
        (Optional.Present
           ((section_3306_get_calendar_week_us
               date_arg),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2696; start_column=5;
               end_line=2696; end_column=50;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2361; start_column=12;
                             end_line=2361; end_column=44;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_count_unique_calendar_weeks: (date
                                                 array) ->
                                                  integer =
    fun (dates_arg: date array) ->
      match
        (Optional.Present
           ((let unique_dates : date array =
               (o_filter
                  (fun (date_item: date) ->
                     (let current_week_id :
                        (integer * integer) =
                        (section_3306_get_week_identifier
                           date_item) in
                     (o_not
                        (o_fold
                           (fun (acc: bool)
                              (prev_date: date) ->
                              acc ||
                                ((o_lt_dat_dat
                                    prev_date
                                    date_item) &&
                                   ((o_eq_int_int
                                       (let x, _
                                       = (section_3306_get_week_identifier
                                            prev_date)
                                       in x) (let
                                       x, _
                                       = current_week_id
                                       in x)) &&
                                      (o_eq_int_int
                                         (let _,
                                         x
                                         = (section_3306_get_week_identifier
                                              prev_date)
                                         in x)
                                         (let _,
                                         x
                                         = current_week_id
                                         in x)))))
                           false dates_arg))))
                  dates_arg) in
             (o_length unique_dates)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2703; start_column=5;
               end_line=2711; end_column=27;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2363; start_column=12;
                             end_line=2363; end_column=52;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_3306_has_ten_days_in_different_weeks: (EmploymentRelationshipEvent.t
                                                     array) ->
                                                      integer ->
                                                      integer ->
                                                      bool =
    fun
      (employment_events_arg:
        EmploymentRelationshipEvent.t array)
      (target_year_arg: integer)
      (min_individuals_arg: integer) ->
      match
        (Optional.Present
           ((let days_current_year : date array =
               (section_3306_get_days_with_employment
                  employment_events_arg
                  target_year_arg
                  min_individuals_arg) in
             (let preceding_year : integer =
                (o_sub_int_int target_year_arg
                   (integer_of_string "1")) in
             (let days_preceding_year :
                date array =
                (section_3306_get_days_with_employment
                   employment_events_arg
                   preceding_year
                   min_individuals_arg) in
             (let all_days : date array =
                (o_concat days_current_year
                   days_preceding_year) in
             (let unique_week_count : integer =
                (section_3306_count_unique_calendar_weeks
                   all_days) in
             (o_gte_int_int unique_week_count
                (integer_of_string "10"))))))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2718; start_column=5;
               end_line=2727; end_column=28;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2365; start_column=12;
                             end_line=2365; end_column=56;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let is_agricultural_employer__1: bool =
    match
      (match is_agricultural_employer
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let
                           relevant_employment_events
                           :
                           EmploymentRelationshipEvent.t
                           array =
                           (o_filter
                              (fun
                                 (emp_event:
                                   EmploymentRelationshipEvent.t) ->
                                 (o_eq_int_int
                                    ((emp_event.EmploymentRelationshipEvent.employer).Organization.id)
                                    (organization.Organization.id)) &&
                                   ((o_eq
                                       (emp_event.EmploymentRelationshipEvent.employment_category)
                                       (EmploymentCategory.AgriculturalLabor)) &&
                                      ((o_eq_int_int
                                          ((Date_en.get_year)
                                             (emp_event.EmploymentRelationshipEvent.start_date))
                                          calendar_year) ||
                                         ((o_eq_int_int
                                             ((Date_en.get_year)
                                                (emp_event.EmploymentRelationshipEvent.start_date))
                                             (o_sub_int_int
                                                calendar_year
                                                (integer_of_string
                                                "1"))) ||
                                            ((o_eq_int_int
                                                ((Date_en.get_year)
                                                   (emp_event.EmploymentRelationshipEvent.end_date))
                                                calendar_year) ||
                                               (o_eq_int_int
                                                  ((Date_en.get_year)
                                                     (emp_event.EmploymentRelationshipEvent.end_date))
                                                  (o_sub_int_int
                                                     calendar_year
                                                     (integer_of_string
                                                     "1"))))))))
                              employment_relationship_events)
                          in
                          (section_3306_has_ten_days_in_different_weeks
                             relevant_employment_events
                             calendar_year
                             (integer_of_string
                             "5"))) then
                        (Optional.Present
                           (true,
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=6224; start_column=22;
                               end_line=6224; end_column=26;
                               law_headings=["============================= SECTION 3306 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((let
                              relevant_wage_events
                              :
                              WagePaymentEvent.t
                              array =
                              (o_filter
                                 (fun
                                    (wage_event:
                                      WagePaymentEvent.t) ->
                                    (o_eq_int_int
                                       ((wage_event.WagePaymentEvent.employer).Organization.id)
                                       (organization.Organization.id)) &&
                                      (((o_eq_int_int
                                           ((Date_en.get_year)
                                              (wage_event.WagePaymentEvent.payment_date))
                                           calendar_year) ||
                                          (o_eq_int_int
                                             ((Date_en.get_year)
                                                (wage_event.WagePaymentEvent.payment_date))
                                             (o_sub_int_int
                                                calendar_year
                                                (integer_of_string
                                                "1")))) &&
                                         (o_fold
                                            (fun
                                               (acc:
                                                 bool)
                                               (emp_event:
                                                 EmploymentRelationshipEvent.t) ->
                                               acc ||
                                                 ((o_eq_int_int
                                                     ((emp_event.EmploymentRelationshipEvent.employer).Organization.id)
                                                     (organization.Organization.id)) &&
                                                    ((o_eq_int_int
                                                        ((emp_event.EmploymentRelationshipEvent.employee).Individual.id)
                                                        ((wage_event.WagePaymentEvent.employee).Individual.id)) &&
                                                       (o_eq
                                                          (emp_event.EmploymentRelationshipEvent.employment_category)
                                                          (EmploymentCategory.AgriculturalLabor)))))
                                            false
                                            employment_relationship_events)))
                                 wage_payment_events)
                            in
                            (let
                               total_agricultural_wages
                               : money =
                               (o_reduce
                                  (fun
                                     (sum1:
                                       money)
                                     (sum2:
                                       money) ->
                                     o_add_mon_mon
                                       sum1 sum2)
                                  (fun
                                     (_: unit) ->
                                     money_of_cents_string
                                     "0")
                                  (o_map
                                     (fun
                                        (wage_event:
                                          WagePaymentEvent.t) ->
                                        wage_event.WagePaymentEvent.amount)
                                     relevant_wage_events))
                            in
                            (o_gte_mon_mon
                               total_agricultural_wages
                               (money_of_cents_string
                               "2000000")))),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=6180; start_column=5;
                              end_line=6191; end_column=40;
                              law_headings=["============================= SECTION 3306 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2371; start_column=11;
                                       end_line=2371; end_column=35;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2371; start_column=11;
                  end_line=2371; end_column=35;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2371; start_column=11;
                           end_line=2371; end_column=35;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_general_employer__1: bool =
    match
      (match is_general_employer
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let
                           relevant_employment_events
                           :
                           EmploymentRelationshipEvent.t
                           array =
                           (o_filter
                              (fun
                                 (emp_event:
                                   EmploymentRelationshipEvent.t) ->
                                 (o_eq_int_int
                                    ((emp_event.EmploymentRelationshipEvent.employer).Organization.id)
                                    (organization.Organization.id)) &&
                                   (((o_eq_int_int
                                        ((Date_en.get_year)
                                           (emp_event.EmploymentRelationshipEvent.start_date))
                                        calendar_year) ||
                                       ((o_eq_int_int
                                           ((Date_en.get_year)
                                              (emp_event.EmploymentRelationshipEvent.start_date))
                                           (o_sub_int_int
                                              calendar_year
                                              (integer_of_string
                                              "1"))) ||
                                          ((o_eq_int_int
                                              ((Date_en.get_year)
                                                 (emp_event.EmploymentRelationshipEvent.end_date))
                                              calendar_year) ||
                                             (o_eq_int_int
                                                ((Date_en.get_year)
                                                   (emp_event.EmploymentRelationshipEvent.end_date))
                                                (o_sub_int_int
                                                   calendar_year
                                                   (integer_of_string
                                                   "1")))))) &&
                                      (o_not
                                         (o_eq
                                            (emp_event.EmploymentRelationshipEvent.employment_category)
                                            (EmploymentCategory.DomesticService)))))
                              employment_relationship_events)
                          in
                          (section_3306_has_ten_days_in_different_weeks
                             relevant_employment_events
                             calendar_year
                             (integer_of_string
                             "1"))) then
                        (Optional.Present
                           (true,
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=6156; start_column=22;
                               end_line=6156; end_column=26;
                               law_headings=["============================= SECTION 3306 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((let
                              relevant_wage_events
                              :
                              WagePaymentEvent.t
                              array =
                              (o_filter
                                 (fun
                                    (wage_event:
                                      WagePaymentEvent.t) ->
                                    (o_eq_int_int
                                       ((wage_event.WagePaymentEvent.employer).Organization.id)
                                       (organization.Organization.id)) &&
                                      (((o_eq_int_int
                                           ((Date_en.get_year)
                                              (wage_event.WagePaymentEvent.payment_date))
                                           calendar_year) ||
                                          (o_eq_int_int
                                             ((Date_en.get_year)
                                                (wage_event.WagePaymentEvent.payment_date))
                                             (o_sub_int_int
                                                calendar_year
                                                (integer_of_string
                                                "1")))) &&
                                         (o_not
                                            (o_fold
                                               (fun
                                                  (acc:
                                                    bool)
                                                  (emp_event:
                                                    EmploymentRelationshipEvent.t) ->
                                                  acc ||
                                                    ((o_eq_int_int
                                                        ((emp_event.EmploymentRelationshipEvent.employer).Organization.id)
                                                        (organization.Organization.id)) &&
                                                       ((o_eq_int_int
                                                           ((emp_event.EmploymentRelationshipEvent.employee).Individual.id)
                                                           ((wage_event.WagePaymentEvent.employee).Individual.id)) &&
                                                          (o_eq
                                                             (emp_event.EmploymentRelationshipEvent.employment_category)
                                                             (EmploymentCategory.DomesticService)))))
                                               false
                                               employment_relationship_events))))
                                 wage_payment_events)
                            in
                            (let total_wages :
                               money =
                               (o_reduce
                                  (fun
                                     (sum1:
                                       money)
                                     (sum2:
                                       money) ->
                                     o_add_mon_mon
                                       sum1 sum2)
                                  (fun
                                     (_: unit) ->
                                     money_of_cents_string
                                     "0")
                                  (o_map
                                     (fun
                                        (wage_event:
                                          WagePaymentEvent.t) ->
                                        wage_event.WagePaymentEvent.amount)
                                     relevant_wage_events))
                            in
                            (o_gte_mon_mon
                               total_wages
                               (money_of_cents_string
                               "150000")))),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=6104; start_column=5;
                              end_line=6118; end_column=26;
                              law_headings=["============================= SECTION 3306 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2370; start_column=11;
                                       end_line=2370; end_column=30;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2370; start_column=11;
                  end_line=2370; end_column=30;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2370; start_column=11;
                           end_line=2370; end_column=30;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_employer__1: bool =
    match
      (match is_employer
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((is_general_employer__1 ||
                         (is_agricultural_employer__1 ||
                            is_domestic_service_employer__1)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6300; start_column=5;
                         end_line=6302; end_column=36;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2373; start_column=11;
                                       end_line=2373; end_column=22;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2373; start_column=11;
                  end_line=2373; end_column=22;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2373; start_column=11;
                           end_line=2373; end_column=22;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: OrganizationSection3306EmployerStatusOutput.t =
    match
      (Optional.Present
         (({OrganizationSection3306EmployerStatusOutput.organization =
              organization;
              OrganizationSection3306EmployerStatusOutput.is_employer =
                is_employer__1;
              OrganizationSection3306EmployerStatusOutput.is_general_employer =
                is_general_employer__1;
              OrganizationSection3306EmployerStatusOutput.is_agricultural_employer =
                is_agricultural_employer__1;
              OrganizationSection3306EmployerStatusOutput.is_domestic_service_employer =
                is_domestic_service_employer__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2474; start_column=5;
             end_line=2480; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2375; start_column=10;
                           end_line=2375; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {OrganizationSection3306EmployerStatus.main_output =
     main_output}

(* Scope WagePaymentEventSection3306Wages *)
let wage_payment_event_section3306_wages :
  WagePaymentEventSection3306Wages_in.t -> WagePaymentEventSection3306Wages.t =
  fun wage_payment_event_section3306_wages_in ->
  let wage_payment_event: WagePaymentEvent.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.wage_payment_event_in
    in
  let employment_termination_events: EmploymentTerminationEvent.t
                                     array =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.employment_termination_events_in
    in
  let death_events: DeathEvent.t array =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.death_events_in
    in
  let is_excluded_by_sickness_disability_death: ((bool
                                                   *
                                                   code_location)) Optional.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.is_excluded_by_sickness_disability_death_in
    in
  let is_excluded_by_nonbusiness_service: ((bool
                                             *
                                             code_location)) Optional.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.is_excluded_by_nonbusiness_service_in
    in
  let is_excluded_by_termination_payment: ((bool
                                             *
                                             code_location)) Optional.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.is_excluded_by_termination_payment_in
    in
  let is_excluded_by_agricultural_noncash: ((bool
                                              *
                                              code_location)) Optional.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.is_excluded_by_agricultural_noncash_in
    in
  let is_excluded_by_survivor_payment: ((bool *
                                          code_location)) Optional.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.is_excluded_by_survivor_payment_in
    in
  let taxable_amount_before_7000_cap: ((money *
                                         code_location)) Optional.t =
    wage_payment_event_section3306_wages_in.WagePaymentEventSection3306Wages_in.taxable_amount_before_7000_cap_in
    in
  let is_excluded_by_agricultural_noncash__1: bool =
    match
      (match is_excluded_by_agricultural_noncash
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (wage_payment_event.WagePaymentEvent.payment_medium)
                          (PaymentMedium.NonCash)) &&
                         (o_eq
                            (wage_payment_event.WagePaymentEvent.payment_reason)
                            (PaymentReason.AgriculturalLaborNonCash))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6466; start_column=5;
                         end_line=6467; end_column=83;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2397; start_column=11;
                                       end_line=2397; end_column=46;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2397; start_column=11;
                  end_line=2397; end_column=46;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2397; start_column=11;
                           end_line=2397; end_column=46;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_by_nonbusiness_service__1: bool =
    match
      (match is_excluded_by_nonbusiness_service
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (wage_payment_event.WagePaymentEvent.payment_medium)
                          (PaymentMedium.NonCash)) &&
                         (wage_payment_event.WagePaymentEvent.is_not_in_course_of_trade_or_business)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6390; start_column=5;
                         end_line=6391; end_column=65;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2395; start_column=11;
                                       end_line=2395; end_column=45;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2395; start_column=11;
                  end_line=2395; end_column=45;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2395; start_column=11;
                           end_line=2395; end_column=45;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_by_sickness_disability_death__1: bool =
    match
      (match
         is_excluded_by_sickness_disability_death
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((((o_eq
                           (wage_payment_event.WagePaymentEvent.payment_reason)
                           (PaymentReason.SicknessOrAccidentDisability)) ||
                          (o_eq
                             (wage_payment_event.WagePaymentEvent.payment_reason)
                             (PaymentReason.Death))) &&
                         ((wage_payment_event.WagePaymentEvent.is_under_plan_or_system) &&
                            ((wage_payment_event.WagePaymentEvent.is_for_employee_generally) ||
                               (wage_payment_event.WagePaymentEvent.is_for_class_of_employees)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6367; start_column=5;
                         end_line=6371; end_column=55;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2394; start_column=11;
                                       end_line=2394; end_column=51;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2394; start_column=11;
                  end_line=2394; end_column=51;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2394; start_column=11;
                           end_line=2394; end_column=51;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_by_termination_payment__1: bool =
    match
      (match is_excluded_by_termination_payment
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let is_termination_payment
                         : bool =
                         (o_eq
                            (wage_payment_event.WagePaymentEvent.payment_reason)
                            (PaymentReason.TerminationAfterDeathOrDisabilityRetirement))
                       in
                       (let
                          termination_condition_a_met
                          : bool =
                          (o_fold
                             (fun (acc: bool)
                                (term_event:
                                  EmploymentTerminationEvent.t) ->
                                acc ||
                                  ((o_eq_int_int
                                      ((term_event.EmploymentTerminationEvent.employer).Organization.id)
                                      ((wage_payment_event.WagePaymentEvent.employer).Organization.id)) &&
                                     ((o_eq_int_int
                                         ((term_event.EmploymentTerminationEvent.employee).Individual.id)
                                         ((wage_payment_event.WagePaymentEvent.employee).Individual.id)) &&
                                        (((o_eq
                                             (term_event.EmploymentTerminationEvent.reason)
                                             (TerminationReason.Death)) ||
                                            (o_eq
                                               (term_event.EmploymentTerminationEvent.reason)
                                               (TerminationReason.DisabilityRetirement))) &&
                                           (o_lte_dat_dat
                                              (term_event.EmploymentTerminationEvent.termination_date)
                                              (wage_payment_event.WagePaymentEvent.payment_date))))))
                             false
                             employment_termination_events)
                       in
                       (let plan_condition_b_met
                          : bool =
                          ((wage_payment_event.WagePaymentEvent.is_under_plan_or_system) &&
                             ((wage_payment_event.WagePaymentEvent.is_for_employee_generally) ||
                                (wage_payment_event.WagePaymentEvent.is_for_class_of_employees)))
                       in
                       ((is_termination_payment &&
                           (termination_condition_a_met &&
                              (o_not
                                 (wage_payment_event.WagePaymentEvent.would_have_been_paid_without_termination)))) &&
                          plan_condition_b_met)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6423; start_column=5;
                         end_line=6448; end_column=29;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2396; start_column=11;
                                       end_line=2396; end_column=45;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2396; start_column=11;
                  end_line=2396; end_column=45;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2396; start_column=11;
                           end_line=2396; end_column=45;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_by_survivor_payment__1: bool =
    match
      (match is_excluded_by_survivor_payment
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let
                         is_paid_to_survivor_or_estate
                         : bool =
                         (wage_payment_event.WagePaymentEvent.is_paid_to_survivor_or_estate)
                       in
                       (let payment_year :
                          integer =
                          ((Date_en.get_year)
                             (wage_payment_event.WagePaymentEvent.payment_date))
                       in
                       (let employee_local :
                          Individual.t =
                          (wage_payment_event.WagePaymentEvent.employee)
                       in
                       (let
                          employee_died_in_previous_year
                          : bool =
                          (o_fold
                             (fun (acc: bool)
                                (death_event:
                                  DeathEvent.t) ->
                                acc ||
                                  ((o_eq_int_int
                                      ((death_event.DeathEvent.decedent).Individual.id)
                                      (employee_local.Individual.id)) &&
                                     (o_lt_int_int
                                        ((Date_en.get_year)
                                           (death_event.DeathEvent.death_date))
                                        payment_year)))
                             false death_events)
                       in
                       (is_paid_to_survivor_or_estate &&
                          employee_died_in_previous_year))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6487; start_column=5;
                         end_line=6501; end_column=39;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2398; start_column=11;
                                       end_line=2398; end_column=42;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2398; start_column=11;
                  end_line=2398; end_column=42;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2398; start_column=11;
                           end_line=2398; end_column=42;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxable_amount_before_7000_cap__1: money =
    match
      (match taxable_amount_before_7000_cap
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (is_excluded_by_sickness_disability_death__1 ||
                            (is_excluded_by_nonbusiness_service__1 ||
                               (is_excluded_by_termination_payment__1 ||
                                  (is_excluded_by_agricultural_noncash__1 ||
                                     is_excluded_by_survivor_payment__1))))
                         then
                         (money_of_cents_string
                           "0") else
                         (wage_payment_event.WagePaymentEvent.amount)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6522; start_column=5;
                         end_line=6529; end_column=32;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2399; start_column=11;
                                       end_line=2399; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2399; start_column=11;
                  end_line=2399; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2399; start_column=11;
                           end_line=2399; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: WagePaymentEventSection3306WagesOutput.t =
    match
      (Optional.Present
         (({WagePaymentEventSection3306WagesOutput.wage_payment_event =
              wage_payment_event;
              WagePaymentEventSection3306WagesOutput.is_excluded_by_sickness_disability_death =
                is_excluded_by_sickness_disability_death__1;
              WagePaymentEventSection3306WagesOutput.is_excluded_by_nonbusiness_service =
                is_excluded_by_nonbusiness_service__1;
              WagePaymentEventSection3306WagesOutput.is_excluded_by_termination_payment =
                is_excluded_by_termination_payment__1;
              WagePaymentEventSection3306WagesOutput.is_excluded_by_agricultural_noncash =
                is_excluded_by_agricultural_noncash__1;
              WagePaymentEventSection3306WagesOutput.is_excluded_by_survivor_payment =
                is_excluded_by_survivor_payment__1;
              WagePaymentEventSection3306WagesOutput.taxable_amount_before_7000_cap =
                taxable_amount_before_7000_cap__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2493; start_column=5;
             end_line=2501; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2402; start_column=10;
                           end_line=2402; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {WagePaymentEventSection3306Wages.main_output =
     main_output}

(* Scope TotalWages3306Calculation *)
let total_wages3306_calculation :
  TotalWages3306Calculation_in.t -> TotalWages3306Calculation.t =
  fun total_wages3306_calculation_in ->
  let wage_results: WagePaymentEventSection3306WagesOutput.t
                    array =
    total_wages3306_calculation_in.TotalWages3306Calculation_in.wage_results_in
    in
  let total_taxable_wages: ((money *
                              code_location)) Optional.t =
    total_wages3306_calculation_in.TotalWages3306Calculation_in.total_taxable_wages_in
    in
  let total_taxable_wages__1: money =
    match
      (match total_taxable_wages
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let total_before_cap :
                         money =
                         (o_reduce
                            (fun (sum1: money)
                               (sum2: money) ->
                               o_add_mon_mon sum1
                                 sum2)
                            (fun (_: unit) ->
                               money_of_cents_string
                               "0")
                            (o_map
                               (fun
                                  (wage_result:
                                    WagePaymentEventSection3306WagesOutput.t) ->
                                  wage_result.WagePaymentEventSection3306WagesOutput.taxable_amount_before_7000_cap)
                               wage_results)) in
                       ( if
                          (o_gt_mon_mon
                             total_before_cap
                             (money_of_cents_string
                             "700000")) then
                          (money_of_cents_string
                            "700000") else
                          total_before_cap)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6331; start_column=5;
                         end_line=6340; end_column=23;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2419; start_column=11;
                                       end_line=2419; end_column=30;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2419; start_column=11;
                  end_line=2419; end_column=30;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2419; start_column=11;
                           end_line=2419; end_column=30;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: TotalWages3306CalculationOutput.t =
    match
      (Optional.Present
         (({TotalWages3306CalculationOutput.total_taxable_wages =
              total_taxable_wages__1;
              TotalWages3306CalculationOutput.wage_results_with_cap =
                wage_results}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2514; start_column=5;
             end_line=2517; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2421; start_column=10;
                           end_line=2421; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {TotalWages3306Calculation.main_output =
     main_output}

(* Toplevel def get_year_end *)
let get_year_end : integer -> date =
  fun (tax_year_arg: integer) ->
    (Date_en.of_year_month_day)
      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
        start_line=845; start_column=5;
        end_line=845; end_column=27;
        law_headings=[]}) tax_year_arg
      (integer_of_string "12") (integer_of_string
      "31")

(* Toplevel def get_taxpayer *)
let get_taxpayer : IndividualTaxReturn.t ->
                     Individual.t =
  fun
    (individual_tax_return_arg:
      IndividualTaxReturn.t) ->
    match
      (individual_tax_return_arg.IndividualTaxReturn.details)
    with
    | FilingStatusVariant.JointReturn variant ->
        (variant.JointReturnVariant.taxpayer)
    | FilingStatusVariant.SurvivingSpouse variant ->
        (variant.SurvivingSpouseVariant.taxpayer)
    | FilingStatusVariant.HeadOfHousehold variant ->
        (variant.HeadOfHouseholdVariant.taxpayer)
    | FilingStatusVariant.Single variant ->
        (variant.SingleVariant.taxpayer)
    | FilingStatusVariant.MarriedFilingSeparate variant ->
        (variant.MarriedFilingSeparateVariant.taxpayer)

(* Toplevel def get_spouse *)
let get_spouse : IndividualTaxReturn.t ->
                   (Individual.t) Optional.t =
  fun
    (individual_tax_return_arg:
      IndividualTaxReturn.t) ->
    match
      (individual_tax_return_arg.IndividualTaxReturn.details)
    with
    | FilingStatusVariant.JointReturn variant ->
        (Optional.Present
           (variant.JointReturnVariant.spouse))
    | FilingStatusVariant.SurvivingSpouse variant ->
        (Optional.Present
           (variant.SurvivingSpouseVariant.deceased_spouse))
    | FilingStatusVariant.HeadOfHousehold _ ->
        (Optional.Absent)
    | FilingStatusVariant.Single _ ->
        (Optional.Absent)
    | FilingStatusVariant.MarriedFilingSeparate variant ->
        (Optional.Present
           (variant.MarriedFilingSeparateVariant.spouse))

(* Toplevel def is_tax_year_2018_through_2025 *)
let is_tax_year_2018_through_2025 : integer ->
                                      bool =
  fun (tax_year_arg: integer) ->
    (o_gte_int_int tax_year_arg
       (integer_of_string "2018")) &&
      (o_lte_int_int tax_year_arg
         (integer_of_string "2025"))

(* Toplevel def get_last_spouse_from_marriage_events *)
let get_last_spouse_from_marriage_events : Individual.t ->
                                             (MarriageEvent.t
                                              array) ->
                                             date ->
                                             (Individual.t) Optional.t =
  fun (individual_arg: Individual.t)
    (marriage_events_arg: MarriageEvent.t array)
    (year_end_arg: date) ->
    (let valid_marriages :
       (Individual.t * date) array =
       (o_map
          (fun
             (marriage_event: MarriageEvent.t) ->
             (( if
                 ((o_eq_int_int
                     ((marriage_event.MarriageEvent.spouse1).Individual.id)
                     (individual_arg.Individual.id)) &&
                    (o_eq_boo_boo
                       ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                       (individual_arg.Individual.is_counterfactual)))
                 then
                 (marriage_event.MarriageEvent.spouse2)
                 else
                 (marriage_event.MarriageEvent.spouse1)),
               (marriage_event.MarriageEvent.marriage_date)))
          (o_filter
             (fun
                (marriage_event: MarriageEvent.t) ->
                (((o_eq_int_int
                     ((marriage_event.MarriageEvent.spouse1).Individual.id)
                     (individual_arg.Individual.id)) &&
                    (o_eq_boo_boo
                       ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                       (individual_arg.Individual.is_counterfactual))) ||
                   ((o_eq_int_int
                       ((marriage_event.MarriageEvent.spouse2).Individual.id)
                       (individual_arg.Individual.id)) &&
                      (o_eq_boo_boo
                         ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                         (individual_arg.Individual.is_counterfactual)))) &&
                  (o_lte_dat_dat
                     (marriage_event.MarriageEvent.marriage_date)
                     year_end_arg))
             marriage_events_arg)) in
    ( if
       (o_gt_int_int (o_length valid_marriages)
          (integer_of_string "0")) then
       (let most_recent_marriage_date : date =
          (o_reduce
             (fun (max1: date) (max2: date) ->
                 if (o_gt_dat_dat max1 max2) then
                  max1 else max2)
             (fun (_: unit) -> raise
                (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                     start_line=927; start_column=44;
                                     end_line=927; end_column=51;
                                     law_headings=[]}])))
             (o_map
                (fun
                   (marriage_tuple:
                     (Individual.t * date)) ->
                   let _, x = marriage_tuple in x)
                valid_marriages)) in
         ((List_en.first_element)
            (o_map
               (fun
                  (marriage_tuple:
                    (Individual.t * date)) -> let
                  x, _ = marriage_tuple in x)
               (o_filter
                  (fun
                     (marriage_tuple:
                       (Individual.t * date)) ->
                     o_eq_dat_dat (let _, x
                       = marriage_tuple in x)
                       most_recent_marriage_date)
                  valid_marriages)))) else
       (Optional.Absent)))

(* Toplevel def period_spans_more_than_half_year *)
let period_spans_more_than_half_year : date ->
                                         date ->
                                         integer ->
                                         bool =
  fun (start_date_arg: date) (end_date_arg: date)
    (tax_year_arg: integer) ->
    (let year_start : date =
       ((Date_en.of_year_month_day)
          ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
            start_line=953; start_column=27;
            end_line=953; end_column=49;
            law_headings=[]}) tax_year_arg
          (integer_of_string "1")
          (integer_of_string "1")) in
    (let year_end : date =
       ((Date_en.of_year_month_day)
          ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
            start_line=954; start_column=25;
            end_line=954; end_column=47;
            law_headings=[]}) tax_year_arg
          (integer_of_string "12")
          (integer_of_string "31")) in
    (let overlap_start : date =
       ((Date_en.max) start_date_arg year_start)
    in
    (let overlap_end : date =
       ((Date_en.min) end_date_arg year_end) in
    ( if
       (o_lte_dat_dat overlap_start overlap_end)
       then
       (let overlap_duration : duration =
          (o_sub_dat_dat overlap_end
             overlap_start) in
         (o_gt_dur_dur
            {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=964; start_column=24;
             end_line=964; end_column=25;
             law_headings=[]} overlap_duration
            (duration_of_numbers (0) (0) (182))))
       else false)))))

(* Scope EmploymentRelationshipEventSection3306Employment *)
let employment_relationship_event_section3306_employment :
  EmploymentRelationshipEventSection3306Employment_in.t -> EmploymentRelationshipEventSection3306Employment.t =
  fun employment_relationship_event_section3306_employment_in ->
  let employment_relationship_event: EmploymentRelationshipEvent.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.employment_relationship_event_in
    in
  let calendar_year: integer =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.calendar_year_in
    in
  let wage_payment_events: WagePaymentEvent.t
                           array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.wage_payment_events_in
    in
  let employment_relationship_events: EmploymentRelationshipEvent.t
                                      array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.employment_relationship_events_in
    in
  let student_enrollment_events: StudentEnrollmentEvent.t
                                 array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.student_enrollment_events_in
    in
  let hospital_patient_events: HospitalPatientEvent.t
                               array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.hospital_patient_events_in
    in
  let immigration_admission_events: ImmigrationAdmissionEvent.t
                                    array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.immigration_admission_events_in
    in
  let parenthood_events: ParenthoodEvent.t array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.parenthood_events_in
    in
  let birth_events: BirthEvent.t array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.birth_events_in
    in
  let marriage_events: MarriageEvent.t array =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.marriage_events_in
    in
  let employer_status: ((OrganizationSection3306EmployerStatusOutput.t
                          * code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.employer_status_in
    in
  let is_excluded_agricultural_labor: ((bool *
                                         code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_agricultural_labor_in
    in
  let is_excluded_domestic_service: ((bool *
                                       code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_domestic_service_in
    in
  let is_excluded_family_employment: ((bool *
                                        code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_family_employment_in
    in
  let is_excluded_federal_government: ((bool *
                                         code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_federal_government_in
    in
  let is_excluded_state_government: ((bool *
                                       code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_state_government_in
    in
  let is_excluded_student_service: ((bool *
                                      code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_student_service_in
    in
  let is_excluded_hospital_patient_service: ((bool
                                               *
                                               code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_hospital_patient_service_in
    in
  let is_excluded_foreign_government: ((bool *
                                         code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_foreign_government_in
    in
  let is_excluded_student_nurse: ((bool *
                                    code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_student_nurse_in
    in
  let is_excluded_international_organization: ((bool
                                                 *
                                                 code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_international_organization_in
    in
  let is_excluded_penal_institution: ((bool *
                                        code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_excluded_penal_institution_in
    in
  let is_employment: ((bool * code_location)) Optional.t =
    employment_relationship_event_section3306_employment_in.EmploymentRelationshipEventSection3306Employment_in.is_employment_in
    in
  let is_excluded_penal_institution__1: bool =
    match
      (match is_excluded_penal_institution
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.PenalInstitution)) ||
                         (o_eq
                            ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.organization_type)
                            (OrganizationType.PenalInstitution))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6857; start_column=5;
                         end_line=6858; end_column=100;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2458; start_column=11;
                                       end_line=2458; end_column=40;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2458; start_column=11;
                  end_line=2458; end_column=40;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2458; start_column=11;
                           end_line=2458; end_column=40;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_international_organization__1: bool =
    match
      (match
         is_excluded_international_organization
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.InternationalOrganization)) ||
                         (o_eq
                            ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.organization_type)
                            (OrganizationType.InternationalOrganization))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6838; start_column=5;
                         end_line=6839; end_column=109;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2457; start_column=11;
                                       end_line=2457; end_column=49;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2457; start_column=11;
                  end_line=2457; end_column=49;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2457; start_column=11;
                           end_line=2457; end_column=49;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_foreign_government__1: bool =
    match
      (match is_excluded_foreign_government
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.ForeignGovernment)) ||
                         (o_eq
                            ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.organization_type)
                            (OrganizationType.ForeignGovernment))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6794; start_column=5;
                         end_line=6795; end_column=101;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2455; start_column=11;
                                       end_line=2455; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2455; start_column=11;
                  end_line=2455; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2455; start_column=11;
                           end_line=2455; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_state_government__1: bool =
    match
      (match is_excluded_state_government
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.StateGovernment)) ||
                         (o_eq
                            ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.organization_type)
                            (OrganizationType.GovernmentState))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6718; start_column=5;
                         end_line=6719; end_column=99;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2452; start_column=11;
                                       end_line=2452; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2452; start_column=11;
                  end_line=2452; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2452; start_column=11;
                           end_line=2452; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_federal_government__1: bool =
    match
      (match is_excluded_federal_government
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.FederalGovernment)) ||
                         (o_eq
                            ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.organization_type)
                            (OrganizationType.GovernmentFederal))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6699; start_column=5;
                         end_line=6700; end_column=101;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2451; start_column=11;
                                       end_line=2451; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2451; start_column=11;
                  end_line=2451; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2451; start_column=11;
                           end_line=2451; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let employer_status__1: OrganizationSection3306EmployerStatusOutput.t =
    match
      (match employer_status
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((let result :
                          OrganizationSection3306EmployerStatus.t
                          =
                          (organization_section3306_employer_status
                             ({OrganizationSection3306EmployerStatus_in.organization_in =
                                 (employment_relationship_event.EmploymentRelationshipEvent.employer);
                                 OrganizationSection3306EmployerStatus_in.calendar_year_in =
                                   calendar_year;
                                 OrganizationSection3306EmployerStatus_in.wage_payment_events_in =
                                   wage_payment_events;
                                 OrganizationSection3306EmployerStatus_in.employment_relationship_events_in =
                                   employment_relationship_events;
                                 OrganizationSection3306EmployerStatus_in.is_general_employer_in =
                                   (Optional.Absent);
                                 OrganizationSection3306EmployerStatus_in.is_agricultural_employer_in =
                                   (Optional.Absent);
                                 OrganizationSection3306EmployerStatus_in.is_domestic_service_employer_in =
                                   (Optional.Absent);
                                 OrganizationSection3306EmployerStatus_in.is_employer_in =
                                   (Optional.Absent)}))
                       in
                       (let result__1 :
                          OrganizationSection3306EmployerStatus.t
                          =
                          ({OrganizationSection3306EmployerStatus.main_output =
                              (result.OrganizationSection3306EmployerStatus.main_output)})
                       in
                       ( if true then result__1
                          else result__1))).OrganizationSection3306EmployerStatus.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2531; start_column=5;
                         end_line=2536; end_column=19;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2447; start_column=11;
                                       end_line=2447; end_column=26;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2447; start_column=11;
                  end_line=2447; end_column=26;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2447; start_column=11;
                           end_line=2447; end_column=26;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_student_nurse__1: bool =
    match
      (match is_excluded_student_nurse
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((((o_eq
                           (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                           (EmploymentCategory.Hospital)) ||
                          (o_eq
                             (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                             (EmploymentCategory.SchoolCollegeUniversity))) &&
                         (o_fold
                            (fun (acc: bool)
                               (se:
                                 StudentEnrollmentEvent.t) ->
                               acc ||
                                 ((o_eq_int_int
                                     ((se.StudentEnrollmentEvent.student).Individual.id)
                                     ((employment_relationship_event.EmploymentRelationshipEvent.employee).Individual.id)) &&
                                    ((se.StudentEnrollmentEvent.is_regularly_attending) &&
                                       ((o_lte_dat_dat
                                           (se.StudentEnrollmentEvent.start_date)
                                           ((Date_en.of_year_month_day)
                                              ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                start_line=6819; start_column=28;
                                                end_line=6819; end_column=50;
                                                law_headings=["============================= SECTION 3306 ============================="]})
                                              calendar_year
                                              (integer_of_string
                                              "12")
                                              (integer_of_string
                                              "31"))) &&
                                          (o_gte_dat_dat
                                             (se.StudentEnrollmentEvent.end_date)
                                             ((Date_en.of_year_month_day)
                                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                  start_line=6820; start_column=26;
                                                  end_line=6820; end_column=48;
                                                  law_headings=["============================= SECTION 3306 ============================="]})
                                                calendar_year
                                                (integer_of_string
                                                "1")
                                                (integer_of_string
                                                "1")))))))
                            false
                            student_enrollment_events)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6814; start_column=5;
                         end_line=6820; end_column=71;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2456; start_column=11;
                                       end_line=2456; end_column=36;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2456; start_column=11;
                  end_line=2456; end_column=36;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2456; start_column=11;
                           end_line=2456; end_column=36;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_hospital_patient_service__1: bool =
    match
      (match is_excluded_hospital_patient_service
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.Hospital)) &&
                         (o_fold
                            (fun (acc: bool)
                               (hpe:
                                 HospitalPatientEvent.t) ->
                               acc ||
                                 ((o_eq_int_int
                                     ((hpe.HospitalPatientEvent.patient).Individual.id)
                                     ((employment_relationship_event.EmploymentRelationshipEvent.employee).Individual.id)) &&
                                    ((o_eq_int_int
                                        ((hpe.HospitalPatientEvent.hospital).Organization.id)
                                        ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.id)) &&
                                       ((o_lte_dat_dat
                                           (hpe.HospitalPatientEvent.start_date)
                                           ((Date_en.of_year_month_day)
                                              ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                start_line=6774; start_column=29;
                                                end_line=6774; end_column=51;
                                                law_headings=["============================= SECTION 3306 ============================="]})
                                              calendar_year
                                              (integer_of_string
                                              "12")
                                              (integer_of_string
                                              "31"))) &&
                                          (o_gte_dat_dat
                                             (hpe.HospitalPatientEvent.end_date)
                                             ((Date_en.of_year_month_day)
                                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                  start_line=6775; start_column=27;
                                                  end_line=6775; end_column=49;
                                                  law_headings=["============================= SECTION 3306 ============================="]})
                                                calendar_year
                                                (integer_of_string
                                                "1")
                                                (integer_of_string
                                                "1")))))))
                            false
                            hospital_patient_events)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6770; start_column=5;
                         end_line=6775; end_column=72;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2454; start_column=11;
                                       end_line=2454; end_column=47;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2454; start_column=11;
                  end_line=2454; end_column=47;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2454; start_column=11;
                           end_line=2454; end_column=47;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_student_service__1: bool =
    match
      (match is_excluded_student_service
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((o_eq
                          (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                          (EmploymentCategory.SchoolCollegeUniversity)) &&
                         ((o_fold
                             (fun (acc: bool)
                                (se:
                                  StudentEnrollmentEvent.t) ->
                                acc ||
                                  ((o_eq_int_int
                                      ((se.StudentEnrollmentEvent.student).Individual.id)
                                      ((employment_relationship_event.EmploymentRelationshipEvent.employee).Individual.id)) &&
                                     ((o_eq_int_int
                                         ((se.StudentEnrollmentEvent.institution).Organization.id)
                                         ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.id)) &&
                                        ((se.StudentEnrollmentEvent.is_regularly_attending) &&
                                           ((o_lte_dat_dat
                                               (se.StudentEnrollmentEvent.start_date)
                                               ((Date_en.of_year_month_day)
                                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                    start_line=6755; start_column=30;
                                                    end_line=6755; end_column=52;
                                                    law_headings=["============================= SECTION 3306 ============================="]})
                                                  calendar_year
                                                  (integer_of_string
                                                  "12")
                                                  (integer_of_string
                                                  "31"))) &&
                                              (o_gte_dat_dat
                                                 (se.StudentEnrollmentEvent.end_date)
                                                 ((Date_en.of_year_month_day)
                                                    ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                      start_line=6756; start_column=28;
                                                      end_line=6756; end_column=50;
                                                      law_headings=["============================= SECTION 3306 ============================="]})
                                                    calendar_year
                                                    (integer_of_string
                                                    "1")
                                                    (integer_of_string
                                                    "1"))))))))
                             false
                             student_enrollment_events) ||
                            (o_fold
                               (fun (acc: bool)
                                  (se:
                                    StudentEnrollmentEvent.t) ->
                                  acc ||
                                    ((o_eq_int_int
                                        ((se.StudentEnrollmentEvent.institution).Organization.id)
                                        ((employment_relationship_event.EmploymentRelationshipEvent.employer).Organization.id)) &&
                                       ((se.StudentEnrollmentEvent.is_regularly_attending) &&
                                          ((o_lte_dat_dat
                                              (se.StudentEnrollmentEvent.start_date)
                                              ((Date_en.of_year_month_day)
                                                 ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                   start_line=6761; start_column=30;
                                                   end_line=6761; end_column=52;
                                                   law_headings=["============================= SECTION 3306 ============================="]})
                                                 calendar_year
                                                 (integer_of_string
                                                 "12")
                                                 (integer_of_string
                                                 "31"))) &&
                                             ((o_gte_dat_dat
                                                 (se.StudentEnrollmentEvent.end_date)
                                                 ((Date_en.of_year_month_day)
                                                    ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                      start_line=6762; start_column=28;
                                                      end_line=6762; end_column=50;
                                                      law_headings=["============================= SECTION 3306 ============================="]})
                                                    calendar_year
                                                    (integer_of_string
                                                    "1")
                                                    (integer_of_string
                                                    "1"))) &&
                                                (o_fold
                                                   (fun
                                                      (acc__1:
                                                        bool)
                                                      (me:
                                                        MarriageEvent.t) ->
                                                      acc__1 ||
                                                        ((((o_eq_int_int
                                                              ((me.MarriageEvent.spouse1).Individual.id)
                                                              ((se.StudentEnrollmentEvent.student).Individual.id)) &&
                                                             (o_eq_int_int
                                                                ((me.MarriageEvent.spouse2).Individual.id)
                                                                ((employment_relationship_event.EmploymentRelationshipEvent.employee).Individual.id))) ||
                                                            ((o_eq_int_int
                                                                ((me.MarriageEvent.spouse2).Individual.id)
                                                                ((se.StudentEnrollmentEvent.student).Individual.id)) &&
                                                               (o_eq_int_int
                                                                  ((me.MarriageEvent.spouse1).Individual.id)
                                                                  ((employment_relationship_event.EmploymentRelationshipEvent.employee).Individual.id)))) &&
                                                           (o_lte_dat_dat
                                                              (me.MarriageEvent.marriage_date)
                                                              (employment_relationship_event.EmploymentRelationshipEvent.end_date))))
                                                   false
                                                   marriage_events))))))
                               false
                               student_enrollment_events))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6748; start_column=5;
                         end_line=6767; end_column=6;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2453; start_column=11;
                                       end_line=2453; end_column=38;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2453; start_column=11;
                  end_line=2453; end_column=38;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2453; start_column=11;
                           end_line=2453; end_column=38;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_family_employment__1: bool =
    match
      (match is_excluded_family_employment
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let employee_local :
                         Individual.t =
                         (employment_relationship_event.EmploymentRelationshipEvent.employee)
                       in
                       (let employer_local :
                          Organization.t =
                          (employment_relationship_event.EmploymentRelationshipEvent.employer)
                       in
                       (let
                          employee_is_parent_of_employer
                          : bool =
                          (o_fold
                             (fun (acc: bool)
                                (pe:
                                  ParenthoodEvent.t) ->
                                acc ||
                                  ((o_eq_int_int
                                      ((pe.ParenthoodEvent.parent).Individual.id)
                                      (employee_local.Individual.id)) &&
                                     ((o_eq_int_int
                                         ((pe.ParenthoodEvent.child).Individual.id)
                                         (employer_local.Organization.id)) &&
                                        ((o_eq
                                            (pe.ParenthoodEvent.parent_type)
                                            (ParentType.Biological)) ||
                                           (o_eq
                                              (pe.ParenthoodEvent.parent_type)
                                              (ParentType.Adoptive))))))
                             false
                             parenthood_events)
                       in
                       (let
                          employee_is_spouse_of_employer
                          : bool =
                          (o_fold
                             (fun (acc: bool)
                                (me:
                                  MarriageEvent.t) ->
                                acc ||
                                  ((((o_eq_int_int
                                        ((me.MarriageEvent.spouse1).Individual.id)
                                        (employee_local.Individual.id)) &&
                                       (o_eq_int_int
                                          ((me.MarriageEvent.spouse2).Individual.id)
                                          (employer_local.Organization.id))) ||
                                      ((o_eq_int_int
                                          ((me.MarriageEvent.spouse2).Individual.id)
                                          (employee_local.Individual.id)) &&
                                         (o_eq_int_int
                                            ((me.MarriageEvent.spouse1).Individual.id)
                                            (employer_local.Organization.id)))) &&
                                     (o_lte_dat_dat
                                        (me.MarriageEvent.marriage_date)
                                        (employment_relationship_event.EmploymentRelationshipEvent.end_date))))
                             false
                             marriage_events) in
                       (let
                          is_son_daughter_or_spouse
                          : bool =
                          (employee_is_parent_of_employer ||
                             employee_is_spouse_of_employer)
                       in
                       (let is_child_under_21 :
                          bool =
                          (o_fold
                             (fun (acc: bool)
                                (pe:
                                  ParenthoodEvent.t) ->
                                acc ||
                                  ((o_eq_int_int
                                      ((pe.ParenthoodEvent.parent).Individual.id)
                                      (employer_local.Organization.id)) &&
                                     ((o_eq_int_int
                                         ((pe.ParenthoodEvent.child).Individual.id)
                                         (employee_local.Individual.id)) &&
                                        (((o_eq
                                             (pe.ParenthoodEvent.parent_type)
                                             (ParentType.Biological)) ||
                                            (o_eq
                                               (pe.ParenthoodEvent.parent_type)
                                               (ParentType.Adoptive))) &&
                                           (o_fold
                                              (fun
                                                 (acc__1:
                                                   bool)
                                                 (be:
                                                   BirthEvent.t) ->
                                                 acc__1 ||
                                                   ((o_eq_int_int
                                                       ((be.BirthEvent.individual).Individual.id)
                                                       (employee_local.Individual.id)) &&
                                                      ((Date_en.is_young_enough_rounding_down)
                                                         (be.BirthEvent.birth_date)
                                                         (duration_of_numbers (21) (0) (0))
                                                         ((Date_en.of_year_month_day)
                                                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                              start_line=6679; start_column=78;
                                                              end_line=6679; end_column=100;
                                                              law_headings=
                                                              ["============================= SECTION 3306 ============================="]})
                                                            calendar_year
                                                            (integer_of_string
                                                            "12")
                                                            (integer_of_string
                                                            "31")))))
                                              false
                                              birth_events)))))
                             false
                             parenthood_events)
                       in
                       (is_son_daughter_or_spouse ||
                          is_child_under_21))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6648; start_column=5;
                         end_line=6681; end_column=51;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2450; start_column=11;
                                       end_line=2450; end_column=40;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2450; start_column=11;
                  end_line=2450; end_column=40;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2450; start_column=11;
                           end_line=2450; end_column=40;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_domestic_service__1: bool =
    match
      (match is_excluded_domestic_service
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_eq
                            (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                            (EmploymentCategory.DomesticService))
                         then
                         (let _ : Organization.t
                            =
                            (employment_relationship_event.EmploymentRelationshipEvent.employer)
                           in
                           (let
                              employer_is_domestic_service_employer
                              : bool =
                              (employer_status__1.OrganizationSection3306EmployerStatusOutput.is_domestic_service_employer)
                           in
                           (o_not
                              employer_is_domestic_service_employer)))
                         else false),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6614; start_column=5;
                         end_line=6625; end_column=12;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2449; start_column=11;
                                       end_line=2449; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2449; start_column=11;
                  end_line=2449; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2449; start_column=11;
                           end_line=2449; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_excluded_agricultural_labor__1: bool =
    match
      (match is_excluded_agricultural_labor
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_eq
                            (employment_relationship_event.EmploymentRelationshipEvent.employment_category)
                            (EmploymentCategory.AgriculturalLabor))
                         then
                         (let _ : Organization.t
                            =
                            (employment_relationship_event.EmploymentRelationshipEvent.employer)
                           in
                           (let
                              employer_is_agricultural_employer
                              : bool =
                              (employer_status__1.OrganizationSection3306EmployerStatusOutput.is_agricultural_employer)
                           in
                           (let is_h2a_alien :
                              bool =
                              (o_fold
                                 (fun (acc: bool)
                                    (iae:
                                      ImmigrationAdmissionEvent.t) ->
                                    acc ||
                                      ((o_eq_int_int
                                          ((iae.ImmigrationAdmissionEvent.individual).Individual.id)
                                          ((employment_relationship_event.EmploymentRelationshipEvent.employee).Individual.id)) &&
                                         (o_eq
                                            (iae.ImmigrationAdmissionEvent.visa_category)
                                            (VisaCategory.H2A))))
                                 false
                                 immigration_admission_events)
                           in
                           ((o_not
                               employer_is_agricultural_employer) ||
                              is_h2a_alien))))
                         else false),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6566; start_column=5;
                         end_line=6594; end_column=12;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2448; start_column=11;
                                       end_line=2448; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2448; start_column=11;
                  end_line=2448; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2448; start_column=11;
                           end_line=2448; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_employment__1: bool =
    match
      (match is_employment
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let is_within_us : bool =
                         (o_eq
                            (employment_relationship_event.EmploymentRelationshipEvent.service_location)
                            (ServiceLocation.WithinUnitedStates))
                       in
                       (let
                          is_outside_us_by_us_citizen
                          : bool =
                          ((o_eq
                              (employment_relationship_event.EmploymentRelationshipEvent.service_location)
                              (ServiceLocation.OutsideUnitedStates)) &&
                             ((employment_relationship_event.EmploymentRelationshipEvent.employee_is_us_citizen) &&
                                (employment_relationship_event.EmploymentRelationshipEvent.is_american_employer)))
                       in
                       ((is_within_us ||
                           is_outside_us_by_us_citizen) &&
                          ((o_not
                              is_excluded_agricultural_labor__1) &&
                             ((o_not
                                 is_excluded_domestic_service__1) &&
                                ((o_not
                                    is_excluded_family_employment__1) &&
                                   ((o_not
                                       is_excluded_federal_government__1) &&
                                      ((o_not
                                          is_excluded_state_government__1) &&
                                         ((o_not
                                             is_excluded_student_service__1) &&
                                            ((o_not
                                                is_excluded_hospital_patient_service__1) &&
                                               ((o_not
                                                   is_excluded_foreign_government__1) &&
                                                  ((o_not
                                                      is_excluded_student_nurse__1) &&
                                                     ((o_not
                                                         is_excluded_international_organization__1) &&
                                                        (o_not
                                                           is_excluded_penal_institution__1)))))))))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6880; start_column=5;
                         end_line=6901; end_column=42;
                         law_headings=["============================= SECTION 3306 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2459; start_column=11;
                                       end_line=2459; end_column=24;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2459; start_column=11;
                  end_line=2459; end_column=24;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2459; start_column=11;
                           end_line=2459; end_column=24;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: EmploymentRelationshipEventSection3306EmploymentOutput.t =
    match
      (Optional.Present
         (({EmploymentRelationshipEventSection3306EmploymentOutput.employment_relationship_event =
              employment_relationship_event;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_employment =
                is_employment__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_agricultural_labor =
                is_excluded_agricultural_labor__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_domestic_service =
                is_excluded_domestic_service__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_family_employment =
                is_excluded_family_employment__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_federal_government =
                is_excluded_federal_government__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_state_government =
                is_excluded_state_government__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_student_service =
                is_excluded_student_service__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_hospital_patient_service =
                is_excluded_hospital_patient_service__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_foreign_government =
                is_excluded_foreign_government__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_student_nurse =
                is_excluded_student_nurse__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_international_organization =
                is_excluded_international_organization__1;
              EmploymentRelationshipEventSection3306EmploymentOutput.is_excluded_penal_institution =
                is_excluded_penal_institution__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2539; start_column=5;
             end_line=2553; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2461; start_column=10;
                           end_line=2461; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {EmploymentRelationshipEventSection3306Employment.main_output =
     main_output}

(* Scope EmployerUnemploymentExciseTaxFilerSection3301Tax *)
let employer_unemployment_excise_tax_filer_section3301_tax :
  EmployerUnemploymentExciseTaxFilerSection3301Tax_in.t -> EmployerUnemploymentExciseTaxFilerSection3301Tax.t =
  fun employer_unemployment_excise_tax_filer_section3301_tax_in ->
  let employer_unemployment_excise_tax_return: EmployerUnemploymentExciseTaxReturn.t =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.employer_unemployment_excise_tax_return_in
    in
  let wage_payment_wages_results: WagePaymentEventSection3306WagesOutput.t
                                  array =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.wage_payment_wages_results_in
    in
  let organization_employer_statuses: OrganizationSection3306EmployerStatusOutput.t
                                      array =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.organization_employer_statuses_in
    in
  let employment_relationship_employment_results: EmploymentRelationshipEventSection3306EmploymentOutput.t
                                                  array =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.employment_relationship_employment_results_in
    in
  let total_taxable_wages: ((money *
                              code_location)) Optional.t =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.total_taxable_wages_in
    in
  let excise_tax: ((money * code_location)) Optional.t =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.excise_tax_in
    in
  let tax_rate: ((decimal * code_location)) Optional.t =
    employer_unemployment_excise_tax_filer_section3301_tax_in.EmployerUnemploymentExciseTaxFilerSection3301Tax_in.tax_rate_in
    in
  let tax_rate__1: decimal =
    match
      (match tax_rate
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((decimal_of_string "3/50"),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6925; start_column=30;
                         end_line=6925; end_column=34;
                         law_headings=["============================= SECTION 3301 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2766; start_column=18;
                                       end_line=2766; end_column=26;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2766; start_column=18;
                  end_line=2766; end_column=26;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2766; start_column=18;
                           end_line=2766; end_column=26;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let total_taxable_wages__1: money =
    match
      (match total_taxable_wages
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let employer_local :
                           Organization.t =
                           (match
                              (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.details)
                            with
                            | EmployerVariant.GeneralEmployer variant ->
                                (variant.EmployerGeneralVariant.employer)
                            | EmployerVariant.AgriculturalEmployer variant ->
                                (variant.EmployerAgriculturalLaborVariant.employer)
                            | EmployerVariant.DomesticServiceEmployer variant ->
                                (variant.EmployerDomesticServiceVariant.employer))
                          in
                          (o_not
                             (o_fold
                                (fun (acc: bool)
                                   (org_status:
                                     OrganizationSection3306EmployerStatusOutput.t) ->
                                   acc ||
                                     ((o_eq_int_int
                                         ((org_status.OrganizationSection3306EmployerStatusOutput.organization).Organization.id)
                                         (employer_local.Organization.id)) &&
                                        (org_status.OrganizationSection3306EmployerStatusOutput.is_employer)))
                                false
                                organization_employer_statuses)))
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "0"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=7002; start_column=22;
                               end_line=7002; end_column=24;
                               law_headings=["============================= SECTION 3301 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((let employer_local :
                              Organization.t =
                              (match
                                 (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.details)
                               with
                               | EmployerVariant.GeneralEmployer variant ->
                                   (variant.EmployerGeneralVariant.employer)
                               | EmployerVariant.AgriculturalEmployer variant ->
                                   (variant.EmployerAgriculturalLaborVariant.employer)
                               | EmployerVariant.DomesticServiceEmployer variant ->
                                   (variant.EmployerDomesticServiceVariant.employer))
                            in
                            (let
                               wages_for_employer
                               :
                               WagePaymentEventSection3306WagesOutput.t
                               array =
                               (o_filter
                                  (fun
                                     (wage_result:
                                       WagePaymentEventSection3306WagesOutput.t) ->
                                     (o_eq_int_int
                                        (((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employer).Organization.id)
                                        (employer_local.Organization.id)) &&
                                       (o_eq_int_int
                                          ((Date_en.get_year)
                                             ((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.payment_date))
                                          (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.tax_year)))
                                  wage_payment_wages_results)
                            in
                            (let
                               wages_for_employment
                               :
                               WagePaymentEventSection3306WagesOutput.t
                               array =
                               (o_filter
                                  (fun
                                     (wage_result:
                                       WagePaymentEventSection3306WagesOutput.t) ->
                                     o_fold
                                       (fun
                                          (acc:
                                            bool)
                                          (emp_result:
                                            EmploymentRelationshipEventSection3306EmploymentOutput.t) ->
                                          acc ||
                                            ((o_eq_int_int
                                                (((emp_result.EmploymentRelationshipEventSection3306EmploymentOutput.employment_relationship_event).EmploymentRelationshipEvent.employer).Organization.id)
                                                (((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employer).Organization.id)) &&
                                               ((o_eq_int_int
                                                   (((emp_result.EmploymentRelationshipEventSection3306EmploymentOutput.employment_relationship_event).EmploymentRelationshipEvent.employee).Individual.id)
                                                   (((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employee).Individual.id)) &&
                                                  ((o_lte_dat_dat
                                                      ((emp_result.EmploymentRelationshipEventSection3306EmploymentOutput.employment_relationship_event).EmploymentRelationshipEvent.start_date)
                                                      ((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.payment_date)) &&
                                                     (((o_eq_int_int
                                                          ((Date_en.get_year)
                                                             ((emp_result.EmploymentRelationshipEventSection3306EmploymentOutput.employment_relationship_event).EmploymentRelationshipEvent.start_date))
                                                          (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.tax_year)) ||
                                                         (o_eq_int_int
                                                            ((Date_en.get_year)
                                                               ((emp_result.EmploymentRelationshipEventSection3306EmploymentOutput.employment_relationship_event).EmploymentRelationshipEvent.end_date))
                                                            (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.tax_year))) &&
                                                        (emp_result.EmploymentRelationshipEventSection3306EmploymentOutput.is_employment))))))
                                       false
                                       employment_relationship_employment_results)
                                  wages_for_employer)
                            in
                            (let
                               unique_employee_wage_results
                               :
                               WagePaymentEventSection3306WagesOutput.t
                               array =
                               (o_filter
                                  (fun
                                     (wage_result:
                                       WagePaymentEventSection3306WagesOutput.t) ->
                                     o_not
                                       (o_fold
                                          (fun
                                             (acc:
                                               bool)
                                             (prev_wage_result:
                                               WagePaymentEventSection3306WagesOutput.t) ->
                                             acc ||
                                               ((o_eq_int_int
                                                   (((prev_wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employee).Individual.id)
                                                   (((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employee).Individual.id)) &&
                                                  (o_lt_int_int
                                                     ((prev_wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.id)
                                                     ((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.id))))
                                          false
                                          wages_for_employment))
                                  wages_for_employment)
                            in
                            (let
                               unique_employee_ids
                               : integer array =
                               (o_map
                                  (fun
                                     (wage_result:
                                       WagePaymentEventSection3306WagesOutput.t) ->
                                     ((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employee).Individual.id)
                                  unique_employee_wage_results)
                            in
                            (o_reduce
                               (fun (sum1: money)
                                  (sum2: money) ->
                                  o_add_mon_mon
                                    sum1 sum2)
                               (fun (_: unit) ->
                                  money_of_cents_string
                                  "0")
                               (o_map
                                  (fun
                                     (emp_id_local:
                                       integer) ->
                                     (let
                                        employee_wages
                                        :
                                        WagePaymentEventSection3306WagesOutput.t
                                        array =
                                        (o_filter
                                           (fun
                                              (wage_result:
                                                WagePaymentEventSection3306WagesOutput.t) ->
                                              o_eq_int_int
                                                (((wage_result.WagePaymentEventSection3306WagesOutput.wage_payment_event).WagePaymentEvent.employee).Individual.id)
                                                emp_id_local)
                                           wages_for_employment)
                                     in
                                     (((let
                                          result
                                          :
                                          TotalWages3306Calculation.t
                                          =
                                          (total_wages3306_calculation
                                             ({TotalWages3306Calculation_in.wage_results_in =
                                                 employee_wages;
                                                 TotalWages3306Calculation_in.total_taxable_wages_in =
                                                   (Optional.Absent)}))
                                     in
                                     (let
                                        result__1
                                        :
                                        TotalWages3306Calculation.t
                                        =
                                        ({TotalWages3306Calculation.main_output =
                                            (result.TotalWages3306Calculation.main_output)})
                                     in
                                     ( if true
                                        then
                                        result__1
                                        else
                                        result__1))).TotalWages3306Calculation.main_output).TotalWages3306CalculationOutput.total_taxable_wages)))
                                  unique_employee_ids))))))),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=6930; start_column=5;
                              end_line=6987; end_column=6;
                              law_headings=["============================= SECTION 3301 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2764; start_column=18;
                                       end_line=2764; end_column=37;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2764; start_column=18;
                  end_line=2764; end_column=37;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2764; start_column=18;
                           end_line=2764; end_column=37;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let excise_tax__1: money =
    match
      (match excise_tax
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_mult_mon_rat
                         total_taxable_wages__1
                         tax_rate__1),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=7006; start_column=5;
                         end_line=7006; end_column=35;
                         law_headings=["============================= SECTION 3301 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2765; start_column=18;
                                       end_line=2765; end_column=28;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2765; start_column=18;
                  end_line=2765; end_column=28;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2765; start_column=18;
                           end_line=2765; end_column=28;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.t =
    match
      (Optional.Present
         (({EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.employer_unemployment_excise_tax_return =
              employer_unemployment_excise_tax_return;
              EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.total_taxable_wages =
                total_taxable_wages__1;
              EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.excise_tax =
                excise_tax__1;
              EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.tax_rate =
                tax_rate__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2781; start_column=5;
             end_line=2786; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2768; start_column=10;
                           end_line=2768; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {EmployerUnemploymentExciseTaxFilerSection3301Tax.total_taxable_wages =
     total_taxable_wages__1;
     EmployerUnemploymentExciseTaxFilerSection3301Tax.excise_tax =
       excise_tax__1;
     EmployerUnemploymentExciseTaxFilerSection3301Tax.tax_rate =
       tax_rate__1;
     EmployerUnemploymentExciseTaxFilerSection3301Tax.main_output =
       main_output}

(* Scope TaxpayerExemptionsList151 *)
let taxpayer_exemptions_list151 :
  TaxpayerExemptionsList151_in.t -> TaxpayerExemptionsList151.t =
  fun taxpayer_exemptions_list151_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.individual_tax_return_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.tax_return_events_in
    in
  let income_events: IncomeEvent.t array =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.income_events_in
    in
  let dependents: Individual.t array =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.dependents_in in
  let spouse_result: (((IndividualSection151ExemptionsListOutput.t) Optional.t
                        * code_location)) Optional.t =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.spouse_result_in
    in
  let individuals_entitled_to_exemptions_under_151: (((Individual.t
                                                       array)
                                                       *
                                                       code_location)) Optional.t =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.individuals_entitled_to_exemptions_under_151_in
    in
  let spouse_personal_exemption_allowed: ((bool *
                                            code_location)) Optional.t =
    taxpayer_exemptions_list151_in.TaxpayerExemptionsList151_in.spouse_personal_exemption_allowed_in
    in
  let spouse_result__1: (IndividualSection151ExemptionsListOutput.t) Optional.t =
    match
      (match spouse_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((match
                         (individual_tax_return.IndividualTaxReturn.details)
                       with
                       | FilingStatusVariant.JointReturn _ ->
                           (let spouse_local :
                              (Individual.t) Optional.t
                              =
                              (get_spouse
                                 individual_tax_return)
                           in
                           (let
                              spouse_result_inner
                              :
                              (IndividualSection151ExemptionsListOutput.t) Optional.t
                              =
                              (match spouse_local
                               with
                               | Optional.Absent ->
                                   (Optional.Absent)
                               | Optional.Present s ->
                                   (let
                                      taxpayer_local
                                      :
                                      Individual.t
                                      =
                                      (get_taxpayer
                                         individual_tax_return)
                                   in
                                   (let
                                      spouse_result_scope
                                      :
                                      IndividualSection151ExemptionsList.t
                                      =
                                      (let result
                                         :
                                         IndividualSection151ExemptionsList.t
                                         =
                                         (individual_section151_exemptions_list
                                            ({IndividualSection151ExemptionsList_in.individual_in =
                                                s;
                                                IndividualSection151ExemptionsList_in.spouse_in =
                                                  (Optional.Present
                                                     taxpayer_local);
                                                IndividualSection151ExemptionsList_in.tax_year_in =
                                                  (individual_tax_return.IndividualTaxReturn.tax_year);
                                                IndividualSection151ExemptionsList_in.tax_return_events_in =
                                                  tax_return_events;
                                                IndividualSection151ExemptionsList_in.income_events_in =
                                                  income_events;
                                                IndividualSection151ExemptionsList_in.dependents_in =
                                                  dependents;
                                                IndividualSection151ExemptionsList_in.is_joint_or_surviving_spouse_in =
                                                  true;
                                                IndividualSection151ExemptionsList_in.spouse_personal_exemption_allowed_in =
                                                  (Optional.Absent);
                                                IndividualSection151ExemptionsList_in.individuals_entitled_to_exemptions_under_151_in =
                                                  (Optional.Absent)}))
                                      in
                                      (let
                                         result__1
                                         :
                                         IndividualSection151ExemptionsList.t
                                         =
                                         ({IndividualSection151ExemptionsList.main_output =
                                             (result.IndividualSection151ExemptionsList.main_output)})
                                      in
                                      ( if true
                                         then
                                         result__1
                                         else
                                         result__1)))
                                   in
                                   (Optional.Present
                                      (spouse_result_scope.IndividualSection151ExemptionsList.main_output)))))
                           in
                           spouse_result_inner))
                       | FilingStatusVariant.SurvivingSpouse _ ->
                           (Optional.Absent)
                       | FilingStatusVariant.HeadOfHousehold _ ->
                           (Optional.Absent)
                       | FilingStatusVariant.Single _ ->
                           (Optional.Absent)
                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                           (Optional.Absent)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=1699; start_column=5;
                         end_line=1729; end_column=13;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1591; start_column=11;
                                       end_line=1591; end_column=24;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1591; start_column=11;
                  end_line=1591; end_column=24;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1591; start_column=11;
                           end_line=1591; end_column=24;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxpayer_exemptions: IndividualSection151ExemptionsList.t =
    (let result :
       IndividualSection151ExemptionsList.t =
       (individual_section151_exemptions_list
          ({IndividualSection151ExemptionsList_in.individual_in =
              (match
                 (Optional.Present
                    ((get_taxpayer
                        individual_tax_return),
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=1678; start_column=5;
                        end_line=1678; end_column=42;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=1677; start_column=14;
                                      end_line=1677; end_column=44;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualSection151ExemptionsList_in.spouse_in =
                (match
                   (Optional.Present
                      ((get_spouse
                          individual_tax_return),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=1680; start_column=5;
                          end_line=1680; end_column=40;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=1679; start_column=14;
                                        end_line=1679; end_column=40;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151ExemptionsList_in.tax_year_in =
                (match
                   (Optional.Present
                      ((individual_tax_return.IndividualTaxReturn.tax_year),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=1682; start_column=5;
                          end_line=1682; end_column=35;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=1681; start_column=14;
                                        end_line=1681; end_column=42;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151ExemptionsList_in.tax_return_events_in =
                (match
                   (Optional.Present
                      (tax_return_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=1684; start_column=5;
                          end_line=1684; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=1683; start_column=14;
                                        end_line=1683; end_column=51;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151ExemptionsList_in.income_events_in =
                (match
                   (Optional.Present
                      (income_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=1686; start_column=5;
                          end_line=1686; end_column=18;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=1685; start_column=14;
                                        end_line=1685; end_column=47;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151ExemptionsList_in.dependents_in =
                (match
                   (Optional.Present
                      (dependents,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=1688; start_column=5;
                          end_line=1688; end_column=15;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=1687; start_column=14;
                                        end_line=1687; end_column=44;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151ExemptionsList_in.is_joint_or_surviving_spouse_in =
                (match
                   (Optional.Present
                      ((match
                          (individual_tax_return.IndividualTaxReturn.details)
                        with
                        | FilingStatusVariant.JointReturn _ ->
                            true
                        | FilingStatusVariant.SurvivingSpouse _ ->
                            true
                        | FilingStatusVariant.HeadOfHousehold _ ->
                            false
                        | FilingStatusVariant.Single _ ->
                            false
                        | FilingStatusVariant.MarriedFilingSeparate _ ->
                            false),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=1690; start_column=5;
                          end_line=1695; end_column=73;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=1689; start_column=14;
                                        end_line=1689; end_column=62;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151ExemptionsList_in.spouse_personal_exemption_allowed_in =
                (Optional.Absent);
              IndividualSection151ExemptionsList_in.individuals_entitled_to_exemptions_under_151_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualSection151ExemptionsList.t =
       ({IndividualSection151ExemptionsList.main_output =
           (result.IndividualSection151ExemptionsList.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let spouse_personal_exemption_allowed__1: bool =
    match
      (match spouse_personal_exemption_allowed
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (((taxpayer_exemptions.IndividualSection151ExemptionsList.main_output).IndividualSection151ExemptionsListOutput.spouse_exemption_allowed_151_b),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=1750; start_column=5;
                         end_line=1750; end_column=67;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1593; start_column=11;
                                       end_line=1593; end_column=44;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1593; start_column=11;
                  end_line=1593; end_column=44;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1593; start_column=11;
                           end_line=1593; end_column=44;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let individuals_entitled_to_exemptions_under_151__1: Individual.t
                                                       array =
    match
      (match
         individuals_entitled_to_exemptions_under_151
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_list :
                         Individual.t array =
                         ((taxpayer_exemptions.IndividualSection151ExemptionsList.main_output).IndividualSection151ExemptionsListOutput.individuals_entitled_to_exemptions_under_151)
                       in
                       (let spouse_unique_list :
                          Individual.t array =
                          (match spouse_result__1
                           with
                           | Optional.Absent ->
                               ([||])
                           | Optional.Present s_result ->
                               (o_filter
                                  (fun
                                     (individual:
                                       Individual.t) ->
                                     o_not
                                       (o_fold
                                          (fun
                                             (acc:
                                               bool)
                                             (taxpayer_individual:
                                               Individual.t) ->
                                             acc ||
                                               ((o_eq_int_int
                                                   (taxpayer_individual.Individual.id)
                                                   (individual.Individual.id)) &&
                                                  (o_eq_boo_boo
                                                     (taxpayer_individual.Individual.is_counterfactual)
                                                     (individual.Individual.is_counterfactual))))
                                          false
                                          taxpayer_list))
                                  (s_result.IndividualSection151ExemptionsListOutput.individuals_entitled_to_exemptions_under_151)))
                       in
                       (o_concat taxpayer_list
                          spouse_unique_list))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=1735; start_column=5;
                         end_line=1746; end_column=40;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1592; start_column=11;
                                       end_line=1592; end_column=55;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1592; start_column=11;
                  end_line=1592; end_column=55;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1592; start_column=11;
                           end_line=1592; end_column=55;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: TaxpayerExemptionsList151Output.t =
    match
      (Optional.Present
         (({TaxpayerExemptionsList151Output.taxpayer_result =
              (taxpayer_exemptions.IndividualSection151ExemptionsList.main_output);
              TaxpayerExemptionsList151Output.spouse_result =
                spouse_result__1;
              TaxpayerExemptionsList151Output.individuals_entitled_to_exemptions_under_151 =
                individuals_entitled_to_exemptions_under_151__1;
              TaxpayerExemptionsList151Output.spouse_exemption_allowed_151_b =
                spouse_personal_exemption_allowed__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1659; start_column=5;
             end_line=1664; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1595; start_column=10;
                           end_line=1595; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {TaxpayerExemptionsList151.main_output =
     main_output}

(* Scope IndividualTaxReturnSection2aSurvivingSpouse *)
let individual_tax_return_section2a_surviving_spouse :
  IndividualTaxReturnSection2aSurvivingSpouse_in.t -> IndividualTaxReturnSection2aSurvivingSpouse.t =
  fun individual_tax_return_section2a_surviving_spouse_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.individual_tax_return_in
    in
  let death_events: DeathEvent.t array =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.death_events_in
    in
  let nonresident_alien_status_period_events: NonresidentAlienStatusPeriodEvent.t
                                              array =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.nonresident_alien_status_period_events_in
    in
  let parenthood_events: ParenthoodEvent.t array =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.parenthood_events_in
    in
  let household_maintenance_events: HouseholdMaintenanceEvent.t
                                    array =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.household_maintenance_events_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.residence_period_events_in
    in
  let marriage_events: MarriageEvent.t array =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.marriage_events_in
    in
  let taxpayer_exemptions_list_result: TaxpayerExemptionsList151Output.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.taxpayer_exemptions_list_result_in
    in
  let spouse_died_within_two_years_2_a_1_a: ((bool
                                               *
                                               code_location)) Optional.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.spouse_died_within_two_years_2_a_1_A_in
    in
  let maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_b: 
    ((bool * code_location)) Optional.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_B_in
    in
  let has_remarried_2_a_2_a: ((bool *
                                code_location)) Optional.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.has_remarried_2_a_2_A_in
    in
  let joint_return_could_have_been_made_2_a_2_b: ((bool
                                                    *
                                                    code_location)) Optional.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.joint_return_could_have_been_made_2_a_2_B_in
    in
  let is_surviving_spouse_2_a: ((bool *
                                  code_location)) Optional.t =
    individual_tax_return_section2a_surviving_spouse_in.IndividualTaxReturnSection2aSurvivingSpouse_in.is_surviving_spouse_2_a_in
    in
  let spouse_death_events_in_window: (Individual.t) Optional.t ->
                                       (DeathEvent.t
                                        array) ->
                                       integer ->
                                       (DeathEvent.t
                                        array) =
    fun (spouse_arg: (Individual.t) Optional.t)
      (death_events_arg: DeathEvent.t array)
      (tax_year_arg: integer) ->
      match
        (Optional.Present
           ((match spouse_arg
             with
             | Optional.Absent ->
                 (o_filter
                    (fun (_: DeathEvent.t) ->
                       false) death_events_arg)
             | Optional.Present s ->
                 (o_filter
                    (fun
                       (death_event:
                         DeathEvent.t) ->
                       ((o_eq_int_int
                           ((death_event.DeathEvent.decedent).Individual.id)
                           (s.Individual.id)) &&
                          (o_eq_boo_boo
                             ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                             (s.Individual.is_counterfactual))) &&
                         ((o_gte_int_int
                             ((Date_en.get_year)
                                (death_event.DeathEvent.death_date))
                             (o_sub_int_int
                                tax_year_arg
                                (integer_of_string
                                "2"))) &&
                            (o_lt_int_int
                               ((Date_en.get_year)
                                  (death_event.DeathEvent.death_date))
                               tax_year_arg)))
                    death_events_arg)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1181; start_column=5;
               end_line=1187; end_column=75;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1105; start_column=12;
                             end_line=1105; end_column=41;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let spouse_death_year: (DeathEvent.t array) ->
                           (integer) Optional.t =
    fun
      (spouse_death_events_in_window_arg:
        DeathEvent.t array) ->
      match
        (Optional.Present
           (( if
               (o_gt_int_int
                  (o_length
                     spouse_death_events_in_window_arg)
                  (integer_of_string "0")) then
               (Optional.Present
                  (o_reduce
                     (fun (max1: integer)
                        (max2: integer) ->
                         if
                          (o_gt_int_int max1 max2)
                          then max1 else max2)
                     (fun (_: unit) -> raise
                        (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                             start_line=1193; start_column=24;
                                             end_line=1193; end_column=31;
                                             law_headings=[]}])))
                     (o_map
                        (fun
                           (death_event:
                             DeathEvent.t) ->
                           (Date_en.get_year)
                             (death_event.DeathEvent.death_date))
                        spouse_death_events_in_window_arg)))
               else (Optional.Absent)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1192; start_column=5;
               end_line=1194; end_column=16;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1109; start_column=12;
                             end_line=1109; end_column=29;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let most_recent_spouse_death_date: (DeathEvent.t
                                      array) ->
                                       integer ->
                                       date =
    fun
      (spouse_death_events_in_window_arg:
        DeathEvent.t array)
      (tax_year_arg: integer) ->
      match
        (Optional.Present
           (( if
               (o_gt_int_int
                  (o_length
                     spouse_death_events_in_window_arg)
                  (integer_of_string "0")) then
               (o_reduce
                  (fun (max1: date)
                     (max2: date) ->
                      if (o_gt_dat_dat max1 max2)
                       then max1 else max2)
                  (fun (_: unit) -> raise
                     (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                          start_line=1200; start_column=7;
                                          end_line=1200; end_column=14;
                                          law_headings=[]}])))
                  (o_map
                     (fun
                        (death_event:
                          DeathEvent.t) ->
                        death_event.DeathEvent.death_date)
                     spouse_death_events_in_window_arg))
               else
               ((Date_en.of_year_month_day)
                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                    start_line=1201; start_column=10;
                    end_line=1201; end_column=32;
                    law_headings=[]})
                  tax_year_arg (integer_of_string
                  "1") (integer_of_string "1"))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1199; start_column=5;
               end_line=1201; end_column=54;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1111; start_column=12;
                             end_line=1111; end_column=41;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let spouse_died_within_two_years_2_a_1_a__1: bool =
    match
      (match spouse_died_within_two_years_2_a_1_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let spouse_local :
                         (Individual.t) Optional.t
                         =
                         (get_spouse
                            individual_tax_return)
                       in
                       (match spouse_local
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present s ->
                            (o_fold
                               (fun (acc: bool)
                                  (death_event:
                                    DeathEvent.t) ->
                                  acc ||
                                    (((o_eq_int_int
                                         ((death_event.DeathEvent.decedent).Individual.id)
                                         (s.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                                           (s.Individual.is_counterfactual))) &&
                                       ((o_gte_int_int
                                           ((Date_en.get_year)
                                              (death_event.DeathEvent.death_date))
                                           (o_sub_int_int
                                              (individual_tax_return.IndividualTaxReturn.tax_year)
                                              (integer_of_string
                                              "2"))) &&
                                          (o_lt_int_int
                                             ((Date_en.get_year)
                                                (death_event.DeathEvent.death_date))
                                             (individual_tax_return.IndividualTaxReturn.tax_year)))))
                               false death_events))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3944; start_column=5;
                         end_line=3951; end_column=22;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1115; start_column=11;
                                       end_line=1115; end_column=47;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1115; start_column=11;
                  end_line=1115; end_column=47;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1115; start_column=11;
                           end_line=1115; end_column=47;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_b__1: bool =
    match
      (match
         maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (match
                          (individual_tax_return.IndividualTaxReturn.details)
                        with
                        | FilingStatusVariant.JointReturn _ ->
                            false
                        | FilingStatusVariant.SurvivingSpouse variant ->
                            (let
                               dependent_is_son_stepson_daughter_stepdaughter_local
                               : bool =
                               (o_fold
                                  (fun
                                     (acc: bool)
                                     (parenthood_event:
                                       ParenthoodEvent.t) ->
                                     acc ||
                                       (((o_eq_int_int
                                            ((parenthood_event.ParenthoodEvent.parent).Individual.id)
                                            (taxpayer_local.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((parenthood_event.ParenthoodEvent.parent).Individual.is_counterfactual)
                                              (taxpayer_local.Individual.is_counterfactual))) &&
                                          (((o_eq_int_int
                                               ((parenthood_event.ParenthoodEvent.child).Individual.id)
                                               ((variant.SurvivingSpouseVariant.qualifying_dependent).Individual.id)) &&
                                              (o_eq_boo_boo
                                                 ((parenthood_event.ParenthoodEvent.child).Individual.is_counterfactual)
                                                 ((variant.SurvivingSpouseVariant.qualifying_dependent).Individual.is_counterfactual))) &&
                                             ((o_lte_dat_dat
                                                 (parenthood_event.ParenthoodEvent.start_date)
                                                 year_end_local) &&
                                                ((o_eq
                                                    (parenthood_event.ParenthoodEvent.parent_type)
                                                    (ParentType.Biological)) ||
                                                   (o_eq
                                                      (parenthood_event.ParenthoodEvent.parent_type)
                                                      (ParentType.Step)))))))
                                  false
                                  parenthood_events)
                            in
                            (let
                               dependent_has_principal_place_of_abode_in_taxpayer_household_local
                               : bool =
                               (o_fold
                                  (fun
                                     (acc: bool)
                                     (maintenance_event:
                                       HouseholdMaintenanceEvent.t) ->
                                     acc ||
                                       (((o_eq_int_int
                                            ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.id)
                                            (taxpayer_local.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.is_counterfactual)
                                              (taxpayer_local.Individual.is_counterfactual))) &&
                                          ((o_lte_dat_dat
                                              (maintenance_event.HouseholdMaintenanceEvent.start_date)
                                              year_end_local) &&
                                             ((o_gte_dat_dat
                                                 (maintenance_event.HouseholdMaintenanceEvent.end_date)
                                                 ((Date_en.of_year_month_day)
                                                    ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                      start_line=3994; start_column=43;
                                                      end_line=3994; end_column=65;
                                                      law_headings=["============================= SECTION 2 ============================="]})
                                                    (individual_tax_return.IndividualTaxReturn.tax_year)
                                                    (integer_of_string
                                                    "1")
                                                    (integer_of_string
                                                    "1"))) &&
                                                ((o_gt_rat_rat
                                                    (maintenance_event.HouseholdMaintenanceEvent.cost_furnished_percentage)
                                                    (decimal_of_string "1/2")) &&
                                                   (o_fold
                                                      (fun
                                                         (acc__1:
                                                           bool)
                                                         (residence_event:
                                                           ResidencePeriodEvent.t) ->
                                                         acc__1 ||
                                                           (((o_eq_int_int
                                                                ((residence_event.ResidencePeriodEvent.individual).Individual.id)
                                                                ((variant.SurvivingSpouseVariant.qualifying_dependent).Individual.id)) &&
                                                               (o_eq_boo_boo
                                                                  ((residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                                                  ((variant.SurvivingSpouseVariant.qualifying_dependent).Individual.is_counterfactual))) &&
                                                              (((o_eq_int_int
                                                                   ((residence_event.ResidencePeriodEvent.household).Household.id)
                                                                   ((maintenance_event.HouseholdMaintenanceEvent.household).Household.id)) &&
                                                                  (o_eq_boo_boo
                                                                    ((residence_event.ResidencePeriodEvent.household).Household.is_counterfactual)
                                                                    ((maintenance_event.HouseholdMaintenanceEvent.household).Household.is_counterfactual))) &&
                                                                 ((residence_event.ResidencePeriodEvent.is_member_of_household) &&
                                                                    (
                                                                    (residence_event.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                                                    ((o_lte_dat_dat
                                                                    (residence_event.ResidencePeriodEvent.start_date)
                                                                    year_end_local) &&
                                                                    (o_gte_dat_dat
                                                                    (residence_event.ResidencePeriodEvent.end_date)
                                                                    ((Date_en.of_year_month_day)
                                                                    ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                                    start_line=4002; start_column=43;
                                                                    end_line=4002; end_column=65;
                                                                    law_headings=
                                                                    ["============================= SECTION 2 ============================="]})
                                                                    (individual_tax_return.IndividualTaxReturn.tax_year)
                                                                    (integer_of_string
                                                                    "1")
                                                                    (integer_of_string
                                                                    "1")))))))))
                                                      false
                                                      residence_period_events))))))
                                  false
                                  household_maintenance_events)
                            in
                            (let
                               taxpayer_entitled_to_section151_deduction_for_dependent_local
                               : bool =
                               (o_fold
                                  (fun
                                     (acc: bool)
                                     (entitled_individual:
                                       Individual.t) ->
                                     acc ||
                                       ((o_eq_int_int
                                           (entitled_individual.Individual.id)
                                           ((variant.SurvivingSpouseVariant.qualifying_dependent).Individual.id)) &&
                                          (o_eq_boo_boo
                                             (entitled_individual.Individual.is_counterfactual)
                                             ((variant.SurvivingSpouseVariant.qualifying_dependent).Individual.is_counterfactual))))
                                  false
                                  (taxpayer_exemptions_list_result.TaxpayerExemptionsList151Output.individuals_entitled_to_exemptions_under_151))
                            in
                            (dependent_is_son_stepson_daughter_stepdaughter_local &&
                               (dependent_has_principal_place_of_abode_in_taxpayer_household_local &&
                                  taxpayer_entitled_to_section151_deduction_for_dependent_local)))))
                        | FilingStatusVariant.HeadOfHousehold _ ->
                            false
                        | FilingStatusVariant.Single _ ->
                            false
                        | FilingStatusVariant.MarriedFilingSeparate _ ->
                            false))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3976; start_column=5;
                         end_line=4014; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1116; start_column=11;
                                       end_line=1116; end_column=86;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1116; start_column=11;
                  end_line=1116; end_column=86;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1116; start_column=11;
                           end_line=1116; end_column=86;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let joint_return_could_have_been_made_2_a_2_b__1: bool =
    match
      (match
         joint_return_could_have_been_made_2_a_2_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let spouse_local :
                         (Individual.t) Optional.t
                         =
                         (get_spouse
                            individual_tax_return)
                       in
                       (let taxpayer_local :
                          Individual.t =
                          (get_taxpayer
                             individual_tax_return)
                       in
                       (let
                          spouse_death_events_in_window_local
                          : DeathEvent.t array =
                          (spouse_death_events_in_window
                             spouse_local
                             death_events
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (let
                          spouse_death_year_local
                          : (integer) Optional.t
                          =
                          (spouse_death_year
                             spouse_death_events_in_window_local)
                       in
                       (match
                          spouse_death_year_local
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present death_year ->
                            ((o_not
                                (o_fold
                                   (fun
                                      (acc: bool)
                                      (residency_event_taxpayer:
                                        NonresidentAlienStatusPeriodEvent.t) ->
                                      acc ||
                                        (((o_eq_int_int
                                             ((residency_event_taxpayer.NonresidentAlienStatusPeriodEvent.individual).Individual.id)
                                             (taxpayer_local.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((residency_event_taxpayer.NonresidentAlienStatusPeriodEvent.individual).Individual.is_counterfactual)
                                               (taxpayer_local.Individual.is_counterfactual))) &&
                                           ((o_eq
                                               (residency_event_taxpayer.NonresidentAlienStatusPeriodEvent.residency_status)
                                               (ResidencyStatus.NonresidentAlien)) &&
                                              ((o_lte_dat_dat
                                                  (residency_event_taxpayer.NonresidentAlienStatusPeriodEvent.start_date)
                                                  ((Date_en.of_year_month_day)
                                                     ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                       start_line=4111; start_column=54;
                                                       end_line=4111; end_column=76;
                                                       law_headings=["============================= SECTION 2 ============================="]})
                                                     death_year
                                                     (integer_of_string
                                                     "12")
                                                     (integer_of_string
                                                     "31"))) &&
                                                 (o_gte_dat_dat
                                                    (residency_event_taxpayer.NonresidentAlienStatusPeriodEvent.end_date)
                                                    ((Date_en.of_year_month_day)
                                                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                         start_line=4112; start_column=52;
                                                         end_line=4112; end_column=74;
                                                         law_headings=
                                                         ["============================= SECTION 2 ============================="]})
                                                       death_year
                                                       (integer_of_string
                                                       "1")
                                                       (integer_of_string
                                                       "1")))))))
                                   false
                                   nonresident_alien_status_period_events)) &&
                               (o_not
                                  (match
                                     spouse_local
                                   with
                                   | Optional.Absent ->
                                       false
                                   | Optional.Present s ->
                                       (o_fold
                                          (fun
                                             (acc:
                                               bool)
                                             (residency_event_spouse:
                                               NonresidentAlienStatusPeriodEvent.t) ->
                                             acc ||
                                               (((o_eq_int_int
                                                    ((residency_event_spouse.NonresidentAlienStatusPeriodEvent.individual).Individual.id)
                                                    (s.Individual.id)) &&
                                                   (o_eq_boo_boo
                                                      ((residency_event_spouse.NonresidentAlienStatusPeriodEvent.individual).Individual.is_counterfactual)
                                                      (s.Individual.is_counterfactual))) &&
                                                  ((o_eq
                                                      (residency_event_spouse.NonresidentAlienStatusPeriodEvent.residency_status)
                                                      (ResidencyStatus.NonresidentAlien)) &&
                                                     ((o_lte_dat_dat
                                                         (residency_event_spouse.NonresidentAlienStatusPeriodEvent.start_date)
                                                         ((Date_en.of_year_month_day)
                                                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                              start_line=4120; start_column=54;
                                                              end_line=4120; end_column=76;
                                                              law_headings=
                                                              ["============================= SECTION 2 ============================="]})
                                                            death_year
                                                            (integer_of_string
                                                            "12")
                                                            (integer_of_string
                                                            "31"))) &&
                                                        (o_gte_dat_dat
                                                           (residency_event_spouse.NonresidentAlienStatusPeriodEvent.end_date)
                                                           ((Date_en.of_year_month_day)
                                                              ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                                start_line=4121; start_column=52;
                                                                end_line=4121; end_column=74;
                                                                law_headings=
                                                                ["============================= SECTION 2 ============================="]})
                                                              death_year
                                                              (integer_of_string
                                                              "1")
                                                              (integer_of_string
                                                              "1")))))))
                                          false
                                          nonresident_alien_status_period_events))))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4096; start_column=5;
                         end_line=4124; end_column=22;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1118; start_column=11;
                                       end_line=1118; end_column=52;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1118; start_column=11;
                  end_line=1118; end_column=52;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1118; start_column=11;
                           end_line=1118; end_column=52;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let has_remarried_2_a_2_a__1: bool =
    match
      (match has_remarried_2_a_2_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let spouse_local :
                          (Individual.t) Optional.t
                          =
                          (get_spouse
                             individual_tax_return)
                       in
                       (let
                          spouse_death_events_in_window_local
                          : DeathEvent.t array =
                          (spouse_death_events_in_window
                             spouse_local
                             death_events
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (let
                          most_recent_spouse_death_date_local
                          : date =
                          (most_recent_spouse_death_date
                             spouse_death_events_in_window_local
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (o_fold
                          (fun (acc: bool)
                             (marriage_event:
                               MarriageEvent.t) ->
                             acc ||
                               ((((o_eq_int_int
                                     ((marriage_event.MarriageEvent.spouse1).Individual.id)
                                     (taxpayer_local.Individual.id)) &&
                                    (o_eq_boo_boo
                                       ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                                       (taxpayer_local.Individual.is_counterfactual))) ||
                                   ((o_eq_int_int
                                       ((marriage_event.MarriageEvent.spouse2).Individual.id)
                                       (taxpayer_local.Individual.id)) &&
                                      (o_eq_boo_boo
                                         ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                         (taxpayer_local.Individual.is_counterfactual)))) &&
                                  ((o_gt_dat_dat
                                      (marriage_event.MarriageEvent.marriage_date)
                                      most_recent_spouse_death_date_local) &&
                                     (o_lte_dat_dat
                                        (marriage_event.MarriageEvent.marriage_date)
                                        (get_year_end
                                           (individual_tax_return.IndividualTaxReturn.tax_year))))))
                          false marriage_events))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4059; start_column=5;
                         end_line=4072; end_column=8;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1117; start_column=11;
                                       end_line=1117; end_column=32;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1117; start_column=11;
                  end_line=1117; end_column=32;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1117; start_column=11;
                           end_line=1117; end_column=32;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_surviving_spouse_2_a__1: bool =
    match
      (match is_surviving_spouse_2_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (match
                        ( if
                           (o_not
                              joint_return_could_have_been_made_2_a_2_b__1)
                           then
                           (Optional.Present
                              (false,
                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                  start_line=4149; start_column=22;
                                  end_line=4149; end_column=27;
                                  law_headings=["============================= SECTION 2 ============================="]})))
                           else (Optional.Absent))
                      with
                      | Optional.Absent ->
                          ( if
                             has_remarried_2_a_2_a__1
                             then
                             (Optional.Present
                                (false,
                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                    start_line=4143; start_column=22;
                                    end_line=4143; end_column=27;
                                    law_headings=["============================= SECTION 2 ============================="]})))
                             else
                             (Optional.Absent))
                      | Optional.Present x ->
                          (Optional.Present x))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((spouse_died_within_two_years_2_a_1_a__1 &&
                              maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_b__1),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=4034; start_column=5;
                              end_line=4035; end_column=84;
                              law_headings=["============================= SECTION 2 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1119; start_column=11;
                                       end_line=1119; end_column=34;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1119; start_column=11;
                  end_line=1119; end_column=34;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1119; start_column=11;
                           end_line=1119; end_column=34;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualTaxReturnSection2aSurvivingSpouseOutput.t =
    match
      (Optional.Present
         (({IndividualTaxReturnSection2aSurvivingSpouseOutput.individual_tax_return =
              individual_tax_return;
              IndividualTaxReturnSection2aSurvivingSpouseOutput.spouse_died_within_two_years_2_a_1_A =
                spouse_died_within_two_years_2_a_1_a__1;
              IndividualTaxReturnSection2aSurvivingSpouseOutput.maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_B =
                maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_b__1;
              IndividualTaxReturnSection2aSurvivingSpouseOutput.has_remarried_2_a_2_A =
                has_remarried_2_a_2_a__1;
              IndividualTaxReturnSection2aSurvivingSpouseOutput.joint_return_could_have_been_made_2_a_2_B =
                joint_return_could_have_been_made_2_a_2_b__1;
              IndividualTaxReturnSection2aSurvivingSpouseOutput.is_surviving_spouse_2_a =
                is_surviving_spouse_2_a__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1204; start_column=5;
             end_line=1211; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1121; start_column=10;
                           end_line=1121; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualTaxReturnSection2aSurvivingSpouse.main_output =
     main_output}

(* Scope IndividualSection151PersonalExemption *)
let individual_section151_personal_exemption :
  IndividualSection151PersonalExemption_in.t -> IndividualSection151PersonalExemption.t =
  fun individual_section151_personal_exemption_in ->
  let individual: Individual.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.individual_in
    in
  let individual_tax_return: IndividualTaxReturn.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.individual_tax_return_in
    in
  let tax_year: integer =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.tax_year_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.tax_return_events_in
    in
  let adjusted_gross_income: money =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.adjusted_gross_income_in
    in
  let applicable_amount: money =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.applicable_amount_in
    in
  let all_individuals_entitled_to_exemptions_under_151: Individual.t
                                                        array =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.all_individuals_entitled_to_exemptions_under_151_in
    in
  let exemption_amount_base: ((money *
                                code_location)) Optional.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.exemption_amount_base_in
    in
  let number_of_personal_exemptions_151_c: ((integer
                                              *
                                              code_location)) Optional.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.number_of_personal_exemptions_151_c_in
    in
  let personal_exemptions_deduction_151_a: ((money
                                              *
                                              code_location)) Optional.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.personal_exemptions_deduction_151_a_in
    in
  let applicable_percentage_151_d_3_b: ((decimal
                                          *
                                          code_location)) Optional.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.applicable_percentage_151_d_3_B_in
    in
  let exemption_amount_zero_151_d_5: ((bool *
                                        code_location)) Optional.t =
    individual_section151_personal_exemption_in.IndividualSection151PersonalExemption_in.exemption_amount_zero_151_d_5_in
    in
  let exemption_amount_zero_151_d_5__1: bool =
    match
      (match exemption_amount_zero_151_d_5
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((is_tax_year_2018_through_2025
                         tax_year),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5056; start_column=5;
                         end_line=5056; end_column=46;
                         law_headings=["============================= SECTION 151 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1626; start_column=11;
                                       end_line=1626; end_column=40;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1626; start_column=11;
                  end_line=1626; end_column=40;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1626; start_column=11;
                           end_line=1626; end_column=40;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let applicable_percentage_151_d_3_b__1: decimal =
    match
      (match applicable_percentage_151_d_3_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     (( if
                         (o_gt_mon_mon
                            adjusted_gross_income
                            applicable_amount)
                         then
                         (let excess_agi : money
                            =
                            (o_sub_mon_mon
                               adjusted_gross_income
                               applicable_amount)
                           in
                           (let threshold : money
                              =
                              (match
                                 (individual_tax_return.IndividualTaxReturn.details)
                               with
                               | FilingStatusVariant.JointReturn _ ->
                                   (money_of_cents_string
                                   "250000")
                               | FilingStatusVariant.SurvivingSpouse _ ->
                                   (money_of_cents_string
                                   "250000")
                               | FilingStatusVariant.HeadOfHousehold _ ->
                                   (money_of_cents_string
                                   "250000")
                               | FilingStatusVariant.Single _ ->
                                   (money_of_cents_string
                                   "250000")
                               | FilingStatusVariant.MarriedFilingSeparate _ ->
                                   (money_of_cents_string
                                   "125000")) in
                           (let excess_decimal :
                              decimal =
                              (o_torat_mon
                                 excess_agi) in
                           (let threshold_decimal
                              : decimal =
                              (o_torat_mon
                                 threshold) in
                           (let
                              fraction_count_decimal
                              : decimal =
                              (o_div_rat_rat
                                 {filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                  start_line=5000; start_column=58;
                                  end_line=5000; end_column=75;
                                  law_headings=["============================= SECTION 151 ============================="]}
                                 excess_decimal
                                 threshold_decimal)
                           in
                           (let fraction_count :
                              decimal =
                              ( if
                                 (o_gt_rat_rat
                                    fraction_count_decimal
                                    (o_torat_int
                                       (o_toint_rat
                                          fraction_count_decimal)))
                                 then
                                 (o_torat_int
                                    (o_add_int_int
                                       (o_toint_rat
                                          fraction_count_decimal)
                                       (integer_of_string
                                       "1")))
                                 else
                                 (o_torat_int
                                    (o_toint_rat
                                       fraction_count_decimal)))
                           in
                           ((Decimal_en.min)
                              (o_mult_rat_rat
                                 fraction_count
                                 (decimal_of_string "1/50"))
                              (decimal_of_string "1"))))))))
                         else
                         (decimal_of_string "0")),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4991; start_column=5;
                         end_line=5009; end_column=9;
                         law_headings=["============================= SECTION 151 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1625; start_column=11;
                                       end_line=1625; end_column=42;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1625; start_column=11;
                  end_line=1625; end_column=42;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1625; start_column=11;
                           end_line=1625; end_column=42;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let number_of_personal_exemptions_151_c__1: integer =
    match
      (match number_of_personal_exemptions_151_c
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_length
                         all_individuals_entitled_to_exemptions_under_151),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5160; start_column=5;
                         end_line=5160; end_column=63;
                         law_headings=["============================= SECTION 151 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1623; start_column=11;
                                       end_line=1623; end_column=46;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1623; start_column=11;
                  end_line=1623; end_column=46;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1623; start_column=11;
                           end_line=1623; end_column=46;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let exemption_amount_base__1: money =
    match
      (match exemption_amount_base
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        exemption_amount_zero_151_d_5__1
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "0"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5063; start_column=22;
                               end_line=5063; end_column=24;
                               law_headings=["============================= SECTION 151 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((money_of_cents_string
                            "200000"),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=4933; start_column=49;
                              end_line=4933; end_column=55;
                              law_headings=["============================= SECTION 151 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1619; start_column=11;
                                       end_line=1619; end_column=27;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1619; start_column=11;
                  end_line=1619; end_column=27;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1619; start_column=11;
                           end_line=1619; end_column=27;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let exemption_amount_after_disallowance: money =
    match
      (match
         ( if exemption_amount_zero_151_d_5__1
            then
            (Optional.Present
               ((money_of_cents_string "0"),
                 ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                   start_line=5070; start_column=22;
                   end_line=5070; end_column=24;
                   law_headings=["============================= SECTION 151 ============================="]})))
            else (Optional.Absent))
       with
       | Optional.Absent ->
           (Optional.Present
              ((let
                  taxpayer_is_dependent_of_another
                  : bool =
                  (o_fold
                     (fun (acc: bool)
                        (event: TaxReturnEvent.t) ->
                        acc ||
                          ((o_not
                              ((o_eq_int_int
                                  ((event.TaxReturnEvent.individual).Individual.id)
                                  (individual.Individual.id)) &&
                                 (o_eq_boo_boo
                                    ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                    (individual.Individual.is_counterfactual)))) &&
                             ((o_eq_int_int
                                 (event.TaxReturnEvent.tax_year)
                                 tax_year) &&
                                (o_fold
                                   (fun
                                      (acc__1:
                                        bool)
                                      (dependent:
                                        Individual.t) ->
                                      acc__1 ||
                                        ((o_eq_int_int
                                            (dependent.Individual.id)
                                            (individual.Individual.id)) &&
                                           (o_eq_boo_boo
                                              (dependent.Individual.is_counterfactual)
                                              (individual.Individual.is_counterfactual))))
                                   false
                                   (event.TaxReturnEvent.dependents)))))
                     false tax_return_events) in
                ( if
                   taxpayer_is_dependent_of_another
                   then
                   (money_of_cents_string "0")
                   else exemption_amount_base__1)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=4955; start_column=5;
                  end_line=4964; end_column=23;
                  law_headings=["============================= SECTION 151 ============================="]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1619; start_column=11;
                           end_line=1619; end_column=27;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let exemption_amount_after_phaseout: money =
    match
      (match
         ( if exemption_amount_zero_151_d_5__1
            then
            (Optional.Present
               ((money_of_cents_string "0"),
                 ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                   start_line=5077; start_column=22;
                   end_line=5077; end_column=24;
                   law_headings=["============================= SECTION 151 ============================="]})))
            else (Optional.Absent))
       with
       | Optional.Absent ->
           (Optional.Present
              (( if
                  (o_gt_mon_mon
                     adjusted_gross_income
                     applicable_amount) then
                  (let reduction : money =
                     (o_tomoney_rat
                        (o_mult_rat_rat
                           (o_torat_mon
                              exemption_amount_after_disallowance)
                           applicable_percentage_151_d_3_b__1))
                    in
                    (o_sub_mon_mon
                       exemption_amount_after_disallowance
                       reduction)) else
                  exemption_amount_after_disallowance),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=5032; start_column=5;
                  end_line=5036; end_column=23;
                  law_headings=["============================= SECTION 151 ============================="]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1619; start_column=11;
                           end_line=1619; end_column=27;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let personal_exemptions_deduction_151_a__1: money =
    match
      (match personal_exemptions_deduction_151_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let n : decimal =
                         (o_torat_int
                            number_of_personal_exemptions_151_c__1)
                       in
                       (o_tomoney_rat
                          (o_mult_rat_rat n
                             (o_torat_mon
                                exemption_amount_after_phaseout)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5180; start_column=5;
                         end_line=5181; end_column=72;
                         law_headings=["============================= SECTION 151 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1624; start_column=11;
                                       end_line=1624; end_column=46;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1624; start_column=11;
                  end_line=1624; end_column=46;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1624; start_column=11;
                           end_line=1624; end_column=46;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualSection151PersonalExemptionOutput.t =
    match
      (Optional.Present
         (({IndividualSection151PersonalExemptionOutput.individual =
              individual;
              IndividualSection151PersonalExemptionOutput.exemption_amount_base =
                exemption_amount_base__1;
              IndividualSection151PersonalExemptionOutput.exemption_amount_after_disallowance =
                exemption_amount_after_disallowance;
              IndividualSection151PersonalExemptionOutput.exemption_amount_after_phaseout =
                exemption_amount_after_phaseout;
              IndividualSection151PersonalExemptionOutput.personal_exemptions_deduction_151_a =
                personal_exemptions_deduction_151_a__1;
              IndividualSection151PersonalExemptionOutput.applicable_percentage_151_d_3_B =
                applicable_percentage_151_d_3_b__1;
              IndividualSection151PersonalExemptionOutput.exemption_amount_zero_151_d_5 =
                exemption_amount_zero_151_d_5__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1763; start_column=5;
             end_line=1771; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1628; start_column=10;
                           end_line=1628; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualSection151PersonalExemption.main_output =
     main_output}

(* Scope IndividualTaxReturnSection68ItemizedDeductions *)
let individual_tax_return_section68_itemized_deductions :
  IndividualTaxReturnSection68ItemizedDeductions_in.t -> IndividualTaxReturnSection68ItemizedDeductions.t =
  fun individual_tax_return_section68_itemized_deductions_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.individual_tax_return_in
    in
  let adjusted_gross_income: money =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.adjusted_gross_income_in
    in
  let itemized_deductions: money =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.itemized_deductions_in
    in
  let taxpayer_marital_status: IndividualSection7703MaritalStatusOutput.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.taxpayer_marital_status_in
    in
  let is_surviving_spouse: bool =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.is_surviving_spouse_in
    in
  let is_head_of_household: bool =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.is_head_of_household_in
    in
  let applicable_amount_68_b_1: ((money *
                                   code_location)) Optional.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.applicable_amount_68_b_1_in
    in
  let three_percent_reduction_68_a_1: ((money *
                                         code_location)) Optional.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.three_percent_reduction_68_a_1_in
    in
  let eighty_percent_reduction_68_a_2: ((money *
                                          code_location)) Optional.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.eighty_percent_reduction_68_a_2_in
    in
  let reduction_amount_68_a: ((money *
                                code_location)) Optional.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.reduction_amount_68_a_in
    in
  let itemized_deductions_after_68: ((money *
                                       code_location)) Optional.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.itemized_deductions_after_68_in
    in
  let section_not_applicable_68_f: ((bool *
                                      code_location)) Optional.t =
    individual_tax_return_section68_itemized_deductions_in.IndividualTaxReturnSection68ItemizedDeductions_in.section_not_applicable_68_f_in
    in
  let section_not_applicable_68_f__1: bool =
    match
      (match section_not_applicable_68_f
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((is_tax_year_2018_through_2025
                         (individual_tax_return.IndividualTaxReturn.tax_year)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3900; start_column=5;
                         end_line=3900; end_column=68;
                         law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1466; start_column=11;
                                       end_line=1466; end_column=38;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1466; start_column=11;
                  end_line=1466; end_column=38;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1466; start_column=11;
                           end_line=1466; end_column=38;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let eighty_percent_reduction_68_a_2__1: money =
    match
      (match eighty_percent_reduction_68_a_2
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_mult_mon_rat
                         itemized_deductions
                         (decimal_of_string "4/5")),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3853; start_column=5;
                         end_line=3853; end_column=30;
                         law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1463; start_column=11;
                                       end_line=1463; end_column=42;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1463; start_column=11;
                  end_line=1463; end_column=42;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1463; start_column=11;
                           end_line=1463; end_column=42;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let applicable_amount_68_b_1__1: money =
    match
      (match applicable_amount_68_b_1
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (match
                        (match
                           ( if
                              ((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                 (match
                                    (individual_tax_return.IndividualTaxReturn.details)
                                  with
                                  | FilingStatusVariant.JointReturn _ ->
                                      false
                                  | FilingStatusVariant.SurvivingSpouse _ ->
                                      false
                                  | FilingStatusVariant.HeadOfHousehold _ ->
                                      false
                                  | FilingStatusVariant.Single _ ->
                                      false
                                  | FilingStatusVariant.MarriedFilingSeparate _ ->
                                      true)) then
                              (Optional.Present
                                 ((money_of_cents_string
                                   "15000000"),
                                   ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                     start_line=3809; start_column=22;
                                     end_line=3809; end_column=30;
                                     law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                              else
                              (Optional.Absent))
                         with
                         | Optional.Absent ->
                             ( if
                                ((o_not
                                    (taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703)) &&
                                   ((o_not
                                       is_surviving_spouse) &&
                                      (o_not
                                         is_head_of_household)))
                                then
                                (Optional.Present
                                   ((money_of_cents_string
                                     "25000000"),
                                     ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=3778; start_column=22;
                                       end_line=3778; end_column=30;
                                       law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                                else
                                (Optional.Absent))
                         | Optional.Present x ->
                             (Optional.Present x))
                      with
                      | Optional.Absent ->
                          ( if
                             is_head_of_household
                             then
                             (Optional.Present
                                ((money_of_cents_string
                                  "27500000"),
                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                    start_line=3757; start_column=22;
                                    end_line=3757; end_column=30;
                                    law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                             else
                             (Optional.Absent))
                      | Optional.Present x ->
                          (Optional.Present x))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (( if
                              (((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                  (match
                                     (individual_tax_return.IndividualTaxReturn.details)
                                   with
                                   | FilingStatusVariant.JointReturn _ ->
                                       true
                                   | FilingStatusVariant.SurvivingSpouse _ ->
                                       false
                                   | FilingStatusVariant.HeadOfHousehold _ ->
                                       false
                                   | FilingStatusVariant.Single _ ->
                                       false
                                   | FilingStatusVariant.MarriedFilingSeparate _ ->
                                       false)) ||
                                 is_surviving_spouse)
                              then
                              (money_of_cents_string
                                "30000000") else
                              (money_of_cents_string
                                "0")),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3725; start_column=5;
                              end_line=3738; end_column=9;
                              law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1461; start_column=11;
                                       end_line=1461; end_column=35;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1461; start_column=11;
                  end_line=1461; end_column=35;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1461; start_column=11;
                           end_line=1461; end_column=35;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let three_percent_reduction_68_a_1__1: money =
    match
      (match three_percent_reduction_68_a_1
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let excess_agi : money =
                         (o_sub_mon_mon
                            adjusted_gross_income
                            applicable_amount_68_b_1__1)
                       in
                       ( if
                          (o_gt_mon_mon
                             excess_agi
                             (money_of_cents_string
                             "0")) then
                          (o_mult_mon_rat
                             excess_agi
                             (decimal_of_string "3/100"))
                          else
                          (money_of_cents_string
                            "0"))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3831; start_column=5;
                         end_line=3835; end_column=9;
                         law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1462; start_column=11;
                                       end_line=1462; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1462; start_column=11;
                  end_line=1462; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1462; start_column=11;
                           end_line=1462; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let reduction_amount_68_a__1: money =
    match
      (match reduction_amount_68_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        section_not_applicable_68_f__1
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "0"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3912; start_column=22;
                               end_line=3912; end_column=24;
                               law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (( if
                              (o_gt_mon_mon
                                 adjusted_gross_income
                                 applicable_amount_68_b_1__1)
                              then
                              ((Money_en.min)
                                 three_percent_reduction_68_a_1__1
                                 eighty_percent_reduction_68_a_2__1)
                              else
                              (money_of_cents_string
                                "0")),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3872; start_column=5;
                              end_line=3875; end_column=9;
                              law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1464; start_column=11;
                                       end_line=1464; end_column=32;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1464; start_column=11;
                  end_line=1464; end_column=32;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1464; start_column=11;
                           end_line=1464; end_column=32;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let itemized_deductions_after_68__1: money =
    match
      (match itemized_deductions_after_68
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        section_not_applicable_68_f__1
                        then
                        (Optional.Present
                           (itemized_deductions,
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3906; start_column=22;
                               end_line=3906; end_column=41;
                               law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((o_sub_mon_mon
                              itemized_deductions
                              reduction_amount_68_a__1),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3881; start_column=5;
                              end_line=3881; end_column=48;
                              law_headings=["============================= MAIN DEFINITIONS ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1465; start_column=11;
                                       end_line=1465; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1465; start_column=11;
                  end_line=1465; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1465; start_column=11;
                           end_line=1465; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualTaxReturnSection68ItemizedDeductionsOutput.t =
    match
      (Optional.Present
         (({IndividualTaxReturnSection68ItemizedDeductionsOutput.individual_tax_return =
              individual_tax_return;
              IndividualTaxReturnSection68ItemizedDeductionsOutput.applicable_amount_68_b_1 =
                applicable_amount_68_b_1__1;
              IndividualTaxReturnSection68ItemizedDeductionsOutput.three_percent_reduction_68_a_1 =
                three_percent_reduction_68_a_1__1;
              IndividualTaxReturnSection68ItemizedDeductionsOutput.eighty_percent_reduction_68_a_2 =
                eighty_percent_reduction_68_a_2__1;
              IndividualTaxReturnSection68ItemizedDeductionsOutput.reduction_amount_68_a =
                reduction_amount_68_a__1;
              IndividualTaxReturnSection68ItemizedDeductionsOutput.itemized_deductions_after_68 =
                itemized_deductions_after_68__1;
              IndividualTaxReturnSection68ItemizedDeductionsOutput.section_not_applicable_68_f =
                section_not_applicable_68_f__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1482; start_column=5;
             end_line=1490; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1468; start_column=10;
                           end_line=1468; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualTaxReturnSection68ItemizedDeductions.main_output =
     main_output}

(* Scope IndividualTaxReturnSection63TaxableIncome *)
let individual_tax_return_section63_taxable_income :
  IndividualTaxReturnSection63TaxableIncome_in.t -> IndividualTaxReturnSection63TaxableIncome.t =
  fun individual_tax_return_section63_taxable_income_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.individual_tax_return_in
    in
  let birth_events: BirthEvent.t array =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.birth_events_in
    in
  let blindness_status_events: BlindnessStatusEvent.t
                               array =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.blindness_status_events_in
    in
  let death_events: DeathEvent.t array =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.death_events_in
    in
  let income_events: IncomeEvent.t array =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.income_events_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.tax_return_events_in
    in
  let nonresident_alien_status_period_events: NonresidentAlienStatusPeriodEvent.t
                                              array =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.nonresident_alien_status_period_events_in
    in
  let taxpayer_marital_status: IndividualSection7703MaritalStatusOutput.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.taxpayer_marital_status_in
    in
  let is_surviving_spouse: bool =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.is_surviving_spouse_in
    in
  let is_head_of_household: bool =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.is_head_of_household_in
    in
  let taxpayer_exemptions_list_result: TaxpayerExemptionsList151Output.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.taxpayer_exemptions_list_result_in
    in
  let taxpayer_exemption_result: IndividualSection151PersonalExemptionOutput.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.taxpayer_exemption_result_in
    in
  let adjusted_gross_income: money =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.adjusted_gross_income_in
    in
  let itemized_deductions_result: IndividualTaxReturnSection68ItemizedDeductionsOutput.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.itemized_deductions_result_in
    in
  let additional_amount_taxpayer_aged_63_f_1_a: ((money
                                                   *
                                                   code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.additional_amount_taxpayer_aged_63_f_1_A_in
    in
  let additional_amount_spouse_aged_63_f_1_b: ((money
                                                 *
                                                 code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.additional_amount_spouse_aged_63_f_1_B_in
    in
  let additional_amount_taxpayer_blind_63_f_2_a: ((money
                                                    *
                                                    code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.additional_amount_taxpayer_blind_63_f_2_A_in
    in
  let additional_amount_spouse_blind_63_f_2_b: ((money
                                                  *
                                                  code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.additional_amount_spouse_blind_63_f_2_B_in
    in
  let additional_standard_deduction_63_c_3: ((money
                                               *
                                               code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.additional_standard_deduction_63_c_3_in
    in
  let basic_standard_deduction_63_c_2_before_c_5: ((money
                                                     *
                                                     code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.basic_standard_deduction_63_c_2_before_c_5_in
    in
  let standard_deduction_eligible_63_c_6: ((bool
                                             *
                                             code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.standard_deduction_eligible_63_c_6_in
    in
  let standard_deduction_63_c_1: ((money *
                                    code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.standard_deduction_63_c_1_in
    in
  let taxable_income: ((money * code_location)) Optional.t =
    individual_tax_return_section63_taxable_income_in.IndividualTaxReturnSection63TaxableIncome_in.taxable_income_in
    in
  let attained_age_65: Individual.t ->
                         (BirthEvent.t array) ->
                         date -> bool =
    fun (individual_arg: Individual.t)
      (birth_events_arg: BirthEvent.t array)
      (year_end_arg: date) ->
      match
        (Optional.Present
           ((o_fold
               (fun (acc: bool)
                  (birth_event: BirthEvent.t) ->
                  acc ||
                    (((o_eq_int_int
                         ((birth_event.BirthEvent.individual).Individual.id)
                         (individual_arg.Individual.id)) &&
                        (o_eq_boo_boo
                           ((birth_event.BirthEvent.individual).Individual.is_counterfactual)
                           (individual_arg.Individual.is_counterfactual))) &&
                       ((Date_en.is_old_enough_rounding_down)
                          (birth_event.BirthEvent.birth_date)
                          (duration_of_numbers (65) (0) (0))
                          year_end_arg))) false
               birth_events_arg),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1384; start_column=5;
               end_line=1386; end_column=92;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1314; start_column=12;
                             end_line=1314; end_column=27;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let is_blind_at_close: Individual.t ->
                           (BlindnessStatusEvent.t
                            array) ->
                           (DeathEvent.t array) ->
                           date -> bool =
    fun (individual_arg: Individual.t)
      (blindness_status_events_arg:
        BlindnessStatusEvent.t array)
      (death_events_arg: DeathEvent.t array)
      (year_end_arg: date) ->
      match
        (Optional.Present
           ((o_fold
               (fun (acc: bool)
                  (blindness_event:
                    BlindnessStatusEvent.t) ->
                  acc ||
                    (((o_eq_int_int
                         ((blindness_event.BlindnessStatusEvent.individual).Individual.id)
                         (individual_arg.Individual.id)) &&
                        (o_eq_boo_boo
                           ((blindness_event.BlindnessStatusEvent.individual).Individual.is_counterfactual)
                           (individual_arg.Individual.is_counterfactual))) &&
                       ((o_lte_dat_dat
                           (blindness_event.BlindnessStatusEvent.status_date)
                           year_end_arg) &&
                          ((blindness_event.BlindnessStatusEvent.is_blind) &&
                             (o_not
                                (o_fold
                                   (fun
                                      (acc__1:
                                        bool)
                                      (death_event:
                                        DeathEvent.t) ->
                                      acc__1 ||
                                        (((o_eq_int_int
                                             ((death_event.DeathEvent.decedent).Individual.id)
                                             (individual_arg.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                                               (individual_arg.Individual.is_counterfactual))) &&
                                           ((o_lt_dat_dat
                                               (death_event.DeathEvent.death_date)
                                               (blindness_event.BlindnessStatusEvent.status_date)) &&
                                              (o_lte_dat_dat
                                                 (death_event.DeathEvent.death_date)
                                                 year_end_arg))))
                                   false
                                   death_events_arg))))))
               false blindness_status_events_arg),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1391; start_column=5;
               end_line=1400; end_column=8;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1318; start_column=12;
                             end_line=1318; end_column=29;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let spouse_itemization_election: IndividualTaxReturn.t ->
                                     bool =
    fun
      (individual_tax_return_arg:
        IndividualTaxReturn.t) ->
      match
        (Optional.Present
           ((match
               (individual_tax_return_arg.IndividualTaxReturn.details)
             with
             | FilingStatusVariant.JointReturn _ ->
                 false
             | FilingStatusVariant.SurvivingSpouse _ ->
                 false
             | FilingStatusVariant.HeadOfHousehold _ ->
                 false
             | FilingStatusVariant.Single _ ->
                 false
             | FilingStatusVariant.MarriedFilingSeparate variant ->
                 (variant.MarriedFilingSeparateVariant.spouse_itemization_election)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1405; start_column=5;
               end_line=1410; end_column=103;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1323; start_column=12;
                             end_line=1323; end_column=39;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let is_nonresident_alien_during_year: Individual.t ->
                                          (NonresidentAlienStatusPeriodEvent.t
                                           array) ->
                                          integer ->
                                          date ->
                                          bool =
    fun (individual_arg: Individual.t)
      (nonresident_alien_status_period_events_arg:
        NonresidentAlienStatusPeriodEvent.t array)
      (tax_year_arg: integer)
      (year_end_arg: date) ->
      match
        (Optional.Present
           ((o_fold
               (fun (acc: bool)
                  (residency_event:
                    NonresidentAlienStatusPeriodEvent.t) ->
                  acc ||
                    (((o_eq_int_int
                         ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.id)
                         (individual_arg.Individual.id)) &&
                        (o_eq_boo_boo
                           ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.is_counterfactual)
                           (individual_arg.Individual.is_counterfactual))) &&
                       ((o_lte_dat_dat
                           (residency_event.NonresidentAlienStatusPeriodEvent.start_date)
                           year_end_arg) &&
                          ((o_gte_dat_dat
                              (residency_event.NonresidentAlienStatusPeriodEvent.end_date)
                              ((Date_en.of_year_month_day)
                                 ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                   start_line=1418; start_column=39;
                                   end_line=1418; end_column=61;
                                   law_headings=[]})
                                 tax_year_arg
                                 (integer_of_string
                                 "1")
                                 (integer_of_string
                                 "1"))) &&
                             (o_eq
                                (residency_event.NonresidentAlienStatusPeriodEvent.residency_status)
                                (ResidencyStatus.NonresidentAlien))))))
               false
               nonresident_alien_status_period_events_arg),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=1415; start_column=5;
               end_line=1419; end_column=78;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=1325; start_column=12;
                             end_line=1325; end_column=44;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let basic_standard_deduction_63_c_2_before_c_5__1: money =
    match
      (match
         basic_standard_deduction_63_c_2_before_c_5
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (handle_exceptions
                        ([|(match
                              (match
                                 ( if
                                    ((is_tax_year_2018_through_2025
                                        (individual_tax_return.IndividualTaxReturn.tax_year)) &&
                                       (((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                           (match
                                              (individual_tax_return.IndividualTaxReturn.details)
                                            with
                                            | FilingStatusVariant.JointReturn _ ->
                                                true
                                            | FilingStatusVariant.SurvivingSpouse _ ->
                                                false
                                            | FilingStatusVariant.HeadOfHousehold _ ->
                                                false
                                            | FilingStatusVariant.Single _ ->
                                                false
                                            | FilingStatusVariant.MarriedFilingSeparate _ ->
                                                false)) ||
                                          is_surviving_spouse))
                                    then
                                    (Optional.Present
                                       ((money_of_cents_string
                                         "2400000"),
                                         ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                           start_line=3443; start_column=22;
                                           end_line=3443; end_column=29;
                                           law_headings=["============================= SECTION 63 ============================="]})))
                                    else
                                    (Optional.Absent))
                               with
                               | Optional.Absent ->
                                   ( if
                                      ((is_tax_year_2018_through_2025
                                          (individual_tax_return.IndividualTaxReturn.tax_year)) &&
                                         is_head_of_household)
                                      then
                                      (Optional.Present
                                         ((money_of_cents_string
                                           "1800000"),
                                           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                             start_line=3423; start_column=22;
                                             end_line=3423; end_column=29;
                                             law_headings=["============================= SECTION 63 ============================="]})))
                                      else
                                      (Optional.Absent))
                               | Optional.Present x ->
                                   (Optional.Present
                                      x))
                            with
                            | Optional.Absent ->
                                ( if
                                   (is_tax_year_2018_through_2025
                                      (individual_tax_return.IndividualTaxReturn.tax_year))
                                   then
                                   (Optional.Present
                                      ((money_of_cents_string
                                        "1200000"),
                                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                          start_line=3416; start_column=22;
                                          end_line=3416; end_column=29;
                                          law_headings=["============================= SECTION 63 ============================="]})))
                                   else
                                   (Optional.Absent))
                            | Optional.Present x ->
                                (Optional.Present
                                   x));
                           (match
                              ( if
                                 ((o_not
                                     (is_tax_year_2018_through_2025
                                        (individual_tax_return.IndividualTaxReturn.tax_year))) &&
                                    (((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                        (match
                                           (individual_tax_return.IndividualTaxReturn.details)
                                         with
                                         | FilingStatusVariant.JointReturn _ ->
                                             true
                                         | FilingStatusVariant.SurvivingSpouse _ ->
                                             false
                                         | FilingStatusVariant.HeadOfHousehold _ ->
                                             false
                                         | FilingStatusVariant.Single _ ->
                                             false
                                         | FilingStatusVariant.MarriedFilingSeparate _ ->
                                             false)) ||
                                       is_surviving_spouse))
                                 then
                                 (Optional.Present
                                    ((money_of_cents_string
                                      "600000"),
                                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3386; start_column=22;
                                        end_line=3386; end_column=28;
                                        law_headings=["============================= SECTION 63 ============================="]})))
                                 else
                                 (Optional.Absent))
                            with
                            | Optional.Absent ->
                                ( if
                                   ((o_not
                                       (is_tax_year_2018_through_2025
                                          (individual_tax_return.IndividualTaxReturn.tax_year))) &&
                                      is_head_of_household)
                                   then
                                   (Optional.Present
                                      ((money_of_cents_string
                                        "440000"),
                                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                          start_line=3367; start_column=22;
                                          end_line=3367; end_column=28;
                                          law_headings=["============================= SECTION 63 ============================="]})))
                                   else
                                   (Optional.Absent))
                            | Optional.Present x ->
                                (Optional.Present
                                   x))|]))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((money_of_cents_string
                            "300000"),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3360; start_column=70;
                              end_line=3360; end_column=76;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1336; start_column=11;
                                       end_line=1336; end_column=42;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1336; start_column=11;
                  end_line=1336; end_column=42;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1336; start_column=11;
                           end_line=1336; end_column=42;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let additional_amount_spouse_aged_63_f_1_b__1: money =
    match
      (match
         additional_amount_spouse_aged_63_f_1_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let spouse_local :
                           (Individual.t) Optional.t
                           =
                           (get_spouse
                              individual_tax_return)
                          in
                          (let year_end_local :
                             date =
                             (get_year_end
                                (individual_tax_return.IndividualTaxReturn.tax_year))
                          in
                          (let
                             spouse_attained_age_65_local
                             : bool =
                             (match spouse_local
                              with
                              | Optional.Absent ->
                                  false
                              | Optional.Present s ->
                                  (attained_age_65
                                     s
                                     birth_events
                                     year_end_local))
                          in
                          (spouse_attained_age_65_local &&
                             ((taxpayer_exemptions_list_result.TaxpayerExemptionsList151Output.spouse_exemption_allowed_151_b) &&
                                (match
                                   (individual_tax_return.IndividualTaxReturn.details)
                                 with
                                 | FilingStatusVariant.JointReturn _ ->
                                     true
                                 | FilingStatusVariant.SurvivingSpouse _ ->
                                     true
                                 | FilingStatusVariant.HeadOfHousehold _ ->
                                     false
                                 | FilingStatusVariant.Single _ ->
                                     false
                                 | FilingStatusVariant.MarriedFilingSeparate _ ->
                                     true))))))
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "60000"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3192; start_column=22;
                               end_line=3192; end_column=26;
                               law_headings=["============================= SECTION 63 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((money_of_cents_string
                            "0"),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3172; start_column=60;
                              end_line=3172; end_column=62;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1332; start_column=11;
                                       end_line=1332; end_column=49;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1332; start_column=11;
                  end_line=1332; end_column=49;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1332; start_column=11;
                           end_line=1332; end_column=49;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let additional_amount_taxpayer_aged_63_f_1_a__1: money =
    match
      (match
         additional_amount_taxpayer_aged_63_f_1_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let taxpayer_local :
                           Individual.t =
                           (get_taxpayer
                              individual_tax_return)
                          in
                          (let year_end_local :
                             date =
                             (get_year_end
                                (individual_tax_return.IndividualTaxReturn.tax_year))
                          in
                          ((attained_age_65
                              taxpayer_local
                              birth_events
                              year_end_local) &&
                             ((o_not
                                 (taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703)) &&
                                (o_not
                                   is_surviving_spouse)))))
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "75000"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3292; start_column=22;
                               end_line=3292; end_column=26;
                               law_headings=["============================= SECTION 63 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (( if
                              (attained_age_65
                                 (get_taxpayer
                                    individual_tax_return)
                                 birth_events
                                 (get_year_end
                                    (individual_tax_return.IndividualTaxReturn.tax_year)))
                              then
                              (money_of_cents_string
                                "60000") else
                              (money_of_cents_string
                                "0")),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3155; start_column=5;
                              end_line=3155; end_column=148;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1331; start_column=11;
                                       end_line=1331; end_column=51;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1331; start_column=11;
                  end_line=1331; end_column=51;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1331; start_column=11;
                           end_line=1331; end_column=51;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let additional_amount_spouse_blind_63_f_2_b__1: money =
    match
      (match
         additional_amount_spouse_blind_63_f_2_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let spouse_local :
                           (Individual.t) Optional.t
                           =
                           (get_spouse
                              individual_tax_return)
                          in
                          (let year_end_local :
                             date =
                             (get_year_end
                                (individual_tax_return.IndividualTaxReturn.tax_year))
                          in
                          (let
                             spouse_death_events_local
                             : DeathEvent.t array
                             =
                             (match spouse_local
                              with
                              | Optional.Absent ->
                                  (o_filter
                                     (fun
                                        (_:
                                          DeathEvent.t) ->
                                        false)
                                     death_events)
                              | Optional.Present s ->
                                  (o_filter
                                     (fun
                                        (death_event:
                                          DeathEvent.t) ->
                                        ((o_eq_int_int
                                            ((death_event.DeathEvent.decedent).Individual.id)
                                            (s.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                                              (s.Individual.is_counterfactual))) &&
                                          (o_eq_int_int
                                             ((Date_en.get_year)
                                                (death_event.DeathEvent.death_date))
                                             (individual_tax_return.IndividualTaxReturn.tax_year)))
                                     death_events))
                          in
                          (let
                             spouse_death_date_local
                             : date =
                             ( if
                                (o_gt_int_int
                                   (o_length
                                      spouse_death_events_local)
                                   (integer_of_string
                                   "0")) then
                                (o_reduce
                                   (fun
                                      (min1:
                                        date)
                                      (min2:
                                        date) ->
                                       if
                                        (o_lt_dat_dat
                                           min1
                                           min2)
                                        then min1
                                        else min2)
                                   (fun
                                      (_: unit) ->
                                      raise
                                      (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                           start_line=3250; start_column=9;
                                                           end_line=3250; end_column=16;
                                                           law_headings=
                                                           ["============================= SECTION 63 ============================="]}])))
                                   (o_map
                                      (fun
                                         (death_event:
                                           DeathEvent.t) ->
                                         death_event.DeathEvent.death_date)
                                      spouse_death_events_local))
                                else
                                year_end_local)
                          in
                          (let
                             spouse_is_blind_at_close_local
                             : bool =
                             (match spouse_local
                              with
                              | Optional.Absent ->
                                  false
                              | Optional.Present s ->
                                  (is_blind_at_close
                                     s
                                     blindness_status_events
                                     death_events
                                     spouse_death_date_local))
                          in
                          (spouse_is_blind_at_close_local &&
                             ((taxpayer_exemptions_list_result.TaxpayerExemptionsList151Output.spouse_exemption_allowed_151_b) &&
                                (match
                                   (individual_tax_return.IndividualTaxReturn.details)
                                 with
                                 | FilingStatusVariant.JointReturn _ ->
                                     true
                                 | FilingStatusVariant.SurvivingSpouse _ ->
                                     true
                                 | FilingStatusVariant.HeadOfHousehold _ ->
                                     false
                                 | FilingStatusVariant.Single _ ->
                                     false
                                 | FilingStatusVariant.MarriedFilingSeparate _ ->
                                     true))))))))
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "60000"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3267; start_column=22;
                               end_line=3267; end_column=26;
                               law_headings=["============================= SECTION 63 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((money_of_cents_string
                            "0"),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3234; start_column=61;
                              end_line=3234; end_column=63;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1334; start_column=11;
                                       end_line=1334; end_column=50;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1334; start_column=11;
                  end_line=1334; end_column=50;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1334; start_column=11;
                           end_line=1334; end_column=50;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let additional_amount_taxpayer_blind_63_f_2_a__1: money =
    match
      (match
         additional_amount_taxpayer_blind_63_f_2_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let taxpayer_local :
                           Individual.t =
                           (get_taxpayer
                              individual_tax_return)
                          in
                          (let year_end_local :
                             date =
                             (get_year_end
                                (individual_tax_return.IndividualTaxReturn.tax_year))
                          in
                          ((is_blind_at_close
                              taxpayer_local
                              blindness_status_events
                              death_events
                              year_end_local) &&
                             ((o_not
                                 (taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703)) &&
                                (o_not
                                   is_surviving_spouse)))))
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "75000"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3301; start_column=22;
                               end_line=3301; end_column=26;
                               law_headings=["============================= SECTION 63 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (( if
                              (is_blind_at_close
                                 (get_taxpayer
                                    individual_tax_return)
                                 blindness_status_events
                                 death_events
                                 (get_year_end
                                    (individual_tax_return.IndividualTaxReturn.tax_year)))
                              then
                              (money_of_cents_string
                                "60000") else
                              (money_of_cents_string
                                "0")),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3213; start_column=5;
                              end_line=3213; end_column=175;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1333; start_column=11;
                                       end_line=1333; end_column=52;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1333; start_column=11;
                  end_line=1333; end_column=52;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1333; start_column=11;
                           end_line=1333; end_column=52;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let standard_deduction_eligible_63_c_6__1: bool =
    match
      (match standard_deduction_eligible_63_c_6
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (match
                        (match
                           ( if
                              ((taxpayer_marital_status.IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703) &&
                                 ((match
                                     (individual_tax_return.IndividualTaxReturn.details)
                                   with
                                   | FilingStatusVariant.JointReturn _ ->
                                       false
                                   | FilingStatusVariant.SurvivingSpouse _ ->
                                       false
                                   | FilingStatusVariant.HeadOfHousehold _ ->
                                       false
                                   | FilingStatusVariant.Single _ ->
                                       false
                                   | FilingStatusVariant.MarriedFilingSeparate _ ->
                                       true) &&
                                    ((match
                                        (individual_tax_return.IndividualTaxReturn.details)
                                      with
                                      | FilingStatusVariant.JointReturn variant ->
                                          (variant.JointReturnVariant.itemization_election)
                                      | FilingStatusVariant.SurvivingSpouse variant ->
                                          (variant.SurvivingSpouseVariant.itemization_election)
                                      | FilingStatusVariant.HeadOfHousehold variant ->
                                          (variant.HeadOfHouseholdVariant.itemization_election)
                                      | FilingStatusVariant.Single variant ->
                                          (variant.SingleVariant.itemization_election)
                                      | FilingStatusVariant.MarriedFilingSeparate variant ->
                                          (variant.MarriedFilingSeparateVariant.itemization_election)) ||
                                       (spouse_itemization_election
                                          individual_tax_return))))
                              then
                              (Optional.Present
                                 (false,
                                   ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                     start_line=3588; start_column=22;
                                     end_line=3588; end_column=27;
                                     law_headings=["============================= SECTION 63 ============================="]})))
                              else
                              (Optional.Absent))
                         with
                         | Optional.Absent ->
                             ( if
                                (let
                                   taxpayer_local
                                   : Individual.t
                                   =
                                   (get_taxpayer
                                      individual_tax_return)
                                  in
                                  (let
                                     year_end_local
                                     : date =
                                     (get_year_end
                                        (individual_tax_return.IndividualTaxReturn.tax_year))
                                  in
                                  (is_nonresident_alien_during_year
                                     taxpayer_local
                                     nonresident_alien_status_period_events
                                     (individual_tax_return.IndividualTaxReturn.tax_year)
                                     year_end_local)))
                                then
                                (Optional.Present
                                   (false,
                                     ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=3564; start_column=22;
                                       end_line=3564; end_column=27;
                                       law_headings=["============================= SECTION 63 ============================="]})))
                                else
                                (Optional.Absent))
                         | Optional.Present x ->
                             (Optional.Present x))
                      with
                      | Optional.Absent ->
                          ( if
                             ((match
                                 (individual_tax_return.IndividualTaxReturn.details)
                               with
                               | FilingStatusVariant.JointReturn variant ->
                                   (variant.JointReturnVariant.is_estate_or_trust)
                               | FilingStatusVariant.SurvivingSpouse variant ->
                                   (variant.SurvivingSpouseVariant.is_estate_or_trust)
                               | FilingStatusVariant.HeadOfHousehold variant ->
                                   (variant.HeadOfHouseholdVariant.is_estate_or_trust)
                               | FilingStatusVariant.Single variant ->
                                   (variant.SingleVariant.is_estate_or_trust)
                               | FilingStatusVariant.MarriedFilingSeparate variant ->
                                   (variant.MarriedFilingSeparateVariant.is_estate_or_trust)) ||
                                ((match
                                    (individual_tax_return.IndividualTaxReturn.details)
                                  with
                                  | FilingStatusVariant.JointReturn variant ->
                                      (variant.JointReturnVariant.is_common_trust_fund)
                                  | FilingStatusVariant.SurvivingSpouse variant ->
                                      (variant.SurvivingSpouseVariant.is_common_trust_fund)
                                  | FilingStatusVariant.HeadOfHousehold variant ->
                                      (variant.HeadOfHouseholdVariant.is_common_trust_fund)
                                  | FilingStatusVariant.Single variant ->
                                      (variant.SingleVariant.is_common_trust_fund)
                                  | FilingStatusVariant.MarriedFilingSeparate variant ->
                                      (variant.MarriedFilingSeparateVariant.is_common_trust_fund)) ||
                                   (match
                                      (individual_tax_return.IndividualTaxReturn.details)
                                    with
                                    | FilingStatusVariant.JointReturn variant ->
                                        (variant.JointReturnVariant.is_partnership)
                                    | FilingStatusVariant.SurvivingSpouse variant ->
                                        (variant.SurvivingSpouseVariant.is_partnership)
                                    | FilingStatusVariant.HeadOfHousehold variant ->
                                        (variant.HeadOfHouseholdVariant.is_partnership)
                                    | FilingStatusVariant.Single variant ->
                                        (variant.SingleVariant.is_partnership)
                                    | FilingStatusVariant.MarriedFilingSeparate variant ->
                                        (variant.MarriedFilingSeparateVariant.is_partnership))))
                             then
                             (Optional.Present
                                (false,
                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                    start_line=3557; start_column=22;
                                    end_line=3557; end_column=27;
                                    law_headings=["============================= SECTION 63 ============================="]})))
                             else
                             (Optional.Absent))
                      | Optional.Present x ->
                          (Optional.Present x))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (true,
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3529; start_column=56;
                              end_line=3529; end_column=60;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1339; start_column=11;
                                       end_line=1339; end_column=45;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1339; start_column=11;
                  end_line=1339; end_column=45;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1339; start_column=11;
                           end_line=1339; end_column=45;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let basic_standard_deduction_63_c_2_after_c_5: money =
    match
      (Optional.Present
         ((let taxpayer_local : Individual.t =
             (get_taxpayer individual_tax_return)
           in
           (let
              deduction_allowable_to_another_taxpayer
              : bool =
              (o_fold
                 (fun (acc: bool)
                    (event: TaxReturnEvent.t) ->
                    acc ||
                      ((o_not
                          ((o_eq_int_int
                              ((event.TaxReturnEvent.individual).Individual.id)
                              (taxpayer_local.Individual.id)) &&
                             (o_eq_boo_boo
                                ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                (taxpayer_local.Individual.is_counterfactual)))) &&
                         ((o_eq_int_int
                             (event.TaxReturnEvent.tax_year)
                             (individual_tax_return.IndividualTaxReturn.tax_year)) &&
                            (o_fold
                               (fun
                                  (acc__1: bool)
                                  (dependent:
                                    Individual.t) ->
                                  acc__1 ||
                                    ((o_eq_int_int
                                        (dependent.Individual.id)
                                        (taxpayer_local.Individual.id)) &&
                                       (o_eq_boo_boo
                                          (dependent.Individual.is_counterfactual)
                                          (taxpayer_local.Individual.is_counterfactual))))
                               false
                               (event.TaxReturnEvent.dependents)))))
                 false tax_return_events) in
           ( if
              deduction_allowable_to_another_taxpayer
              then
              (let earned_income_local : money =
                 (let income_event_local :
                    IncomeEvent.t array =
                    (o_filter
                       (fun
                          (income_event:
                            IncomeEvent.t) ->
                          ((o_eq_int_int
                              ((income_event.IncomeEvent.individual).Individual.id)
                              (taxpayer_local.Individual.id)) &&
                             (o_eq_boo_boo
                                ((income_event.IncomeEvent.individual).Individual.is_counterfactual)
                                (taxpayer_local.Individual.is_counterfactual))) &&
                            ((o_eq_int_int
                                (income_event.IncomeEvent.tax_year)
                                (individual_tax_return.IndividualTaxReturn.tax_year)) &&
                               (o_not
                                  (income_event.IncomeEvent.is_counterfactual))))
                       income_events) in
                 ( if
                    (o_gt_int_int
                       (o_length
                          income_event_local)
                       (integer_of_string "0"))
                    then
                    (o_reduce
                       (fun (sum1: money)
                          (sum2: money) ->
                          o_add_mon_mon sum1 sum2)
                       (fun (_: unit) ->
                          money_of_cents_string
                          "0")
                       (o_map
                          (fun
                             (event:
                               IncomeEvent.t) ->
                             event.IncomeEvent.earned_income)
                          income_event_local))
                    else
                    (money_of_cents_string "0")))
                in
                ((Money_en.min)
                   basic_standard_deduction_63_c_2_before_c_5__1
                   ((Money_en.max)
                      (money_of_cents_string
                      "50000")
                      (o_add_mon_mon
                         (money_of_cents_string
                         "25000")
                         earned_income_local))))
              else
              basic_standard_deduction_63_c_2_before_c_5__1))),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=3471; start_column=5;
             end_line=3499; end_column=38;
             law_headings=["============================= SECTION 63 ============================="]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1336; start_column=11;
                           end_line=1336; end_column=42;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let additional_standard_deduction_63_c_3__1: money =
    match
      (match additional_standard_deduction_63_c_3
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_add_mon_mon
                         (o_add_mon_mon
                            (o_add_mon_mon
                               additional_amount_taxpayer_aged_63_f_1_a__1
                               additional_amount_spouse_aged_63_f_1_b__1)
                            additional_amount_taxpayer_blind_63_f_2_a__1)
                         additional_amount_spouse_blind_63_f_2_b__1),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3325; start_column=5;
                         end_line=3327; end_column=46;
                         law_headings=["============================= SECTION 63 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1335; start_column=11;
                                       end_line=1335; end_column=47;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1335; start_column=11;
                  end_line=1335; end_column=47;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1335; start_column=11;
                           end_line=1335; end_column=47;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let standard_deduction_63_c_1__1: money =
    match
      (match standard_deduction_63_c_1
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (o_not
                           standard_deduction_eligible_63_c_6__1)
                        then
                        (Optional.Present
                           ((money_of_cents_string
                             "0"),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3618; start_column=22;
                               end_line=3618; end_column=24;
                               law_headings=["============================= SECTION 63 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((o_add_mon_mon
                              basic_standard_deduction_63_c_2_after_c_5
                              additional_standard_deduction_63_c_3__1),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3613; start_column=5;
                              end_line=3613; end_column=93;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1340; start_column=11;
                                       end_line=1340; end_column=36;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1340; start_column=11;
                  end_line=1340; end_column=36;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1340; start_column=11;
                           end_line=1340; end_column=36;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxable_income__1: money =
    match
      (match taxable_income
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (let
                           does_not_itemize_deductions
                           : bool =
                           (o_not
                              (let
                                 itemizes_deductions
                                 : bool =
                                 (match
                                    (individual_tax_return.IndividualTaxReturn.details)
                                  with
                                  | FilingStatusVariant.JointReturn variant ->
                                      (variant.JointReturnVariant.itemization_election)
                                  | FilingStatusVariant.SurvivingSpouse variant ->
                                      (variant.SurvivingSpouseVariant.itemization_election)
                                  | FilingStatusVariant.HeadOfHousehold variant ->
                                      (variant.HeadOfHouseholdVariant.itemization_election)
                                  | FilingStatusVariant.Single variant ->
                                      (variant.SingleVariant.itemization_election)
                                  | FilingStatusVariant.MarriedFilingSeparate variant ->
                                      (variant.MarriedFilingSeparateVariant.itemization_election))
                              in
                              itemizes_deductions))
                          in
                          does_not_itemize_deductions)
                        then
                        (Optional.Present
                           ((let
                               computed_taxable_income
                               : money =
                               (o_sub_mon_mon
                                  (o_sub_mon_mon
                                     adjusted_gross_income
                                     standard_deduction_63_c_1__1)
                                  (taxpayer_exemption_result.IndividualSection151PersonalExemptionOutput.personal_exemptions_deduction_151_a))
                             in
                             ( if
                                (o_lt_mon_mon
                                   computed_taxable_income
                                   (money_of_cents_string
                                   "0")) then
                                (money_of_cents_string
                                  "0") else
                                computed_taxable_income)),
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=3692; start_column=5;
                               end_line=3695; end_column=73;
                               law_headings=["============================= SECTION 63 ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          ((let
                              computed_taxable_income
                              : money =
                              (o_sub_mon_mon
                                 (o_sub_mon_mon
                                    adjusted_gross_income
                                    (itemized_deductions_result.IndividualTaxReturnSection68ItemizedDeductionsOutput.itemized_deductions_after_68))
                                 (taxpayer_exemption_result.IndividualSection151PersonalExemptionOutput.personal_exemptions_deduction_151_a))
                            in
                            ( if
                               (o_lt_mon_mon
                                  computed_taxable_income
                                  (money_of_cents_string
                                  "0")) then
                               (money_of_cents_string
                                 "0") else
                               computed_taxable_income)),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=3645; start_column=5;
                              end_line=3648; end_column=73;
                              law_headings=["============================= SECTION 63 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1341; start_column=11;
                                       end_line=1341; end_column=25;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1341; start_column=11;
                  end_line=1341; end_column=25;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1341; start_column=11;
                           end_line=1341; end_column=25;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualTaxReturnSection63TaxableIncomeOutput.t =
    match
      (Optional.Present
         (({IndividualTaxReturnSection63TaxableIncomeOutput.individual_tax_return =
              individual_tax_return;
              IndividualTaxReturnSection63TaxableIncomeOutput.taxable_income =
                taxable_income__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.standard_deduction_63_c_1 =
                standard_deduction_63_c_1__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.standard_deduction_eligible_63_c_6 =
                standard_deduction_eligible_63_c_6__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.basic_standard_deduction_63_c_2_before_c_5 =
                basic_standard_deduction_63_c_2_before_c_5__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.basic_standard_deduction_63_c_2_after_c_5 =
                basic_standard_deduction_63_c_2_after_c_5;
              IndividualTaxReturnSection63TaxableIncomeOutput.additional_standard_deduction_63_c_3 =
                additional_standard_deduction_63_c_3__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.additional_amount_taxpayer_aged_63_f_1_A =
                additional_amount_taxpayer_aged_63_f_1_a__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.additional_amount_spouse_aged_63_f_1_B =
                additional_amount_spouse_aged_63_f_1_b__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.additional_amount_taxpayer_blind_63_f_2_A =
                additional_amount_taxpayer_blind_63_f_2_a__1;
              IndividualTaxReturnSection63TaxableIncomeOutput.additional_amount_spouse_blind_63_f_2_B =
                additional_amount_spouse_blind_63_f_2_b__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1357; start_column=5;
             end_line=1369; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1343; start_column=10;
                           end_line=1343; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualTaxReturnSection63TaxableIncome.main_output =
     main_output}

(* Scope IndividualSection7703MaritalStatus *)
let individual_section7703_marital_status :
  IndividualSection7703MaritalStatus_in.t -> IndividualSection7703MaritalStatus.t =
  fun individual_section7703_marital_status_in ->
  let individual: Individual.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.individual_in
    in
  let tax_year: integer =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.tax_year_in
    in
  let marriage_events: MarriageEvent.t array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.marriage_events_in
    in
  let divorce_or_legal_separation_events: DivorceOrLegalSeparationEvent.t
                                          array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.divorce_or_legal_separation_events_in
    in
  let death_events: DeathEvent.t array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.death_events_in
    in
  let individual_tax_return: IndividualTaxReturn.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.individual_tax_return_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.residence_period_events_in
    in
  let household_maintenance_events: HouseholdMaintenanceEvent.t
                                    array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.household_maintenance_events_in
    in
  let qualifying_children: IndividualSection152QualifyingChildOutput.t
                           array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.qualifying_children_in
    in
  let individuals_entitled_to_exemptions_under_151: Individual.t
                                                    array =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.individuals_entitled_to_exemptions_under_151_in
    in
  let determination_date: ((date * code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.determination_date_in
    in
  let is_married_at_determination_date: ((bool *
                                           code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.is_married_at_determination_date_in
    in
  let is_legally_separated: ((bool *
                               code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.is_legally_separated_in
    in
  let households_with_qualifying_child: (((Household.t
                                           array)
                                           *
                                           code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.households_with_qualifying_child_in
    in
  let households_maintained_by_individual: (((Household.t
                                              array)
                                              *
                                              code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.households_maintained_by_individual_in
    in
  let spouse_not_member_of_household_last_6_months: ((bool
                                                       *
                                                       code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.spouse_not_member_of_household_last_6_months_in
    in
  let subsection_b_exception_applies: ((bool *
                                         code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.subsection_b_exception_applies_in
    in
  let is_married_for_tax_purposes: ((bool *
                                      code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.is_married_for_tax_purposes_in
    in
  let maintains_household_with_qualifying_child_for_more_than_half_year: 
    ((bool * code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.maintains_household_with_qualifying_child_for_more_than_half_year_in
    in
  let furnishes_over_one_half_of_household_cost: ((bool
                                                    *
                                                    code_location)) Optional.t =
    individual_section7703_marital_status_in.IndividualSection7703MaritalStatus_in.furnishes_over_one_half_of_household_cost_in
    in
  let section_7703_find_spouse_from_marriage_events: Individual.t ->
                                                       (MarriageEvent.t
                                                        array) ->
                                                       date ->
                                                       (Individual.t) Optional.t =
    fun (individual_arg: Individual.t)
      (marriage_events_arg:
        MarriageEvent.t array)
      (year_end_arg: date) ->
      match
        (Optional.Present
           ((let valid_marriages :
               (Individual.t * date) array =
               (o_map
                  (fun
                     (marriage_event:
                       MarriageEvent.t) ->
                     (( if
                         ((o_eq_int_int
                             ((marriage_event.MarriageEvent.spouse1).Individual.id)
                             (individual_arg.Individual.id)) &&
                            (o_eq_boo_boo
                               ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                               (individual_arg.Individual.is_counterfactual)))
                         then
                         (marriage_event.MarriageEvent.spouse2)
                         else
                         (marriage_event.MarriageEvent.spouse1)),
                       (marriage_event.MarriageEvent.marriage_date)))
                  (o_filter
                     (fun
                        (marriage_event:
                          MarriageEvent.t) ->
                        (((o_eq_int_int
                             ((marriage_event.MarriageEvent.spouse1).Individual.id)
                             (individual_arg.Individual.id)) &&
                            (o_eq_boo_boo
                               ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                               (individual_arg.Individual.is_counterfactual))) ||
                           ((o_eq_int_int
                               ((marriage_event.MarriageEvent.spouse2).Individual.id)
                               (individual_arg.Individual.id)) &&
                              (o_eq_boo_boo
                                 ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                 (individual_arg.Individual.is_counterfactual)))) &&
                          (o_lte_dat_dat
                             (marriage_event.MarriageEvent.marriage_date)
                             year_end_arg))
                     marriage_events_arg)) in
             ( if
                (o_gt_int_int
                   (o_length valid_marriages)
                   (integer_of_string "0")) then
                (let most_recent_marriage : date
                   =
                   (o_reduce
                      (fun (max1: date)
                         (max2: date) ->
                          if
                           (o_gt_dat_dat max1
                              max2) then max1
                           else max2)
                      (fun (_: unit) -> raise
                         (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                              start_line=2150; start_column=39;
                                              end_line=2150; end_column=46;
                                              law_headings=[]}])))
                      (o_map
                         (fun
                            (marriage_tuple:
                              (Individual.t *
                                date)) -> let _,
                            x = marriage_tuple in
                            x) valid_marriages))
                  in
                  ((List_en.first_element)
                     (o_map
                        (fun
                           (marriage_tuple:
                             (Individual.t *
                               date)) -> let x, _
                           = marriage_tuple in x)
                        (o_filter
                           (fun
                              (marriage_tuple:
                                (Individual.t *
                                  date)) ->
                              o_eq_dat_dat (let
                                _, x
                                = marriage_tuple
                                in x)
                                most_recent_marriage)
                           valid_marriages))))
                else (Optional.Absent))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2137; start_column=5;
               end_line=2160; end_column=16;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2058; start_column=12;
                             end_line=2058; end_column=57;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_7703_get_spouse_death_date_during_year: (Individual.t) Optional.t ->
                                                        (DeathEvent.t
                                                         array) ->
                                                        integer ->
                                                        (date) Optional.t =
    fun (spouse_arg: (Individual.t) Optional.t)
      (death_events_arg: DeathEvent.t array)
      (tax_year_arg: integer) ->
      match
        (Optional.Present
           ((match spouse_arg
             with
             | Optional.Absent ->
                 (Optional.Absent)
             | Optional.Present s ->
                 (let year_start : date =
                    ((Date_en.of_year_month_day)
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2171; start_column=29;
                         end_line=2171; end_column=51;
                         law_headings=[]})
                       tax_year_arg
                       (integer_of_string "1")
                       (integer_of_string "1"))
                 in
                 (let year_end : date =
                    ((Date_en.of_year_month_day)
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2172; start_column=27;
                         end_line=2172; end_column=49;
                         law_headings=[]})
                       tax_year_arg
                       (integer_of_string "12")
                       (integer_of_string "31"))
                 in
                 (let
                    spouse_death_events_during_year
                    : DeathEvent.t array =
                    (o_filter
                       (fun
                          (death_event:
                            DeathEvent.t) ->
                          ((o_eq_int_int
                              ((death_event.DeathEvent.decedent).Individual.id)
                              (s.Individual.id)) &&
                             (o_eq_boo_boo
                                ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                                (s.Individual.is_counterfactual))) &&
                            ((o_gte_dat_dat
                                (death_event.DeathEvent.death_date)
                                year_start) &&
                               (o_lte_dat_dat
                                  (death_event.DeathEvent.death_date)
                                  year_end)))
                       death_events_arg) in
                 ( if
                    (o_gt_int_int
                       (o_length
                          spouse_death_events_during_year)
                       (integer_of_string "0"))
                    then
                    (Optional.Present
                       (o_reduce
                          (fun (min1: date)
                             (min2: date) ->
                              if
                               (o_lt_dat_dat min1
                                  min2) then min1
                               else min2)
                          (fun (_: unit) -> raise
                             (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                  start_line=2180; start_column=24;
                                                  end_line=2180; end_column=31;
                                                  law_headings=[]}])))
                          (o_map
                             (fun
                                (death_event:
                                  DeathEvent.t) ->
                                death_event.DeathEvent.death_date)
                             spouse_death_events_during_year)))
                    else (Optional.Absent)))))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2169; start_column=5;
               end_line=2182; end_column=23;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2062; start_column=12;
                             end_line=2062; end_column=58;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_7703_spouse_died_before_date: (Individual.t) Optional.t ->
                                              (DeathEvent.t
                                               array) ->
                                              date ->
                                              bool =
    fun (spouse_arg: (Individual.t) Optional.t)
      (death_events_arg: DeathEvent.t array)
      (before_date_arg: date) ->
      match
        (Optional.Present
           ((match spouse_arg
             with
             | Optional.Absent -> false
             | Optional.Present s ->
                 (let
                    spouse_death_events_before_date
                    : DeathEvent.t array =
                    (o_filter
                       (fun
                          (death_event:
                            DeathEvent.t) ->
                          ((o_eq_int_int
                              ((death_event.DeathEvent.decedent).Individual.id)
                              (s.Individual.id)) &&
                             (o_eq_boo_boo
                                ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                                (s.Individual.is_counterfactual))) &&
                            (o_lt_dat_dat
                               (death_event.DeathEvent.death_date)
                               before_date_arg))
                       death_events_arg) in
                 (o_gt_int_int
                    (o_length
                       spouse_death_events_before_date)
                    (integer_of_string "0")))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2189; start_column=5;
               end_line=2197; end_column=22;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2066; start_column=12;
                             end_line=2066; end_column=48;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_7703_get_spouse_from_tax_return: Individual.t ->
                                                 IndividualTaxReturn.t ->
                                                 (Individual.t) Optional.t =
    fun (individual_arg: Individual.t)
      (individual_tax_return_arg:
        IndividualTaxReturn.t) ->
      match
        (Optional.Present
           ((match
               (individual_tax_return_arg.IndividualTaxReturn.details)
             with
             | FilingStatusVariant.JointReturn variant ->
                 ( if
                    ((o_eq_int_int
                        ((variant.JointReturnVariant.taxpayer).Individual.id)
                        (individual_arg.Individual.id)) &&
                       (o_eq_boo_boo
                          ((variant.JointReturnVariant.taxpayer).Individual.is_counterfactual)
                          (individual_arg.Individual.is_counterfactual)))
                    then
                    (Optional.Present
                       (variant.JointReturnVariant.spouse))
                    else (Optional.Absent))
             | FilingStatusVariant.SurvivingSpouse variant ->
                 ( if
                    ((o_eq_int_int
                        ((variant.SurvivingSpouseVariant.taxpayer).Individual.id)
                        (individual_arg.Individual.id)) &&
                       (o_eq_boo_boo
                          ((variant.SurvivingSpouseVariant.taxpayer).Individual.is_counterfactual)
                          (individual_arg.Individual.is_counterfactual)))
                    then
                    (Optional.Present
                       (variant.SurvivingSpouseVariant.deceased_spouse))
                    else (Optional.Absent))
             | FilingStatusVariant.HeadOfHousehold _ ->
                 (Optional.Absent)
             | FilingStatusVariant.Single _ ->
                 (Optional.Absent)
             | FilingStatusVariant.MarriedFilingSeparate variant ->
                 ( if
                    ((o_eq_int_int
                        ((variant.MarriedFilingSeparateVariant.taxpayer).Individual.id)
                        (individual_arg.Individual.id)) &&
                       (o_eq_boo_boo
                          ((variant.MarriedFilingSeparateVariant.taxpayer).Individual.is_counterfactual)
                          (individual_arg.Individual.is_counterfactual)))
                    then
                    (Optional.Present
                       (variant.MarriedFilingSeparateVariant.spouse))
                    else (Optional.Absent))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2203; start_column=5;
               end_line=2217; end_column=59;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2070; start_column=12;
                             end_line=2070; end_column=51;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_7703_files_separate_return: Individual.t ->
                                            IndividualTaxReturn.t ->
                                            bool =
    fun (individual_arg: Individual.t)
      (individual_tax_return_arg:
        IndividualTaxReturn.t) ->
      match
        (Optional.Present
           ((match
               (individual_tax_return_arg.IndividualTaxReturn.details)
             with
             | FilingStatusVariant.JointReturn _ ->
                 false
             | FilingStatusVariant.SurvivingSpouse _ ->
                 false
             | FilingStatusVariant.HeadOfHousehold _ ->
                 false
             | FilingStatusVariant.Single _ ->
                 false
             | FilingStatusVariant.MarriedFilingSeparate variant ->
                 ((o_eq_int_int
                     ((variant.MarriedFilingSeparateVariant.taxpayer).Individual.id)
                     (individual_arg.Individual.id)) &&
                    (o_eq_boo_boo
                       ((variant.MarriedFilingSeparateVariant.taxpayer).Individual.is_counterfactual)
                       (individual_arg.Individual.is_counterfactual)))),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2223; start_column=5;
               end_line=2229; end_column=58;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2073; start_column=12;
                             end_line=2073; end_column=46;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let section_7703_is_spouse_member_of_household_last_6_months: Individual.t ->
                                                                  Household.t ->
                                                                  (ResidencePeriodEvent.t
                                                                   array) ->
                                                                  date ->
                                                                  date ->
                                                                  bool =
    fun (spouse_arg: Individual.t)
      (household_arg: Household.t)
      (residence_period_events_arg:
        ResidencePeriodEvent.t array)
      (last_6_months_start_arg: date)
      (last_6_months_end_arg: date) ->
      match
        (Optional.Present
           ((let spouse_membership_events :
               ResidencePeriodEvent.t array =
               (o_filter
                  (fun
                     (spouse_residence_event:
                       ResidencePeriodEvent.t) ->
                     ((o_eq_int_int
                         ((spouse_residence_event.ResidencePeriodEvent.individual).Individual.id)
                         (spouse_arg.Individual.id)) &&
                        (o_eq_boo_boo
                           ((spouse_residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                           (spouse_arg.Individual.is_counterfactual))) &&
                       (((o_eq_int_int
                            ((spouse_residence_event.ResidencePeriodEvent.household).Household.id)
                            (household_arg.Household.id)) &&
                           (o_eq_boo_boo
                              ((spouse_residence_event.ResidencePeriodEvent.household).Household.is_counterfactual)
                              (household_arg.Household.is_counterfactual))) &&
                          (spouse_residence_event.ResidencePeriodEvent.is_member_of_household)))
                  residence_period_events_arg) in
             ( if
                (o_gt_int_int
                   (o_length
                      spouse_membership_events)
                   (integer_of_string "0")) then
                (o_fold
                   (fun (acc: bool)
                      (membership_event:
                        ResidencePeriodEvent.t) ->
                      acc ||
                        ((o_lte_dat_dat
                            (membership_event.ResidencePeriodEvent.start_date)
                            last_6_months_end_arg) &&
                           (o_gte_dat_dat
                              (membership_event.ResidencePeriodEvent.end_date)
                              last_6_months_start_arg)))
                   false spouse_membership_events)
                else false)),
             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
               start_line=2235; start_column=5;
               end_line=2245; end_column=15;
               law_headings=[]})))
      with
      | Optional.Absent -> (raise
          (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                             start_line=2076; start_column=12;
                             end_line=2076; end_column=68;
                             law_headings=[]}])))
      | Optional.Present arg -> (let x, _ = arg
          in x) in
  let households_maintained_by_individual__1: Household.t
                                              array =
    match
      (match households_maintained_by_individual
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5958; start_column=25;
                              end_line=5958; end_column=47;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let year_start : date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5959; start_column=27;
                               end_line=5959; end_column=49;
                               law_headings=["============================= Scope DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "1")
                             (integer_of_string
                             "1")) in
                       (let _ : date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5960; start_column=30;
                               end_line=5960; end_column=52;
                               law_headings=["============================= Scope DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "6")
                             (integer_of_string
                             "30")) in
                       (o_map
                          (fun
                             (individual_residence_event:
                               ResidencePeriodEvent.t) ->
                             individual_residence_event.ResidencePeriodEvent.household)
                          (o_filter
                             (fun
                                (individual_residence_event:
                                  ResidencePeriodEvent.t) ->
                                ((o_eq_int_int
                                    ((individual_residence_event.ResidencePeriodEvent.individual).Individual.id)
                                    (individual.Individual.id)) &&
                                   (o_eq_boo_boo
                                      ((individual_residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                      (individual.Individual.is_counterfactual))) &&
                                  ((individual_residence_event.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                     ((period_spans_more_than_half_year
                                         (individual_residence_event.ResidencePeriodEvent.start_date)
                                         (individual_residence_event.ResidencePeriodEvent.end_date)
                                         tax_year) &&
                                        ((individual_residence_event.ResidencePeriodEvent.is_member_of_household) &&
                                           (o_fold
                                              (fun
                                                 (acc:
                                                   bool)
                                                 (maintenance_event:
                                                   HouseholdMaintenanceEvent.t) ->
                                                 acc ||
                                                   (((o_eq_int_int
                                                        ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.id)
                                                        (individual.Individual.id)) &&
                                                       (o_eq_boo_boo
                                                          ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.is_counterfactual)
                                                          (individual.Individual.is_counterfactual))) &&
                                                      (((o_eq_int_int
                                                           ((maintenance_event.HouseholdMaintenanceEvent.household).Household.id)
                                                           ((individual_residence_event.ResidencePeriodEvent.household).Household.id)) &&
                                                          (o_eq_boo_boo
                                                             ((maintenance_event.HouseholdMaintenanceEvent.household).Household.is_counterfactual)
                                                             ((individual_residence_event.ResidencePeriodEvent.household).Household.is_counterfactual))) &&
                                                         ((o_gt_rat_rat
                                                             (maintenance_event.HouseholdMaintenanceEvent.cost_furnished_percentage)
                                                             (decimal_of_string "1/2")) &&
                                                            ((o_lte_dat_dat
                                                                (maintenance_event.HouseholdMaintenanceEvent.start_date)
                                                                year_end) &&
                                                               ((o_gte_dat_dat
                                                                   (maintenance_event.HouseholdMaintenanceEvent.end_date)
                                                                   year_start) &&
                                                                  ((o_lte_dat_dat
                                                                    (maintenance_event.HouseholdMaintenanceEvent.start_date)
                                                                    (individual_residence_event.ResidencePeriodEvent.end_date)) &&
                                                                    (o_gte_dat_dat
                                                                    (maintenance_event.HouseholdMaintenanceEvent.end_date)
                                                                    (individual_residence_event.ResidencePeriodEvent.start_date)))))))))
                                              false
                                              household_maintenance_events)))))
                             residence_period_events))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5958; start_column=5;
                         end_line=5982; end_column=43;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2087; start_column=11;
                                       end_line=2087; end_column=46;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2087; start_column=11;
                  end_line=2087; end_column=46;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2087; start_column=11;
                           end_line=2087; end_column=46;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let households_with_qualifying_child__1: Household.t
                                           array =
    match
      (match households_with_qualifying_child
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5907; start_column=25;
                              end_line=5907; end_column=47;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let year_start : date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5908; start_column=27;
                               end_line=5908; end_column=49;
                               law_headings=["============================= Scope DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "1")
                             (integer_of_string
                             "1")) in
                       (o_map
                          (fun
                             (child_residence_event:
                               ResidencePeriodEvent.t) ->
                             child_residence_event.ResidencePeriodEvent.household)
                          (o_filter
                             (fun
                                (child_residence_event:
                                  ResidencePeriodEvent.t) ->
                                (child_residence_event.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                  ((period_spans_more_than_half_year
                                      (child_residence_event.ResidencePeriodEvent.start_date)
                                      (child_residence_event.ResidencePeriodEvent.end_date)
                                      tax_year) &&
                                     (o_fold
                                        (fun
                                           (acc:
                                             bool)
                                           (qualifying_child_result:
                                             IndividualSection152QualifyingChildOutput.t) ->
                                           acc ||
                                             ((qualifying_child_result.IndividualSection152QualifyingChildOutput.is_qualifying_child) &&
                                                (((o_eq_int_int
                                                     ((qualifying_child_result.IndividualSection152QualifyingChildOutput.taxpayer).Individual.id)
                                                     (individual.Individual.id)) &&
                                                    (o_eq_boo_boo
                                                       ((qualifying_child_result.IndividualSection152QualifyingChildOutput.taxpayer).Individual.is_counterfactual)
                                                       (individual.Individual.is_counterfactual))) &&
                                                   (((o_eq_int_int
                                                        ((qualifying_child_result.IndividualSection152QualifyingChildOutput.individual).Individual.id)
                                                        ((child_residence_event.ResidencePeriodEvent.individual).Individual.id)) &&
                                                       (o_eq_boo_boo
                                                          ((qualifying_child_result.IndividualSection152QualifyingChildOutput.individual).Individual.is_counterfactual)
                                                          ((child_residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual))) &&
                                                      (o_fold
                                                         (fun
                                                            (acc__1:
                                                              bool)
                                                            (entitled_individual:
                                                              Individual.t) ->
                                                            acc__1 ||
                                                              (((o_eq_int_int
                                                                   (entitled_individual.Individual.id)
                                                                   ((child_residence_event.ResidencePeriodEvent.individual).Individual.id)) &&
                                                                  (o_eq_boo_boo
                                                                    (entitled_individual.Individual.is_counterfactual)
                                                                    ((child_residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual))) &&
                                                                 (o_fold
                                                                    (
                                                                    fun
                                                                    (acc__2:
                                                                    bool)
                                                                    (individual_residence_event:
                                                                    ResidencePeriodEvent.t) ->
                                                                    acc__2 ||
                                                                    (((o_eq_int_int
                                                                    ((individual_residence_event.ResidencePeriodEvent.individual).Individual.id)
                                                                    (individual.Individual.id)) &&
                                                                    (o_eq_boo_boo
                                                                    ((individual_residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                                                    (individual.Individual.is_counterfactual))) &&
                                                                    (((o_eq_int_int
                                                                    ((individual_residence_event.ResidencePeriodEvent.household).Household.id)
                                                                    ((child_residence_event.ResidencePeriodEvent.household).Household.id)) &&
                                                                    (o_eq_boo_boo
                                                                    ((individual_residence_event.ResidencePeriodEvent.household).Household.is_counterfactual)
                                                                    ((child_residence_event.ResidencePeriodEvent.household).Household.is_counterfactual))) &&
                                                                    ((o_lte_dat_dat
                                                                    (individual_residence_event.ResidencePeriodEvent.start_date)
                                                                    (child_residence_event.ResidencePeriodEvent.end_date)) &&
                                                                    ((o_gte_dat_dat
                                                                    (individual_residence_event.ResidencePeriodEvent.end_date)
                                                                    (child_residence_event.ResidencePeriodEvent.start_date)) &&
                                                                    ((o_lte_dat_dat
                                                                    (individual_residence_event.ResidencePeriodEvent.start_date)
                                                                    year_end) &&
                                                                    (o_gte_dat_dat
                                                                    (individual_residence_event.ResidencePeriodEvent.end_date)
                                                                    year_start)))))))
                                                                    false
                                                                    residence_period_events)))
                                                         false
                                                         individuals_entitled_to_exemptions_under_151)))))
                                        false
                                        qualifying_children)))
                             residence_period_events)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5907; start_column=5;
                         end_line=5932; end_column=38;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2086; start_column=11;
                                       end_line=2086; end_column=43;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2086; start_column=11;
                  end_line=2086; end_column=43;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2086; start_column=11;
                           end_line=2086; end_column=43;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let determination_date__1: date =
    match
      (match determination_date
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5798; start_column=25;
                              end_line=5798; end_column=47;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let spouse :
                          (Individual.t) Optional.t
                          =
                          (section_7703_find_spouse_from_marriage_events
                             individual
                             marriage_events
                             year_end) in
                       (let
                          spouse_death_date_during_year
                          : (date) Optional.t =
                          (section_7703_get_spouse_death_date_during_year
                             spouse death_events
                             tax_year) in
                       (match
                          spouse_death_date_during_year
                        with
                        | Optional.Absent ->
                            year_end
                        | Optional.Present death_date ->
                            death_date)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5798; start_column=5;
                         end_line=5803; end_column=25;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2083; start_column=11;
                                       end_line=2083; end_column=29;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2083; start_column=11;
                  end_line=2083; end_column=29;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2083; start_column=11;
                           end_line=2083; end_column=29;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let spouse_not_member_of_household_last_6_months__1: bool =
    match
      (match
         spouse_not_member_of_household_last_6_months
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=6005; start_column=25;
                              end_line=6005; end_column=47;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let last_6_months_start :
                          date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=6006; start_column=36;
                               end_line=6006; end_column=58;
                               law_headings=["============================= Scope DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "7")
                             (integer_of_string
                             "1")) in
                       (let last_6_months_end :
                          date = year_end in
                       (let
                          spouse_from_tax_return
                          :
                          (Individual.t) Optional.t
                          =
                          (section_7703_get_spouse_from_tax_return
                             individual
                             individual_tax_return)
                       in
                       (match
                          spouse_from_tax_return
                        with
                        | Optional.Absent -> true
                        | Optional.Present spouse ->
                            (o_fold
                               (fun (acc: bool)
                                  (taxpayer_residence_event:
                                    ResidencePeriodEvent.t) ->
                                  acc ||
                                    (((o_eq_int_int
                                         ((taxpayer_residence_event.ResidencePeriodEvent.individual).Individual.id)
                                         (individual.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((taxpayer_residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                           (individual.Individual.is_counterfactual))) &&
                                       ((taxpayer_residence_event.ResidencePeriodEvent.is_member_of_household) &&
                                          ((o_lte_dat_dat
                                              (taxpayer_residence_event.ResidencePeriodEvent.start_date)
                                              last_6_months_end) &&
                                             ((o_gte_dat_dat
                                                 (taxpayer_residence_event.ResidencePeriodEvent.end_date)
                                                 last_6_months_start) &&
                                                (o_not
                                                   (section_7703_is_spouse_member_of_household_last_6_months
                                                      spouse
                                                      (taxpayer_residence_event.ResidencePeriodEvent.household)
                                                      residence_period_events
                                                      last_6_months_start
                                                      last_6_months_end)))))))
                               false
                               residence_period_events)))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=6005; start_column=5;
                         end_line=6023; end_column=11;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2088; start_column=11;
                                       end_line=2088; end_column=55;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2088; start_column=11;
                  end_line=2088; end_column=55;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2088; start_column=11;
                           end_line=2088; end_column=55;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let furnishes_over_one_half_of_household_cost__1: bool =
    match
      (match
         furnishes_over_one_half_of_household_cost
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_gt_int_int
                         (o_length
                            households_maintained_by_individual__1)
                         (integer_of_string "0")),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5988; start_column=5;
                         end_line=5988; end_column=54;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2092; start_column=11;
                                       end_line=2092; end_column=52;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2092; start_column=11;
                  end_line=2092; end_column=52;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2092; start_column=11;
                           end_line=2092; end_column=52;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let maintains_household_with_qualifying_child_for_more_than_half_year__1: bool =
    match
      (match
         maintains_household_with_qualifying_child_for_more_than_half_year
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_gt_int_int
                         (o_length
                            households_with_qualifying_child__1)
                         (integer_of_string "0")),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5938; start_column=5;
                         end_line=5938; end_column=51;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2091; start_column=11;
                                       end_line=2091; end_column=76;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2091; start_column=11;
                  end_line=2091; end_column=76;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2091; start_column=11;
                           end_line=2091; end_column=76;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_legally_separated__1: bool =
    match
      (match is_legally_separated
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5848; start_column=25;
                              end_line=5848; end_column=47;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let spouse :
                          (Individual.t) Optional.t
                          =
                          (section_7703_find_spouse_from_marriage_events
                             individual
                             marriage_events
                             year_end) in
                       (match spouse
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present s ->
                            (o_fold
                               (fun (acc: bool)
                                  (divorce_event:
                                    DivorceOrLegalSeparationEvent.t) ->
                                  acc ||
                                    ((((o_eq_int_int
                                          ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                          (individual.Individual.id)) &&
                                         (o_eq_boo_boo
                                            ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                            (individual.Individual.is_counterfactual))) ||
                                        ((o_eq_int_int
                                            ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                            (individual.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                              (individual.Individual.is_counterfactual)))) &&
                                       ((((o_eq_int_int
                                             ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                             (s.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                               (s.Individual.is_counterfactual))) ||
                                           ((o_eq_int_int
                                               ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                               (s.Individual.id)) &&
                                              (o_eq_boo_boo
                                                 ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                                 (s.Individual.is_counterfactual)))) &&
                                          ((o_lte_dat_dat
                                              (divorce_event.DivorceOrLegalSeparationEvent.decree_date)
                                              determination_date__1) &&
                                             ((o_eq
                                                 (divorce_event.DivorceOrLegalSeparationEvent.decree_type)
                                                 (DecreeType.Divorce)) ||
                                                (o_eq
                                                   (divorce_event.DivorceOrLegalSeparationEvent.decree_type)
                                                   (DecreeType.SeparateMaintenance)))))))
                               false
                               divorce_or_legal_separation_events)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5848; start_column=5;
                         end_line=5860; end_column=22;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2085; start_column=11;
                                       end_line=2085; end_column=31;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2085; start_column=11;
                  end_line=2085; end_column=31;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2085; start_column=11;
                           end_line=2085; end_column=31;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_married_at_determination_date__1: bool =
    match
      (match is_married_at_determination_date
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5814; start_column=25;
                              end_line=5814; end_column=47;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let spouse :
                          (Individual.t) Optional.t
                          =
                          (section_7703_find_spouse_from_marriage_events
                             individual
                             marriage_events
                             year_end) in
                       (match spouse
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present _ ->
                            ((o_not
                                (section_7703_spouse_died_before_date
                                   spouse
                                   death_events
                                   determination_date__1)) &&
                               (o_not
                                  is_legally_separated__1))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5814; start_column=5;
                         end_line=5827; end_column=22;
                         law_headings=["============================= Scope DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2084; start_column=11;
                                       end_line=2084; end_column=43;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2084; start_column=11;
                  end_line=2084; end_column=43;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2084; start_column=11;
                           end_line=2084; end_column=43;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let subsection_b_exception_applies__1: bool =
    match
      (match subsection_b_exception_applies
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     ( if
                        (is_married_at_determination_date__1 &&
                           ((o_not
                               is_legally_separated__1) &&
                              ((section_7703_files_separate_return
                                  individual
                                  individual_tax_return) &&
                                 (maintains_household_with_qualifying_child_for_more_than_half_year__1 &&
                                    (furnishes_over_one_half_of_household_cost__1 &&
                                       spouse_not_member_of_household_last_6_months__1)))))
                        then
                        (Optional.Present
                           (true,
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=6063; start_column=22;
                               end_line=6063; end_column=26;
                               law_headings=["============================= Scope DEFINITIONS ============================="]})))
                        else (Optional.Absent))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (false,
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=6047; start_column=52;
                              end_line=6047; end_column=57;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2089; start_column=11;
                                       end_line=2089; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2089; start_column=11;
                  end_line=2089; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2089; start_column=11;
                           end_line=2089; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_married_for_tax_purposes__1: bool =
    match
      (match is_married_for_tax_purposes
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (match
                        ( if
                           subsection_b_exception_applies__1
                           then
                           (Optional.Present
                              (false,
                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                  start_line=6070; start_column=22;
                                  end_line=6070; end_column=27;
                                  law_headings=["============================= Scope DEFINITIONS ============================="]})))
                           else (Optional.Absent))
                      with
                      | Optional.Absent ->
                          ( if
                             (is_married_at_determination_date__1 &&
                                (o_not
                                   is_legally_separated__1))
                             then
                             (Optional.Present
                                (true,
                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                    start_line=5883; start_column=22;
                                    end_line=5883; end_column=26;
                                    law_headings=["============================= Scope DEFINITIONS ============================="]})))
                             else
                             (Optional.Absent))
                      | Optional.Present x ->
                          (Optional.Present x))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (false,
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5874; start_column=49;
                              end_line=5874; end_column=54;
                              law_headings=["============================= Scope DEFINITIONS ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2090; start_column=11;
                                       end_line=2090; end_column=38;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2090; start_column=11;
                  end_line=2090; end_column=38;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2090; start_column=11;
                           end_line=2090; end_column=38;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualSection7703MaritalStatusOutput.t =
    match
      (Optional.Present
         (({IndividualSection7703MaritalStatusOutput.individual =
              individual;
              IndividualSection7703MaritalStatusOutput.tax_year =
                tax_year;
              IndividualSection7703MaritalStatusOutput.determination_date_7703_a_1 =
                determination_date__1;
              IndividualSection7703MaritalStatusOutput.is_married_7703_a_1 =
                is_married_at_determination_date__1;
              IndividualSection7703MaritalStatusOutput.is_legally_separated_7703_a_2 =
                is_legally_separated__1;
              IndividualSection7703MaritalStatusOutput.maintains_household_7703_b_1 =
                maintains_household_with_qualifying_child_for_more_than_half_year__1;
              IndividualSection7703MaritalStatusOutput.furnishes_over_one_half_cost_7703_b_2 =
                furnishes_over_one_half_of_household_cost__1;
              IndividualSection7703MaritalStatusOutput.spouse_not_member_last_6_months_7703_b_3 =
                spouse_not_member_of_household_last_6_months__1;
              IndividualSection7703MaritalStatusOutput.considered_not_married_7703_b =
                subsection_b_exception_applies__1;
              IndividualSection7703MaritalStatusOutput.is_married_for_tax_purposes_7703 =
                is_married_for_tax_purposes__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=2107; start_column=5;
             end_line=2118; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2094; start_column=10;
                           end_line=2094; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualSection7703MaritalStatus.main_output =
     main_output}

(* Scope IndividualSection152QualifyingChild *)
let individual_section152_qualifying_child :
  IndividualSection152QualifyingChild_in.t -> IndividualSection152QualifyingChild.t =
  fun individual_section152_qualifying_child_in ->
  let individual: Individual.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.individual_in
    in
  let taxpayer: Individual.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.taxpayer_in
    in
  let tax_year: integer =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.tax_year_in
    in
  let family_relationship_events: FamilyRelationshipEvent.t
                                  array =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.family_relationship_events_in
    in
  let birth_events: BirthEvent.t array =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.birth_events_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.residence_period_events_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.tax_return_events_in
    in
  let relationship_requirement_met: ((bool *
                                       code_location)) Optional.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.relationship_requirement_met_in
    in
  let principal_place_of_abode_requirement_met: ((bool
                                                   *
                                                   code_location)) Optional.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.principal_place_of_abode_requirement_met_in
    in
  let age_requirement_met: ((bool *
                              code_location)) Optional.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.age_requirement_met_in
    in
  let joint_return_exception_applies: ((bool *
                                         code_location)) Optional.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.joint_return_exception_applies_in
    in
  let is_qualifying_child: ((bool *
                              code_location)) Optional.t =
    individual_section152_qualifying_child_in.IndividualSection152QualifyingChild_in.is_qualifying_child_in
    in
  let relationship_requirement_met__1: bool =
    match
      (match relationship_requirement_met
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_fold
                         (fun (acc: bool)
                            (rel_event:
                              FamilyRelationshipEvent.t) ->
                            acc ||
                              (((o_eq_int_int
                                   ((rel_event.FamilyRelationshipEvent.person).Individual.id)
                                   (taxpayer.Individual.id)) &&
                                  (o_eq_boo_boo
                                     ((rel_event.FamilyRelationshipEvent.person).Individual.is_counterfactual)
                                     (taxpayer.Individual.is_counterfactual))) &&
                                 (((o_eq_int_int
                                      ((rel_event.FamilyRelationshipEvent.relative).Individual.id)
                                      (individual.Individual.id)) &&
                                     (o_eq_boo_boo
                                        ((rel_event.FamilyRelationshipEvent.relative).Individual.is_counterfactual)
                                        (individual.Individual.is_counterfactual))) &&
                                    ((o_lte_dat_dat
                                        (rel_event.FamilyRelationshipEvent.start_date)
                                        ((Date_en.of_year_month_day)
                                           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                             start_line=5432; start_column=35;
                                             end_line=5432; end_column=57;
                                             law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                                           tax_year
                                           (integer_of_string
                                           "12")
                                           (integer_of_string
                                           "31"))) &&
                                       ((o_eq
                                           (rel_event.FamilyRelationshipEvent.relationship_type)
                                           (FamilyRelationshipType.Child)) ||
                                          ((o_eq
                                              (rel_event.FamilyRelationshipEvent.relationship_type)
                                              (FamilyRelationshipType.DescendantOfChild)) ||
                                             ((o_eq
                                                 (rel_event.FamilyRelationshipEvent.relationship_type)
                                                 (FamilyRelationshipType.Brother)) ||
                                                ((o_eq
                                                    (rel_event.FamilyRelationshipEvent.relationship_type)
                                                    (FamilyRelationshipType.Sister)) ||
                                                   ((o_eq
                                                       (rel_event.FamilyRelationshipEvent.relationship_type)
                                                       (FamilyRelationshipType.Stepbrother)) ||
                                                      ((o_eq
                                                          (rel_event.FamilyRelationshipEvent.relationship_type)
                                                          (FamilyRelationshipType.Stepsister)) ||
                                                         (o_eq
                                                            (rel_event.FamilyRelationshipEvent.relationship_type)
                                                            (FamilyRelationshipType.DescendantOfSibling))))))))))))
                         false
                         family_relationship_events),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5429; start_column=5;
                         end_line=5443; end_column=8;
                         law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1905; start_column=11;
                                       end_line=1905; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1905; start_column=11;
                  end_line=1905; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1905; start_column=11;
                           end_line=1905; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let age_requirement_met__1: bool =
    match
      (match age_requirement_met
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5467; start_column=25;
                              end_line=5467; end_column=47;
                              law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "12")
                            (integer_of_string
                            "31")) in
                       (let individual_birth_date
                          : date =
                          ( if
                             (o_fold
                                (fun (acc: bool)
                                   (birth_event:
                                     BirthEvent.t) ->
                                   acc ||
                                     ((o_eq_int_int
                                         ((birth_event.BirthEvent.individual).Individual.id)
                                         (individual.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((birth_event.BirthEvent.individual).Individual.is_counterfactual)
                                           (individual.Individual.is_counterfactual))))
                                false
                                birth_events)
                             then
                             (o_reduce
                                (fun (min1: date)
                                   (min2: date) ->
                                    if
                                     (o_lt_dat_dat
                                        min1 min2)
                                     then min1
                                     else min2)
                                (fun (_: unit) ->
                                   raise
                                   (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                        start_line=5471; start_column=9;
                                                        end_line=5471; end_column=16;
                                                        law_headings=
                                                        ["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]}])))
                                (o_map
                                   (fun
                                      (birth_event:
                                        BirthEvent.t) ->
                                      birth_event.BirthEvent.birth_date)
                                   (o_filter
                                      (fun
                                         (birth_event:
                                           BirthEvent.t) ->
                                         (o_eq_int_int
                                            ((birth_event.BirthEvent.individual).Individual.id)
                                            (individual.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((birth_event.BirthEvent.individual).Individual.is_counterfactual)
                                              (individual.Individual.is_counterfactual)))
                                      birth_events)))
                             else
                             ((Date_en.of_year_month_day)
                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                  start_line=5472; start_column=12;
                                  end_line=5472; end_column=34;
                                  law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                                (integer_of_string
                                "1900")
                                (integer_of_string
                                "1")
                                (integer_of_string
                                "1"))) in
                       (let taxpayer_birth_date :
                          date =
                          ( if
                             (o_fold
                                (fun (acc: bool)
                                   (birth_event:
                                     BirthEvent.t) ->
                                   acc ||
                                     ((o_eq_int_int
                                         ((birth_event.BirthEvent.individual).Individual.id)
                                         (taxpayer.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((birth_event.BirthEvent.individual).Individual.is_counterfactual)
                                           (taxpayer.Individual.is_counterfactual))))
                                false
                                birth_events)
                             then
                             (o_reduce
                                (fun (min1: date)
                                   (min2: date) ->
                                    if
                                     (o_lt_dat_dat
                                        min1 min2)
                                     then min1
                                     else min2)
                                (fun (_: unit) ->
                                   raise
                                   (Error (ListEmpty, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                        start_line=5475; start_column=7;
                                                        end_line=5475; end_column=14;
                                                        law_headings=
                                                        ["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]}])))
                                (o_map
                                   (fun
                                      (birth_event:
                                        BirthEvent.t) ->
                                      birth_event.BirthEvent.birth_date)
                                   (o_filter
                                      (fun
                                         (birth_event:
                                           BirthEvent.t) ->
                                         (o_eq_int_int
                                            ((birth_event.BirthEvent.individual).Individual.id)
                                            (taxpayer.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((birth_event.BirthEvent.individual).Individual.is_counterfactual)
                                              (taxpayer.Individual.is_counterfactual)))
                                      birth_events)))
                             else
                             ((Date_en.of_year_month_day)
                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                  start_line=5476; start_column=10;
                                  end_line=5476; end_column=32;
                                  law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                                (integer_of_string
                                "1900")
                                (integer_of_string
                                "1")
                                (integer_of_string
                                "1"))) in
                       ((o_gt_dat_dat
                           individual_birth_date
                           taxpayer_birth_date) &&
                          ((Date_en.is_young_enough_rounding_down)
                             individual_birth_date
                             (duration_of_numbers (25) (0) (0))
                             year_end))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5467; start_column=5;
                         end_line=5481; end_column=87;
                         law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1907; start_column=11;
                                       end_line=1907; end_column=30;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1907; start_column=11;
                  end_line=1907; end_column=30;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1907; start_column=11;
                           end_line=1907; end_column=30;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let principal_place_of_abode_requirement_met__1: bool =
    match
      (match
         principal_place_of_abode_requirement_met
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_start : date =
                         ((Date_en.of_year_month_day)
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=5511; start_column=27;
                              end_line=5511; end_column=49;
                              law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                            tax_year
                            (integer_of_string
                            "1")
                            (integer_of_string
                            "1")) in
                       (let year_end : date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5512; start_column=25;
                               end_line=5512; end_column=47;
                               law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "12")
                             (integer_of_string
                             "31")) in
                       (let _ : date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=5513; start_column=30;
                               end_line=5513; end_column=52;
                               law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})
                             tax_year
                             (integer_of_string
                             "6")
                             (integer_of_string
                             "30")) in
                       (o_fold
                          (fun (acc: bool)
                             (taxpayer_residence:
                               ResidencePeriodEvent.t) ->
                             acc ||
                               (((o_eq_int_int
                                    ((taxpayer_residence.ResidencePeriodEvent.individual).Individual.id)
                                    (taxpayer.Individual.id)) &&
                                   (o_eq_boo_boo
                                      ((taxpayer_residence.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                      (taxpayer.Individual.is_counterfactual))) &&
                                  ((taxpayer_residence.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                     ((o_lte_dat_dat
                                         (taxpayer_residence.ResidencePeriodEvent.start_date)
                                         year_end) &&
                                        ((o_gte_dat_dat
                                            (taxpayer_residence.ResidencePeriodEvent.end_date)
                                            year_start) &&
                                           (o_fold
                                              (fun
                                                 (acc__1:
                                                   bool)
                                                 (individual_residence:
                                                   ResidencePeriodEvent.t) ->
                                                 acc__1 ||
                                                   (((o_eq_int_int
                                                        ((individual_residence.ResidencePeriodEvent.individual).Individual.id)
                                                        (individual.Individual.id)) &&
                                                       (o_eq_boo_boo
                                                          ((individual_residence.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                                          (individual.Individual.is_counterfactual))) &&
                                                      (((o_eq_int_int
                                                           ((individual_residence.ResidencePeriodEvent.household).Household.id)
                                                           ((taxpayer_residence.ResidencePeriodEvent.household).Household.id)) &&
                                                          (o_eq_boo_boo
                                                             ((individual_residence.ResidencePeriodEvent.household).Household.is_counterfactual)
                                                             ((taxpayer_residence.ResidencePeriodEvent.household).Household.is_counterfactual))) &&
                                                         ((individual_residence.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                                            (period_spans_more_than_half_year
                                                               (individual_residence.ResidencePeriodEvent.start_date)
                                                               (individual_residence.ResidencePeriodEvent.end_date)
                                                               tax_year)))))
                                              false
                                              residence_period_events))))))
                          false
                          residence_period_events)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5511; start_column=5;
                         end_line=5525; end_column=121;
                         law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1906; start_column=11;
                                       end_line=1906; end_column=51;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1906; start_column=11;
                  end_line=1906; end_column=51;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1906; start_column=11;
                           end_line=1906; end_column=51;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let joint_return_exception_applies__1: bool =
    match
      (match joint_return_exception_applies
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_fold
                         (fun (acc: bool)
                            (event:
                              TaxReturnEvent.t) ->
                            acc ||
                              (((o_eq_int_int
                                   ((event.TaxReturnEvent.individual).Individual.id)
                                   (individual.Individual.id)) &&
                                  (o_eq_boo_boo
                                     ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                     (individual.Individual.is_counterfactual))) &&
                                 ((o_eq_int_int
                                     (event.TaxReturnEvent.tax_year)
                                     tax_year) &&
                                    ((event.TaxReturnEvent.filed_joint_return) &&
                                       (o_not
                                          (event.TaxReturnEvent.is_only_for_refund_claim))))))
                         false tax_return_events),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5545; start_column=5;
                         end_line=5549; end_column=45;
                         law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1908; start_column=11;
                                       end_line=1908; end_column=41;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1908; start_column=11;
                  end_line=1908; end_column=41;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1908; start_column=11;
                           end_line=1908; end_column=41;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_qualifying_child__1: bool =
    match
      (match is_qualifying_child
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((relationship_requirement_met__1 &&
                         (principal_place_of_abode_requirement_met__1 &&
                            (age_requirement_met__1 &&
                               (o_not
                                  joint_return_exception_applies__1)))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5568; start_column=5;
                         end_line=5571; end_column=43;
                         law_headings=["============================= SECTION 152 QUALIFYING CHILD DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1909; start_column=11;
                                       end_line=1909; end_column=30;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1909; start_column=11;
                  end_line=1909; end_column=30;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1909; start_column=11;
                           end_line=1909; end_column=30;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualSection152QualifyingChildOutput.t =
    match
      (Optional.Present
         (({IndividualSection152QualifyingChildOutput.individual =
              individual;
              IndividualSection152QualifyingChildOutput.taxpayer =
                taxpayer;
              IndividualSection152QualifyingChildOutput.is_qualifying_child =
                is_qualifying_child__1;
              IndividualSection152QualifyingChildOutput.bears_relationship_152_c_1_A =
                relationship_requirement_met__1;
              IndividualSection152QualifyingChildOutput.has_same_principal_place_of_abode_152_c_1_B =
                principal_place_of_abode_requirement_met__1;
              IndividualSection152QualifyingChildOutput.meets_age_requirements_152_c_1_C =
                age_requirement_met__1;
              IndividualSection152QualifyingChildOutput.has_not_filed_joint_return_152_c_1_E =
                (o_not
                   joint_return_exception_applies__1)}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1979; start_column=5;
             end_line=1987; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1911; start_column=10;
                           end_line=1911; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualSection152QualifyingChild.main_output =
     main_output}

(* Scope IndividualSection152Dependents *)
let individual_section152_dependents :
  IndividualSection152Dependents_in.t -> IndividualSection152Dependents.t =
  fun individual_section152_dependents_in ->
  let taxpayer: Individual.t =
    individual_section152_dependents_in.IndividualSection152Dependents_in.taxpayer_in
    in
  let tax_year: integer =
    individual_section152_dependents_in.IndividualSection152Dependents_in.tax_year_in
    in
  let individuals: Individual.t array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.individuals_in
    in
  let family_relationship_events: FamilyRelationshipEvent.t
                                  array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.family_relationship_events_in
    in
  let birth_events: BirthEvent.t array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.birth_events_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.residence_period_events_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.tax_return_events_in
    in
  let income_events: IncomeEvent.t array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.income_events_in
    in
  let marriage_events: MarriageEvent.t array =
    individual_section152_dependents_in.IndividualSection152Dependents_in.marriage_events_in
    in
  let qualifying_children: (((IndividualSection152QualifyingChildOutput.t
                              array) *
                              code_location)) Optional.t =
    individual_section152_dependents_in.IndividualSection152Dependents_in.qualifying_children_in
    in
  let qualifying_relatives: (((IndividualSection152QualifyingRelativeOutput.t
                               array) *
                               code_location)) Optional.t =
    individual_section152_dependents_in.IndividualSection152Dependents_in.qualifying_relatives_in
    in
  let dependents_initial: (((Individual.t array)
                             * code_location)) Optional.t =
    individual_section152_dependents_in.IndividualSection152Dependents_in.dependents_initial_in
    in
  let individual_dependent_statuses: (((IndividualDependentStatus.t
                                        array) *
                                        code_location)) Optional.t =
    individual_section152_dependents_in.IndividualSection152Dependents_in.individual_dependent_statuses_in
    in
  let qualifying_children__1: IndividualSection152QualifyingChildOutput.t
                              array =
    match
      (match qualifying_children
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let potential_individuals
                         : Individual.t array =
                         (o_filter
                            (fun
                               (individual:
                                 Individual.t) ->
                               o_not
                                 ((o_eq_int_int
                                     (individual.Individual.id)
                                     (taxpayer.Individual.id)) &&
                                    (o_eq_boo_boo
                                       (individual.Individual.is_counterfactual)
                                       (taxpayer.Individual.is_counterfactual))))
                            individuals) in
                       (o_map
                          (fun
                             (individual:
                               Individual.t) ->
                             (let result :
                                IndividualSection152QualifyingChild.t
                                =
                                (individual_section152_qualifying_child
                                   ({IndividualSection152QualifyingChild_in.individual_in =
                                       individual;
                                       IndividualSection152QualifyingChild_in.taxpayer_in =
                                         taxpayer;
                                       IndividualSection152QualifyingChild_in.tax_year_in =
                                         tax_year;
                                       IndividualSection152QualifyingChild_in.family_relationship_events_in =
                                         family_relationship_events;
                                       IndividualSection152QualifyingChild_in.birth_events_in =
                                         birth_events;
                                       IndividualSection152QualifyingChild_in.residence_period_events_in =
                                         residence_period_events;
                                       IndividualSection152QualifyingChild_in.tax_return_events_in =
                                         tax_return_events;
                                       IndividualSection152QualifyingChild_in.relationship_requirement_met_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingChild_in.principal_place_of_abode_requirement_met_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingChild_in.age_requirement_met_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingChild_in.joint_return_exception_applies_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingChild_in.is_qualifying_child_in =
                                         (Optional.Absent)}))
                             in
                             (let result__1 :
                                IndividualSection152QualifyingChild.t
                                =
                                ({IndividualSection152QualifyingChild.main_output =
                                    (result.IndividualSection152QualifyingChild.main_output)})
                             in
                             ( if true then
                                result__1 else
                                result__1))).IndividualSection152QualifyingChild.main_output)
                          potential_individuals)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5212; start_column=5;
                         end_line=5227; end_column=20;
                         law_headings=["============================= SECTION 152 IRCSIMPLIFIED DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1874; start_column=11;
                                       end_line=1874; end_column=30;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1874; start_column=11;
                  end_line=1874; end_column=30;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1874; start_column=11;
                           end_line=1874; end_column=30;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let qualifying_relatives__1: IndividualSection152QualifyingRelativeOutput.t
                               array =
    match
      (match qualifying_relatives
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let potential_individuals
                         : Individual.t array =
                         (o_filter
                            (fun
                               (individual:
                                 Individual.t) ->
                               o_not
                                 ((o_eq_int_int
                                     (individual.Individual.id)
                                     (taxpayer.Individual.id)) &&
                                    (o_eq_boo_boo
                                       (individual.Individual.is_counterfactual)
                                       (taxpayer.Individual.is_counterfactual))))
                            individuals) in
                       (o_map
                          (fun
                             (individual:
                               Individual.t) ->
                             (let result :
                                IndividualSection152QualifyingRelative.t
                                =
                                (individual_section152_qualifying_relative
                                   ({IndividualSection152QualifyingRelative_in.individual_in =
                                       individual;
                                       IndividualSection152QualifyingRelative_in.taxpayer_in =
                                         taxpayer;
                                       IndividualSection152QualifyingRelative_in.tax_year_in =
                                         tax_year;
                                       IndividualSection152QualifyingRelative_in.family_relationship_events_in =
                                         family_relationship_events;
                                       IndividualSection152QualifyingRelative_in.residence_period_events_in =
                                         residence_period_events;
                                       IndividualSection152QualifyingRelative_in.qualifying_child_results_in =
                                         qualifying_children__1;
                                       IndividualSection152QualifyingRelative_in.tax_return_events_in =
                                         tax_return_events;
                                       IndividualSection152QualifyingRelative_in.income_events_in =
                                         income_events;
                                       IndividualSection152QualifyingRelative_in.marriage_events_in =
                                         marriage_events;
                                       IndividualSection152QualifyingRelative_in.relationship_requirement_met_H_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingRelative_in.relationship_requirement_met_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingRelative_in.no_income_requirement_met_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingRelative_in.not_qualifying_child_requirement_met_in =
                                         (Optional.Absent);
                                       IndividualSection152QualifyingRelative_in.is_qualifying_relative_in =
                                         (Optional.Absent)}))
                             in
                             (let result__1 :
                                IndividualSection152QualifyingRelative.t
                                =
                                ({IndividualSection152QualifyingRelative.main_output =
                                    (result.IndividualSection152QualifyingRelative.main_output)})
                             in
                             ( if true then
                                result__1 else
                                result__1))).IndividualSection152QualifyingRelative.main_output)
                          potential_individuals)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5231; start_column=5;
                         end_line=5248; end_column=20;
                         law_headings=["============================= SECTION 152 IRCSIMPLIFIED DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1875; start_column=11;
                                       end_line=1875; end_column=31;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1875; start_column=11;
                  end_line=1875; end_column=31;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1875; start_column=11;
                           end_line=1875; end_column=31;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let individual_dependent_statuses__1: IndividualDependentStatus.t
                                        array =
    match
      (match individual_dependent_statuses
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let potential_individuals
                         : Individual.t array =
                         (o_filter
                            (fun
                               (individual:
                                 Individual.t) ->
                               o_not
                                 ((o_eq_int_int
                                     (individual.Individual.id)
                                     (taxpayer.Individual.id)) &&
                                    (o_eq_boo_boo
                                       (individual.Individual.is_counterfactual)
                                       (taxpayer.Individual.is_counterfactual))))
                            individuals) in
                       (o_map
                          (fun
                             (individual:
                               Individual.t) ->
                             (let
                                is_qualifying_child_local
                                : bool =
                                (o_fold
                                   (fun
                                      (acc: bool)
                                      (result:
                                        IndividualSection152QualifyingChildOutput.t) ->
                                      acc ||
                                        (((o_eq_int_int
                                             ((result.IndividualSection152QualifyingChildOutput.individual).Individual.id)
                                             (individual.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((result.IndividualSection152QualifyingChildOutput.individual).Individual.is_counterfactual)
                                               (individual.Individual.is_counterfactual))) &&
                                           (result.IndividualSection152QualifyingChildOutput.is_qualifying_child)))
                                   false
                                   qualifying_children__1)
                             in
                             (let
                                is_qualifying_relative_local
                                : bool =
                                (o_fold
                                   (fun
                                      (acc: bool)
                                      (result:
                                        IndividualSection152QualifyingRelativeOutput.t) ->
                                      acc ||
                                        (((o_eq_int_int
                                             ((result.IndividualSection152QualifyingRelativeOutput.individual).Individual.id)
                                             (individual.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((result.IndividualSection152QualifyingRelativeOutput.individual).Individual.is_counterfactual)
                                               (individual.Individual.is_counterfactual))) &&
                                           (result.IndividualSection152QualifyingRelativeOutput.is_qualifying_relative)))
                                   false
                                   qualifying_relatives__1)
                             in
                             (let
                                is_excepted_under_152_b_2_local
                                : bool =
                                (o_fold
                                   (fun
                                      (acc: bool)
                                      (event:
                                        TaxReturnEvent.t) ->
                                      acc ||
                                        (((o_eq_int_int
                                             ((event.TaxReturnEvent.individual).Individual.id)
                                             (individual.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                               (individual.Individual.is_counterfactual))) &&
                                           ((o_eq_int_int
                                               (event.TaxReturnEvent.tax_year)
                                               tax_year) &&
                                              (event.TaxReturnEvent.filed_joint_return))))
                                   false
                                   tax_return_events)
                             in
                             (let
                                is_ineligible_under_152_b_1_local
                                : bool =
                                (o_fold
                                   (fun
                                      (acc: bool)
                                      (event:
                                        TaxReturnEvent.t) ->
                                      acc ||
                                        ((o_not
                                            ((o_eq_int_int
                                                ((event.TaxReturnEvent.individual).Individual.id)
                                                (taxpayer.Individual.id)) &&
                                               (o_eq_boo_boo
                                                  ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                                  (taxpayer.Individual.is_counterfactual)))) &&
                                           ((o_eq_int_int
                                               (event.TaxReturnEvent.tax_year)
                                               tax_year) &&
                                              (o_fold
                                                 (fun
                                                    (acc__1:
                                                      bool)
                                                    (dependent:
                                                      Individual.t) ->
                                                    acc__1 ||
                                                      ((o_eq_int_int
                                                          (dependent.Individual.id)
                                                          (individual.Individual.id)) &&
                                                         (o_eq_boo_boo
                                                            (dependent.Individual.is_counterfactual)
                                                            (individual.Individual.is_counterfactual))))
                                                 false
                                                 (event.TaxReturnEvent.dependents)))))
                                   false
                                   tax_return_events)
                             in
                             ({IndividualDependentStatus.individual =
                                 individual;
                                 IndividualDependentStatus.is_qualifying_child =
                                   is_qualifying_child_local;
                                 IndividualDependentStatus.is_qualifying_relative =
                                   is_qualifying_relative_local;
                                 IndividualDependentStatus.is_excepted_under_152_b_2 =
                                   is_excepted_under_152_b_2_local;
                                 IndividualDependentStatus.is_ineligible_under_152_b_1 =
                                   is_ineligible_under_152_b_1_local}))))))
                          potential_individuals)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5362; start_column=5;
                         end_line=5395; end_column=8;
                         law_headings=["============================= SECTION 152 IRCSIMPLIFIED DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1880; start_column=11;
                                       end_line=1880; end_column=40;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1880; start_column=11;
                  end_line=1880; end_column=40;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1880; start_column=11;
                           end_line=1880; end_column=40;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let dependents_initial__1: Individual.t array =
    match
      (match dependents_initial
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let
                         qualifying_children_individuals
                         : Individual.t array =
                         (o_map
                            (fun
                               (result:
                                 IndividualSection152QualifyingChildOutput.t) ->
                               result.IndividualSection152QualifyingChildOutput.individual)
                            (o_filter
                               (fun
                                  (result:
                                    IndividualSection152QualifyingChildOutput.t) ->
                                  result.IndividualSection152QualifyingChildOutput.is_qualifying_child)
                               qualifying_children__1))
                       in
                       (let
                          qualifying_relatives_individuals
                          : Individual.t array =
                          (o_map
                             (fun
                                (result:
                                  IndividualSection152QualifyingRelativeOutput.t) ->
                                result.IndividualSection152QualifyingRelativeOutput.individual)
                             (o_filter
                                (fun
                                   (result:
                                     IndividualSection152QualifyingRelativeOutput.t) ->
                                   result.IndividualSection152QualifyingRelativeOutput.is_qualifying_relative)
                                qualifying_relatives__1))
                       in
                       (o_concat
                          qualifying_children_individuals
                          qualifying_relatives_individuals))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=5254; start_column=5;
                         end_line=5260; end_column=72;
                         law_headings=["============================= SECTION 152 IRCSIMPLIFIED DEFINITIONS ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1876; start_column=11;
                                       end_line=1876; end_column=21;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1876; start_column=11;
                  end_line=1876; end_column=21;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1876; start_column=11;
                           end_line=1876; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let dependents_after_152b1: Individual.t array =
    match
      (Optional.Present
         ((let initial_dependents :
             Individual.t array =
             (let qualifying_children_individuals
                : Individual.t array =
                (o_map
                   (fun
                      (result:
                        IndividualSection152QualifyingChildOutput.t) ->
                      result.IndividualSection152QualifyingChildOutput.individual)
                   (o_filter
                      (fun
                         (result:
                           IndividualSection152QualifyingChildOutput.t) ->
                         result.IndividualSection152QualifyingChildOutput.is_qualifying_child)
                      qualifying_children__1)) in
             (let
                qualifying_relatives_individuals
                : Individual.t array =
                (o_map
                   (fun
                      (result:
                        IndividualSection152QualifyingRelativeOutput.t) ->
                      result.IndividualSection152QualifyingRelativeOutput.individual)
                   (o_filter
                      (fun
                         (result:
                           IndividualSection152QualifyingRelativeOutput.t) ->
                         result.IndividualSection152QualifyingRelativeOutput.is_qualifying_relative)
                      qualifying_relatives__1))
             in
             (o_concat
                qualifying_children_individuals
                qualifying_relatives_individuals)))
           in
           (let is_dependent_of_another_taxpayer
              : bool =
              (o_fold
                 (fun (acc: bool)
                    (event: TaxReturnEvent.t) ->
                    acc ||
                      ((o_not
                          ((o_eq_int_int
                              ((event.TaxReturnEvent.individual).Individual.id)
                              (taxpayer.Individual.id)) &&
                             (o_eq_boo_boo
                                ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                (taxpayer.Individual.is_counterfactual)))) &&
                         ((o_eq_int_int
                             (event.TaxReturnEvent.tax_year)
                             tax_year) &&
                            (o_fold
                               (fun
                                  (acc__1: bool)
                                  (dependent:
                                    Individual.t) ->
                                  acc__1 ||
                                    ((o_eq_int_int
                                        (dependent.Individual.id)
                                        (taxpayer.Individual.id)) &&
                                       (o_eq_boo_boo
                                          (dependent.Individual.is_counterfactual)
                                          (taxpayer.Individual.is_counterfactual))))
                               false
                               (event.TaxReturnEvent.dependents)))))
                 false tax_return_events) in
           ( if is_dependent_of_another_taxpayer
              then ([||]) else initial_dependents))),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=5288; start_column=5;
             end_line=5306; end_column=25;
             law_headings=["============================= SECTION 152 IRCSIMPLIFIED DEFINITIONS ============================="]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1876; start_column=11;
                           end_line=1876; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let dependents_after_152b2: Individual.t array =
    match
      (Optional.Present
         ((let initial_dependents :
             Individual.t array =
             (let qualifying_children_individuals
                : Individual.t array =
                (o_map
                   (fun
                      (result:
                        IndividualSection152QualifyingChildOutput.t) ->
                      result.IndividualSection152QualifyingChildOutput.individual)
                   (o_filter
                      (fun
                         (result:
                           IndividualSection152QualifyingChildOutput.t) ->
                         result.IndividualSection152QualifyingChildOutput.is_qualifying_child)
                      qualifying_children__1)) in
             (let
                qualifying_relatives_individuals
                : Individual.t array =
                (o_map
                   (fun
                      (result:
                        IndividualSection152QualifyingRelativeOutput.t) ->
                      result.IndividualSection152QualifyingRelativeOutput.individual)
                   (o_filter
                      (fun
                         (result:
                           IndividualSection152QualifyingRelativeOutput.t) ->
                         result.IndividualSection152QualifyingRelativeOutput.is_qualifying_relative)
                      qualifying_relatives__1))
             in
             (o_concat
                qualifying_children_individuals
                qualifying_relatives_individuals)))
           in
           (let dependents_after_b1 :
              Individual.t array =
              (let
                 is_dependent_of_another_taxpayer
                 : bool =
                 (o_fold
                    (fun (acc: bool)
                       (event: TaxReturnEvent.t) ->
                       acc ||
                         ((o_not
                             ((o_eq_int_int
                                 ((event.TaxReturnEvent.individual).Individual.id)
                                 (taxpayer.Individual.id)) &&
                                (o_eq_boo_boo
                                   ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                   (taxpayer.Individual.is_counterfactual)))) &&
                            ((o_eq_int_int
                                (event.TaxReturnEvent.tax_year)
                                tax_year) &&
                               (o_fold
                                  (fun
                                     (acc__1:
                                       bool)
                                     (dependent:
                                       Individual.t) ->
                                     acc__1 ||
                                       ((o_eq_int_int
                                           (dependent.Individual.id)
                                           (taxpayer.Individual.id)) &&
                                          (o_eq_boo_boo
                                             (dependent.Individual.is_counterfactual)
                                             (taxpayer.Individual.is_counterfactual))))
                                  false
                                  (event.TaxReturnEvent.dependents)))))
                    false tax_return_events) in
              ( if
                 is_dependent_of_another_taxpayer
                 then ([||]) else
                 initial_dependents)) in
           (o_filter
              (fun (individual: Individual.t) ->
                 o_not
                   (o_fold
                      (fun (acc: bool)
                         (event:
                           TaxReturnEvent.t) ->
                         acc ||
                           (((o_eq_int_int
                                ((event.TaxReturnEvent.individual).Individual.id)
                                (individual.Individual.id)) &&
                               (o_eq_boo_boo
                                  ((event.TaxReturnEvent.individual).Individual.is_counterfactual)
                                  (individual.Individual.is_counterfactual))) &&
                              ((o_eq_int_int
                                  (event.TaxReturnEvent.tax_year)
                                  tax_year) &&
                                 (event.TaxReturnEvent.filed_joint_return))))
                      false tax_return_events))
              dependents_after_b1))),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=5331; start_column=5;
             end_line=5358; end_column=8;
             law_headings=["============================= SECTION 152 IRCSIMPLIFIED DEFINITIONS ============================="]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1876; start_column=11;
                           end_line=1876; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualSection152DependentsOutput.t =
    match
      (Optional.Present
         (({IndividualSection152DependentsOutput.taxpayer =
              taxpayer;
              IndividualSection152DependentsOutput.dependents_initial =
                dependents_initial__1;
              IndividualSection152DependentsOutput.dependents_after_152b1 =
                dependents_after_152b1;
              IndividualSection152DependentsOutput.dependents_after_152b2 =
                dependents_after_152b2;
              IndividualSection152DependentsOutput.qualifying_children =
                qualifying_children__1;
              IndividualSection152DependentsOutput.qualifying_relatives =
                qualifying_relatives__1;
              IndividualSection152DependentsOutput.individual_dependent_statuses =
                individual_dependent_statuses__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1955; start_column=5;
             end_line=1966; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1882; start_column=10;
                           end_line=1882; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualSection152Dependents.main_output =
     main_output}

(* Scope IndividualTaxReturnSection2bHeadOfHousehold *)
let individual_tax_return_section2b_head_of_household :
  IndividualTaxReturnSection2bHeadOfHousehold_in.t -> IndividualTaxReturnSection2bHeadOfHousehold.t =
  fun individual_tax_return_section2b_head_of_household_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.individual_tax_return_in
    in
  let nonresident_alien_status_period_events: NonresidentAlienStatusPeriodEvent.t
                                              array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.nonresident_alien_status_period_events_in
    in
  let parenthood_events: ParenthoodEvent.t array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.parenthood_events_in
    in
  let household_maintenance_events: HouseholdMaintenanceEvent.t
                                    array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.household_maintenance_events_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.residence_period_events_in
    in
  let marriage_events: MarriageEvent.t array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.marriage_events_in
    in
  let divorce_or_legal_separation_events: DivorceOrLegalSeparationEvent.t
                                          array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.divorce_or_legal_separation_events_in
    in
  let family_relationship_events: FamilyRelationshipEvent.t
                                  array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.family_relationship_events_in
    in
  let birth_events: BirthEvent.t array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.birth_events_in
    in
  let tax_return_events: TaxReturnEvent.t array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.tax_return_events_in
    in
  let taxpayer_exemptions_list_result: TaxpayerExemptionsList151Output.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.taxpayer_exemptions_list_result_in
    in
  let taxpayer_dependents_result: IndividualSection152DependentsOutput.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.taxpayer_dependents_result_in
    in
  let death_events: DeathEvent.t array =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.death_events_in
    in
  let is_surviving_spouse_2_a: bool =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.is_surviving_spouse_2_a_in
    in
  let qualifying_person_qualifying_child_result: (((IndividualSection152QualifyingChildOutput.t) Optional.t
                                                    *
                                                    code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.qualifying_person_qualifying_child_result_in
    in
  let is_legally_separated_2_b_2_a: ((bool *
                                       code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.is_legally_separated_2_b_2_A_in
    in
  let spouse_is_nonresident_alien_2_b_2_b: ((bool
                                              *
                                              code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.spouse_is_nonresident_alien_2_b_2_B_in
    in
  let spouse_died_during_year_2_b_2_c: ((bool *
                                          code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.spouse_died_during_year_2_b_2_C_in
    in
  let is_married_at_year_end_2_b_2: ((bool *
                                       code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.is_married_at_year_end_2_b_2_in
    in
  let taxpayer_is_nonresident_alien_2_b_3_a: ((bool
                                                *
                                                code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.taxpayer_is_nonresident_alien_2_b_3_A_in
    in
  let head_of_household_disqualified_household_member_dependent_2_b_3_b: 
    ((bool * code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.head_of_household_disqualified_household_member_dependent_2_b_3_B_in
    in
  let is_married_at_year_end_2_b_1_a_i_i: ((bool
                                             *
                                             code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.is_married_at_year_end_2_b_1_A_i_I_in
    in
  let is_not_dependent_by_152b2_2_b_1_a_i_i_i: ((bool
                                                  *
                                                  code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.is_not_dependent_by_152b2_2_b_1_A_i_II_in
    in
  let qualifying_child_meets_2_b_1_a_i: ((bool *
                                           code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.qualifying_child_meets_2_b_1_A_i_in
    in
  let other_dependent_2_b_1_a_ii: ((bool *
                                     code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.other_dependent_2_b_1_A_ii_in
    in
  let maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_a: 
    ((bool * code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_A_in
    in
  let maintains_household_for_father_or_mother_2_b_1_b: ((bool
                                                           *
                                                           code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.maintains_household_for_father_or_mother_2_b_1_B_in
    in
  let is_head_of_household_2_b: ((bool *
                                   code_location)) Optional.t =
    individual_tax_return_section2b_head_of_household_in.IndividualTaxReturnSection2bHeadOfHousehold_in.is_head_of_household_2_b_in
    in
  let taxpayer_is_nonresident_alien_2_b_3_a__1: bool =
    match
      (match
         taxpayer_is_nonresident_alien_2_b_3_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (o_fold
                          (fun (acc: bool)
                             (residency_event:
                               NonresidentAlienStatusPeriodEvent.t) ->
                             acc ||
                               (((o_eq_int_int
                                    ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.id)
                                    (taxpayer_local.Individual.id)) &&
                                   (o_eq_boo_boo
                                      ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.is_counterfactual)
                                      (taxpayer_local.Individual.is_counterfactual))) &&
                                  ((o_lte_dat_dat
                                      (residency_event.NonresidentAlienStatusPeriodEvent.start_date)
                                      year_end_local) &&
                                     ((o_gte_dat_dat
                                         (residency_event.NonresidentAlienStatusPeriodEvent.end_date)
                                         ((Date_en.of_year_month_day)
                                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                              start_line=4608; start_column=39;
                                              end_line=4608; end_column=61;
                                              law_headings=["============================= SECTION 2 ============================="]})
                                            (individual_tax_return.IndividualTaxReturn.tax_year)
                                            (integer_of_string
                                            "1")
                                            (integer_of_string
                                            "1"))) &&
                                        (o_eq
                                           (residency_event.NonresidentAlienStatusPeriodEvent.residency_status)
                                           (ResidencyStatus.NonresidentAlien))))))
                          false
                          nonresident_alien_status_period_events))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4603; start_column=5;
                         end_line=4609; end_column=78;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1156; start_column=11;
                                       end_line=1156; end_column=48;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1156; start_column=11;
                  end_line=1156; end_column=48;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1156; start_column=11;
                           end_line=1156; end_column=48;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let spouse_is_nonresident_alien_2_b_2_b__1: bool =
    match
      (match spouse_is_nonresident_alien_2_b_2_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (let spouse_local :
                          (Individual.t) Optional.t
                          =
                          (get_last_spouse_from_marriage_events
                             taxpayer_local
                             marriage_events
                             year_end_local) in
                       (match spouse_local
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present s ->
                            (o_fold
                               (fun (acc: bool)
                                  (residency_event:
                                    NonresidentAlienStatusPeriodEvent.t) ->
                                  acc ||
                                    (((o_eq_int_int
                                         ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.id)
                                         (s.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.is_counterfactual)
                                           (s.Individual.is_counterfactual))) &&
                                       ((o_lte_dat_dat
                                           (residency_event.NonresidentAlienStatusPeriodEvent.start_date)
                                           year_end_local) &&
                                          ((o_gte_dat_dat
                                              (residency_event.NonresidentAlienStatusPeriodEvent.end_date)
                                              ((Date_en.of_year_month_day)
                                                 ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                   start_line=4502; start_column=41;
                                                   end_line=4502; end_column=63;
                                                   law_headings=["============================= SECTION 2 ============================="]})
                                                 (individual_tax_return.IndividualTaxReturn.tax_year)
                                                 (integer_of_string
                                                 "1")
                                                 (integer_of_string
                                                 "1"))) &&
                                             (o_eq
                                                (residency_event.NonresidentAlienStatusPeriodEvent.residency_status)
                                                (ResidencyStatus.NonresidentAlien))))))
                               false
                               nonresident_alien_status_period_events))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4494; start_column=5;
                         end_line=4504; end_column=22;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1153; start_column=11;
                                       end_line=1153; end_column=46;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1153; start_column=11;
                  end_line=1153; end_column=46;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1153; start_column=11;
                           end_line=1153; end_column=46;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_married_at_year_end_2_b_1_a_i_i__1: bool =
    match
      (match is_married_at_year_end_2_b_1_a_i_i
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let year_end_local : date
                         =
                         (get_year_end
                            (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (match
                          (individual_tax_return.IndividualTaxReturn.details)
                        with
                        | FilingStatusVariant.JointReturn _ ->
                            false
                        | FilingStatusVariant.SurvivingSpouse _ ->
                            false
                        | FilingStatusVariant.HeadOfHousehold variant ->
                            (o_fold
                               (fun (acc: bool)
                                  (marriage_event:
                                    MarriageEvent.t) ->
                                  acc ||
                                    ((((o_eq_int_int
                                          ((marriage_event.MarriageEvent.spouse1).Individual.id)
                                          ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                         (o_eq_boo_boo
                                            ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                                            ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) ||
                                        ((o_eq_int_int
                                            ((marriage_event.MarriageEvent.spouse2).Individual.id)
                                            ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                              ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual)))) &&
                                       ((o_lte_dat_dat
                                           (marriage_event.MarriageEvent.marriage_date)
                                           year_end_local) &&
                                          (o_not
                                             (o_fold
                                                (fun
                                                   (acc__1:
                                                     bool)
                                                   (divorce_event:
                                                     DivorceOrLegalSeparationEvent.t) ->
                                                   acc__1 ||
                                                     ((((o_eq_int_int
                                                           ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                                           ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                                          (o_eq_boo_boo
                                                             ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                                             ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) ||
                                                         ((o_eq_int_int
                                                             ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                                             ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                                            (o_eq_boo_boo
                                                               ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                                               ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual)))) &&
                                                        ((o_gt_dat_dat
                                                            (divorce_event.DivorceOrLegalSeparationEvent.decree_date)
                                                            (marriage_event.MarriageEvent.marriage_date)) &&
                                                           (o_lte_dat_dat
                                                              (divorce_event.DivorceOrLegalSeparationEvent.decree_date)
                                                              year_end_local))))
                                                false
                                                divorce_or_legal_separation_events)))))
                               false
                               marriage_events)
                        | FilingStatusVariant.Single _ ->
                            false
                        | FilingStatusVariant.MarriedFilingSeparate _ ->
                            false)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4177; start_column=5;
                         end_line=4192; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1158; start_column=11;
                                       end_line=1158; end_column=45;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1158; start_column=11;
                  end_line=1158; end_column=45;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1158; start_column=11;
                           end_line=1158; end_column=45;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_legally_separated_2_b_2_a__1: bool =
    match
      (match is_legally_separated_2_b_2_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (let spouse_local :
                          (Individual.t) Optional.t
                          =
                          (get_last_spouse_from_marriage_events
                             taxpayer_local
                             marriage_events
                             year_end_local) in
                       (match spouse_local
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present s ->
                            (o_fold
                               (fun (acc: bool)
                                  (divorce_event:
                                    DivorceOrLegalSeparationEvent.t) ->
                                  acc ||
                                    ((((o_eq_int_int
                                          ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                          (taxpayer_local.Individual.id)) &&
                                         (o_eq_boo_boo
                                            ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                            (taxpayer_local.Individual.is_counterfactual))) ||
                                        ((o_eq_int_int
                                            ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                            (taxpayer_local.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                              (taxpayer_local.Individual.is_counterfactual)))) &&
                                       ((((o_eq_int_int
                                             ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                             (s.Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                               (s.Individual.is_counterfactual))) ||
                                           ((o_eq_int_int
                                               ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                               (s.Individual.id)) &&
                                              (o_eq_boo_boo
                                                 ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                                 (s.Individual.is_counterfactual)))) &&
                                          (o_lte_dat_dat
                                             (divorce_event.DivorceOrLegalSeparationEvent.decree_date)
                                             year_end_local))))
                               false
                               divorce_or_legal_separation_events))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4466; start_column=5;
                         end_line=4475; end_column=22;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1152; start_column=11;
                                       end_line=1152; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1152; start_column=11;
                  end_line=1152; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1152; start_column=11;
                           end_line=1152; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let qualifying_person_qualifying_child_result__1: (IndividualSection152QualifyingChildOutput.t) Optional.t =
    match
      (match
         qualifying_person_qualifying_child_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((match
                         (individual_tax_return.IndividualTaxReturn.details)
                       with
                       | FilingStatusVariant.JointReturn _ ->
                           (Optional.Absent)
                       | FilingStatusVariant.SurvivingSpouse _ ->
                           (Optional.Absent)
                       | FilingStatusVariant.HeadOfHousehold variant ->
                           (Optional.Present
                              ((let result :
                                  IndividualSection152QualifyingChild.t
                                  =
                                  (individual_section152_qualifying_child
                                     ({IndividualSection152QualifyingChild_in.individual_in =
                                         (variant.HeadOfHouseholdVariant.qualifying_person);
                                         IndividualSection152QualifyingChild_in.taxpayer_in =
                                           (get_taxpayer
                                              individual_tax_return);
                                         IndividualSection152QualifyingChild_in.tax_year_in =
                                           (individual_tax_return.IndividualTaxReturn.tax_year);
                                         IndividualSection152QualifyingChild_in.family_relationship_events_in =
                                           family_relationship_events;
                                         IndividualSection152QualifyingChild_in.birth_events_in =
                                           birth_events;
                                         IndividualSection152QualifyingChild_in.residence_period_events_in =
                                           residence_period_events;
                                         IndividualSection152QualifyingChild_in.tax_return_events_in =
                                           tax_return_events;
                                         IndividualSection152QualifyingChild_in.relationship_requirement_met_in =
                                           (Optional.Absent);
                                         IndividualSection152QualifyingChild_in.principal_place_of_abode_requirement_met_in =
                                           (Optional.Absent);
                                         IndividualSection152QualifyingChild_in.age_requirement_met_in =
                                           (Optional.Absent);
                                         IndividualSection152QualifyingChild_in.joint_return_exception_applies_in =
                                           (Optional.Absent);
                                         IndividualSection152QualifyingChild_in.is_qualifying_child_in =
                                           (Optional.Absent)}))
                              in
                              (let result__1 :
                                 IndividualSection152QualifyingChild.t
                                 =
                                 ({IndividualSection152QualifyingChild.main_output =
                                     (result.IndividualSection152QualifyingChild.main_output)})
                              in
                              ( if true then
                                 result__1 else
                                 result__1))).IndividualSection152QualifyingChild.main_output))
                       | FilingStatusVariant.Single _ ->
                           (Optional.Absent)
                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                           (Optional.Absent)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=1225; start_column=5;
                         end_line=1241; end_column=74;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1151; start_column=11;
                                       end_line=1151; end_column=52;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1151; start_column=11;
                  end_line=1151; end_column=52;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1151; start_column=11;
                           end_line=1151; end_column=52;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let maintains_household_for_father_or_mother_2_b_1_b__1: bool =
    match
      (match
         maintains_household_for_father_or_mother_2_b_1_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (match
                          (individual_tax_return.IndividualTaxReturn.details)
                        with
                        | FilingStatusVariant.JointReturn _ ->
                            false
                        | FilingStatusVariant.SurvivingSpouse _ ->
                            false
                        | FilingStatusVariant.HeadOfHousehold variant ->
                            (let
                               qualifying_person_is_father_or_mother_local
                               : bool =
                               ((o_fold
                                   (fun
                                      (acc: bool)
                                      (parenthood_event:
                                        ParenthoodEvent.t) ->
                                      acc ||
                                        (((o_eq_int_int
                                             ((parenthood_event.ParenthoodEvent.parent).Individual.id)
                                             ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                            (o_eq_boo_boo
                                               ((parenthood_event.ParenthoodEvent.parent).Individual.is_counterfactual)
                                               ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) &&
                                           (((o_eq_int_int
                                                ((parenthood_event.ParenthoodEvent.child).Individual.id)
                                                (taxpayer_local.Individual.id)) &&
                                               (o_eq_boo_boo
                                                  ((parenthood_event.ParenthoodEvent.child).Individual.is_counterfactual)
                                                  (taxpayer_local.Individual.is_counterfactual))) &&
                                              ((o_lte_dat_dat
                                                  (parenthood_event.ParenthoodEvent.start_date)
                                                  year_end_local) &&
                                                 ((o_eq
                                                     (parenthood_event.ParenthoodEvent.parent_type)
                                                     (ParentType.Biological)) ||
                                                    (o_eq
                                                       (parenthood_event.ParenthoodEvent.parent_type)
                                                       (ParentType.Adoptive)))))))
                                   false
                                   parenthood_events) ||
                                  (o_fold
                                     (fun
                                        (acc:
                                          bool)
                                        (family_relationship_event:
                                          FamilyRelationshipEvent.t) ->
                                        acc ||
                                          (((o_eq_int_int
                                               ((family_relationship_event.FamilyRelationshipEvent.person).Individual.id)
                                               (taxpayer_local.Individual.id)) &&
                                              (o_eq_boo_boo
                                                 ((family_relationship_event.FamilyRelationshipEvent.person).Individual.is_counterfactual)
                                                 (taxpayer_local.Individual.is_counterfactual))) &&
                                             (((o_eq_int_int
                                                  ((family_relationship_event.FamilyRelationshipEvent.relative).Individual.id)
                                                  ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                                 (o_eq_boo_boo
                                                    ((family_relationship_event.FamilyRelationshipEvent.relative).Individual.is_counterfactual)
                                                    ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) &&
                                                ((o_lte_dat_dat
                                                    (family_relationship_event.FamilyRelationshipEvent.start_date)
                                                    year_end_local) &&
                                                   ((o_eq
                                                       (family_relationship_event.FamilyRelationshipEvent.relationship_type)
                                                       (FamilyRelationshipType.Father)) ||
                                                      (o_eq
                                                         (family_relationship_event.FamilyRelationshipEvent.relationship_type)
                                                         (FamilyRelationshipType.Mother)))))))
                                     false
                                     family_relationship_events))
                            in
                            (let
                               father_or_mother_has_principal_place_of_abode_local
                               : bool =
                               (o_fold
                                  (fun
                                     (acc: bool)
                                     (maintenance_event:
                                       HouseholdMaintenanceEvent.t) ->
                                     acc ||
                                       (((o_eq_int_int
                                            ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.id)
                                            (taxpayer_local.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.is_counterfactual)
                                              (taxpayer_local.Individual.is_counterfactual))) &&
                                          ((o_lte_dat_dat
                                              (maintenance_event.HouseholdMaintenanceEvent.start_date)
                                              year_end_local) &&
                                             ((o_gte_dat_dat
                                                 (maintenance_event.HouseholdMaintenanceEvent.end_date)
                                                 ((Date_en.of_year_month_day)
                                                    ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                      start_line=4402; start_column=43;
                                                      end_line=4402; end_column=65;
                                                      law_headings=["============================= SECTION 2 ============================="]})
                                                    (individual_tax_return.IndividualTaxReturn.tax_year)
                                                    (integer_of_string
                                                    "1")
                                                    (integer_of_string
                                                    "1"))) &&
                                                ((o_gt_rat_rat
                                                    (maintenance_event.HouseholdMaintenanceEvent.cost_furnished_percentage)
                                                    (decimal_of_string "1/2")) &&
                                                   (o_fold
                                                      (fun
                                                         (acc__1:
                                                           bool)
                                                         (residence_event:
                                                           ResidencePeriodEvent.t) ->
                                                         acc__1 ||
                                                           (((o_eq_int_int
                                                                ((residence_event.ResidencePeriodEvent.individual).Individual.id)
                                                                ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                                               (o_eq_boo_boo
                                                                  ((residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                                                  ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) &&
                                                              (((o_eq_int_int
                                                                   ((residence_event.ResidencePeriodEvent.household).Household.id)
                                                                   ((maintenance_event.HouseholdMaintenanceEvent.household).Household.id)) &&
                                                                  (o_eq_boo_boo
                                                                    ((residence_event.ResidencePeriodEvent.household).Household.is_counterfactual)
                                                                    ((maintenance_event.HouseholdMaintenanceEvent.household).Household.is_counterfactual))) &&
                                                                 ((residence_event.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                                                    (
                                                                    (o_lte_dat_dat
                                                                    (residence_event.ResidencePeriodEvent.start_date)
                                                                    year_end_local) &&
                                                                    ((o_gte_dat_dat
                                                                    (residence_event.ResidencePeriodEvent.end_date)
                                                                    ((Date_en.of_year_month_day)
                                                                    ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                                    start_line=4409; start_column=43;
                                                                    end_line=4409; end_column=65;
                                                                    law_headings=
                                                                    ["============================= SECTION 2 ============================="]})
                                                                    (individual_tax_return.IndividualTaxReturn.tax_year)
                                                                    (integer_of_string
                                                                    "1")
                                                                    (integer_of_string
                                                                    "1"))) &&
                                                                    qualifying_person_is_father_or_mother_local))))))
                                                      false
                                                      residence_period_events))))))
                                  false
                                  household_maintenance_events)
                            in
                            (let
                               taxpayer_entitled_to_section151_for_father_or_mother_local
                               : bool =
                               (o_fold
                                  (fun
                                     (acc: bool)
                                     (entitled_individual:
                                       Individual.t) ->
                                     acc ||
                                       ((o_eq_int_int
                                           (entitled_individual.Individual.id)
                                           ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                          (o_eq_boo_boo
                                             (entitled_individual.Individual.is_counterfactual)
                                             ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))))
                                  false
                                  (taxpayer_exemptions_list_result.TaxpayerExemptionsList151Output.individuals_entitled_to_exemptions_under_151))
                            in
                            (father_or_mother_has_principal_place_of_abode_local &&
                               taxpayer_entitled_to_section151_for_father_or_mother_local))))
                        | FilingStatusVariant.Single _ ->
                            false
                        | FilingStatusVariant.MarriedFilingSeparate _ ->
                            false))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4374; start_column=5;
                         end_line=4421; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1163; start_column=11;
                                       end_line=1163; end_column=59;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1163; start_column=11;
                  end_line=1163; end_column=59;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1163; start_column=11;
                           end_line=1163; end_column=59;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let other_dependent_2_b_1_a_ii__1: bool =
    match
      (match other_dependent_2_b_1_a_ii
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((match
                         (individual_tax_return.IndividualTaxReturn.details)
                       with
                       | FilingStatusVariant.JointReturn _ ->
                           false
                       | FilingStatusVariant.SurvivingSpouse _ ->
                           false
                       | FilingStatusVariant.HeadOfHousehold variant ->
                           ((o_fold
                               (fun (acc: bool)
                                  (dependent_individual:
                                    Individual.t) ->
                                  acc ||
                                    ((o_eq_int_int
                                        (dependent_individual.Individual.id)
                                        ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                       (o_eq_boo_boo
                                          (dependent_individual.Individual.is_counterfactual)
                                          ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))))
                               false
                               (taxpayer_dependents_result.IndividualSection152DependentsOutput.dependents_after_152b2)) &&
                              (o_fold
                                 (fun (acc: bool)
                                    (entitled_individual:
                                      Individual.t) ->
                                    acc ||
                                      ((o_eq_int_int
                                          (entitled_individual.Individual.id)
                                          ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                         (o_eq_boo_boo
                                            (entitled_individual.Individual.is_counterfactual)
                                            ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))))
                                 false
                                 (taxpayer_exemptions_list_result.TaxpayerExemptionsList151Output.individuals_entitled_to_exemptions_under_151)))
                       | FilingStatusVariant.Single _ ->
                           false
                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                           false),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4285; start_column=5;
                         end_line=4301; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1161; start_column=11;
                                       end_line=1161; end_column=37;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1161; start_column=11;
                  end_line=1161; end_column=37;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1161; start_column=11;
                           end_line=1161; end_column=37;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_not_dependent_by_152b2_2_b_1_a_i_i_i__1: bool =
    match
      (match
         is_not_dependent_by_152b2_2_b_1_a_i_i_i
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((match
                         (individual_tax_return.IndividualTaxReturn.details)
                       with
                       | FilingStatusVariant.JointReturn _ ->
                           false
                       | FilingStatusVariant.SurvivingSpouse _ ->
                           false
                       | FilingStatusVariant.HeadOfHousehold variant ->
                           (o_fold
                              (fun (acc: bool)
                                 (dependent_individual:
                                   Individual.t) ->
                                 acc ||
                                   (((o_eq_int_int
                                        (dependent_individual.Individual.id)
                                        ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                       (o_eq_boo_boo
                                          (dependent_individual.Individual.is_counterfactual)
                                          ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) &&
                                      (o_not
                                         (o_fold
                                            (fun
                                               (acc__1:
                                                 bool)
                                               (dependent_individual_final:
                                                 Individual.t) ->
                                               acc__1 ||
                                                 ((o_eq_int_int
                                                     (dependent_individual_final.Individual.id)
                                                     ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                                    (o_eq_boo_boo
                                                       (dependent_individual_final.Individual.is_counterfactual)
                                                       ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))))
                                            false
                                            (taxpayer_dependents_result.IndividualSection152DependentsOutput.dependents_after_152b2)))))
                              false
                              (taxpayer_dependents_result.IndividualSection152DependentsOutput.dependents_after_152b1))
                       | FilingStatusVariant.Single _ ->
                           false
                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                           false),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4214; start_column=5;
                         end_line=4227; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1159; start_column=11;
                                       end_line=1159; end_column=49;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1159; start_column=11;
                  end_line=1159; end_column=49;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1159; start_column=11;
                           end_line=1159; end_column=49;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let head_of_household_disqualified_household_member_dependent_2_b_3_b__1: bool =
    match
      (match
         head_of_household_disqualified_household_member_dependent_2_b_3_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((match
                         (individual_tax_return.IndividualTaxReturn.details)
                       with
                       | FilingStatusVariant.JointReturn _ ->
                           false
                       | FilingStatusVariant.SurvivingSpouse _ ->
                           false
                       | FilingStatusVariant.HeadOfHousehold variant ->
                           (o_fold
                              (fun (acc: bool)
                                 (result:
                                   IndividualSection152QualifyingRelativeOutput.t) ->
                                 acc ||
                                   (((o_eq_int_int
                                        ((result.IndividualSection152QualifyingRelativeOutput.individual).Individual.id)
                                        ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                       (o_eq_boo_boo
                                          ((result.IndividualSection152QualifyingRelativeOutput.individual).Individual.is_counterfactual)
                                          ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) &&
                                      (((o_eq_int_int
                                           ((result.IndividualSection152QualifyingRelativeOutput.taxpayer).Individual.id)
                                           ((get_taxpayer
                                               individual_tax_return).Individual.id)) &&
                                          (o_eq_boo_boo
                                             ((result.IndividualSection152QualifyingRelativeOutput.taxpayer).Individual.is_counterfactual)
                                             ((get_taxpayer
                                                 individual_tax_return).Individual.is_counterfactual))) &&
                                         ((result.IndividualSection152QualifyingRelativeOutput.is_qualifying_relative) &&
                                            ((o_not
                                                (result.IndividualSection152QualifyingRelativeOutput.bears_relationship_152_d_1_A)) &&
                                               (result.IndividualSection152QualifyingRelativeOutput.is_household_member_152_d_2_H))))))
                              false
                              (taxpayer_dependents_result.IndividualSection152DependentsOutput.qualifying_relatives))
                       | FilingStatusVariant.Single _ ->
                           false
                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                           false),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4635; start_column=5;
                         end_line=4652; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1157; start_column=11;
                                       end_line=1157; end_column=76;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1157; start_column=11;
                  end_line=1157; end_column=76;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1157; start_column=11;
                           end_line=1157; end_column=76;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let spouse_died_during_year_2_b_2_c__1: bool =
    match
      (match spouse_died_during_year_2_b_2_c
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (let spouse_local :
                          (Individual.t) Optional.t
                          =
                          (get_last_spouse_from_marriage_events
                             taxpayer_local
                             marriage_events
                             year_end_local) in
                       (match spouse_local
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present s ->
                            (o_fold
                               (fun (acc: bool)
                                  (death_event:
                                    DeathEvent.t) ->
                                  acc ||
                                    (((o_eq_int_int
                                         ((death_event.DeathEvent.decedent).Individual.id)
                                         (s.Individual.id)) &&
                                        (o_eq_boo_boo
                                           ((death_event.DeathEvent.decedent).Individual.is_counterfactual)
                                           (s.Individual.is_counterfactual))) &&
                                       ((o_eq_int_int
                                           ((Date_en.get_year)
                                              (death_event.DeathEvent.death_date))
                                           (individual_tax_return.IndividualTaxReturn.tax_year)) &&
                                          (o_not
                                             (o_fold
                                                (fun
                                                   (acc__1:
                                                     bool)
                                                   (residency_event:
                                                     NonresidentAlienStatusPeriodEvent.t) ->
                                                   acc__1 ||
                                                     (((o_eq_int_int
                                                          ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.id)
                                                          (s.Individual.id)) &&
                                                         (o_eq_boo_boo
                                                            ((residency_event.NonresidentAlienStatusPeriodEvent.individual).Individual.is_counterfactual)
                                                            (s.Individual.is_counterfactual))) &&
                                                        ((o_lte_dat_dat
                                                            (residency_event.NonresidentAlienStatusPeriodEvent.start_date)
                                                            (death_event.DeathEvent.death_date)) &&
                                                           ((o_gte_dat_dat
                                                               (residency_event.NonresidentAlienStatusPeriodEvent.end_date)
                                                               ((Date_en.of_year_month_day)
                                                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                                                    start_line=4535; start_column=45;
                                                                    end_line=4535; end_column=67;
                                                                    law_headings=
                                                                    ["============================= SECTION 2 ============================="]})
                                                                  (individual_tax_return.IndividualTaxReturn.tax_year)
                                                                  (integer_of_string
                                                                  "1")
                                                                  (integer_of_string
                                                                  "1"))) &&
                                                              (o_eq
                                                                 (residency_event.NonresidentAlienStatusPeriodEvent.residency_status)
                                                                 (ResidencyStatus.NonresidentAlien))))))
                                                false
                                                nonresident_alien_status_period_events)))))
                               false death_events))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4523; start_column=5;
                         end_line=4538; end_column=22;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1154; start_column=11;
                                       end_line=1154; end_column=42;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1154; start_column=11;
                  end_line=1154; end_column=42;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1154; start_column=11;
                           end_line=1154; end_column=42;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let qualifying_child_meets_2_b_1_a_i__1: bool =
    match
      (match qualifying_child_meets_2_b_1_a_i
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((match
                         (individual_tax_return.IndividualTaxReturn.details)
                       with
                       | FilingStatusVariant.JointReturn _ ->
                           false
                       | FilingStatusVariant.SurvivingSpouse _ ->
                           false
                       | FilingStatusVariant.HeadOfHousehold _ ->
                           (let
                              is_qualifying_child_local
                              : bool =
                              (match
                                 qualifying_person_qualifying_child_result__1
                               with
                               | Optional.Absent ->
                                   false
                               | Optional.Present result ->
                                   (result.IndividualSection152QualifyingChildOutput.is_qualifying_child))
                           in
                           (is_qualifying_child_local &&
                              (o_not
                                 (is_married_at_year_end_2_b_1_a_i_i__1 &&
                                    is_not_dependent_by_152b2_2_b_1_a_i_i_i__1))))
                       | FilingStatusVariant.Single _ ->
                           false
                       | FilingStatusVariant.MarriedFilingSeparate _ ->
                           false),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4249; start_column=5;
                         end_line=4266; end_column=73;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1160; start_column=11;
                                       end_line=1160; end_column=43;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1160; start_column=11;
                  end_line=1160; end_column=43;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1160; start_column=11;
                           end_line=1160; end_column=43;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_married_at_year_end_2_b_2__1: bool =
    match
      (match is_married_at_year_end_2_b_2
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let spouse_local :
                         (Individual.t) Optional.t
                         =
                         (get_spouse
                            individual_tax_return)
                       in
                       (let taxpayer_local :
                          Individual.t =
                          (get_taxpayer
                             individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (match spouse_local
                        with
                        | Optional.Absent ->
                            false
                        | Optional.Present s ->
                            ( if
                               is_legally_separated_2_b_2_a__1
                               then false else
                               ( if
                                  spouse_is_nonresident_alien_2_b_2_b__1
                                  then false else
                                  ( if
                                     spouse_died_during_year_2_b_2_c__1
                                     then true
                                     else
                                     (o_fold
                                        (fun
                                           (acc:
                                             bool)
                                           (marriage_event:
                                             MarriageEvent.t) ->
                                           acc ||
                                             ((((o_eq_int_int
                                                   ((marriage_event.MarriageEvent.spouse1).Individual.id)
                                                   (taxpayer_local.Individual.id)) &&
                                                  (o_eq_boo_boo
                                                     ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                                                     (taxpayer_local.Individual.is_counterfactual))) ||
                                                 ((o_eq_int_int
                                                     ((marriage_event.MarriageEvent.spouse2).Individual.id)
                                                     (taxpayer_local.Individual.id)) &&
                                                    (o_eq_boo_boo
                                                       ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                                       (taxpayer_local.Individual.is_counterfactual)))) &&
                                                ((((o_eq_int_int
                                                      ((marriage_event.MarriageEvent.spouse1).Individual.id)
                                                      (s.Individual.id)) &&
                                                     (o_eq_boo_boo
                                                        ((marriage_event.MarriageEvent.spouse1).Individual.is_counterfactual)
                                                        (s.Individual.is_counterfactual))) ||
                                                    ((o_eq_int_int
                                                        ((marriage_event.MarriageEvent.spouse2).Individual.id)
                                                        (s.Individual.id)) &&
                                                       (o_eq_boo_boo
                                                          ((marriage_event.MarriageEvent.spouse2).Individual.is_counterfactual)
                                                          (s.Individual.is_counterfactual)))) &&
                                                   ((o_lte_dat_dat
                                                       (marriage_event.MarriageEvent.marriage_date)
                                                       year_end_local) &&
                                                      (o_not
                                                         (o_fold
                                                            (fun
                                                               (acc__1:
                                                                 bool)
                                                               (divorce_event:
                                                                 DivorceOrLegalSeparationEvent.t) ->
                                                               acc__1 ||
                                                                 ((((o_eq_int_int
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                                                    (taxpayer_local.Individual.id)) &&
                                                                    (o_eq_boo_boo
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                                                    (taxpayer_local.Individual.is_counterfactual))) ||
                                                                    ((o_eq_int_int
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                                                    (taxpayer_local.Individual.id)) &&
                                                                    (o_eq_boo_boo
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                                                    (taxpayer_local.Individual.is_counterfactual)))) &&
                                                                    (
                                                                    (((o_eq_int_int
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.id)
                                                                    (s.Individual.id)) &&
                                                                    (o_eq_boo_boo
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person1).Individual.is_counterfactual)
                                                                    (s.Individual.is_counterfactual))) ||
                                                                    ((o_eq_int_int
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.id)
                                                                    (s.Individual.id)) &&
                                                                    (o_eq_boo_boo
                                                                    ((divorce_event.DivorceOrLegalSeparationEvent.person2).Individual.is_counterfactual)
                                                                    (s.Individual.is_counterfactual)))) &&
                                                                    ((o_gt_dat_dat
                                                                    (divorce_event.DivorceOrLegalSeparationEvent.decree_date)
                                                                    (marriage_event.MarriageEvent.marriage_date)) &&
                                                                    (o_lte_dat_dat
                                                                    (divorce_event.DivorceOrLegalSeparationEvent.decree_date)
                                                                    year_end_local)))))
                                                            false
                                                            divorce_or_legal_separation_events))))))
                                        false
                                        marriage_events)))))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4554; start_column=5;
                         end_line=4581; end_column=22;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1155; start_column=11;
                                       end_line=1155; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1155; start_column=11;
                  end_line=1155; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1155; start_column=11;
                           end_line=1155; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_a__1: bool =
    match
      (match
         maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_a
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let taxpayer_local :
                         Individual.t =
                         (get_taxpayer
                            individual_tax_return)
                       in
                       (let year_end_local : date
                          =
                          (get_year_end
                             (individual_tax_return.IndividualTaxReturn.tax_year))
                       in
                       (let year_start_local :
                          date =
                          ((Date_en.of_year_month_day)
                             ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                               start_line=4327; start_column=33;
                               end_line=4327; end_column=55;
                               law_headings=["============================= SECTION 2 ============================="]})
                             (individual_tax_return.IndividualTaxReturn.tax_year)
                             (integer_of_string
                             "1")
                             (integer_of_string
                             "1")) in
                       (let
                          qualifying_person_has_principal_place_of_abode_more_than_half_year_local
                          : bool =
                          (match
                             (individual_tax_return.IndividualTaxReturn.details)
                           with
                           | FilingStatusVariant.JointReturn _ ->
                               false
                           | FilingStatusVariant.SurvivingSpouse _ ->
                               false
                           | FilingStatusVariant.HeadOfHousehold variant ->
                               (o_fold
                                  (fun
                                     (acc: bool)
                                     (maintenance_event:
                                       HouseholdMaintenanceEvent.t) ->
                                     acc ||
                                       (((o_eq_int_int
                                            ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.id)
                                            (taxpayer_local.Individual.id)) &&
                                           (o_eq_boo_boo
                                              ((maintenance_event.HouseholdMaintenanceEvent.individual).Individual.is_counterfactual)
                                              (taxpayer_local.Individual.is_counterfactual))) &&
                                          ((o_lte_dat_dat
                                              (maintenance_event.HouseholdMaintenanceEvent.start_date)
                                              year_end_local) &&
                                             ((o_gte_dat_dat
                                                 (maintenance_event.HouseholdMaintenanceEvent.end_date)
                                                 year_start_local) &&
                                                ((o_gt_rat_rat
                                                    (maintenance_event.HouseholdMaintenanceEvent.cost_furnished_percentage)
                                                    (decimal_of_string "1/2")) &&
                                                   (o_fold
                                                      (fun
                                                         (acc__1:
                                                           bool)
                                                         (residence_event:
                                                           ResidencePeriodEvent.t) ->
                                                         acc__1 ||
                                                           (((o_eq_int_int
                                                                ((residence_event.ResidencePeriodEvent.individual).Individual.id)
                                                                ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.id)) &&
                                                               (o_eq_boo_boo
                                                                  ((residence_event.ResidencePeriodEvent.individual).Individual.is_counterfactual)
                                                                  ((variant.HeadOfHouseholdVariant.qualifying_person).Individual.is_counterfactual))) &&
                                                              (((o_eq_int_int
                                                                   ((residence_event.ResidencePeriodEvent.household).Household.id)
                                                                   ((maintenance_event.HouseholdMaintenanceEvent.household).Household.id)) &&
                                                                  (o_eq_boo_boo
                                                                    ((residence_event.ResidencePeriodEvent.household).Household.is_counterfactual)
                                                                    ((maintenance_event.HouseholdMaintenanceEvent.household).Household.is_counterfactual))) &&
                                                                 ((residence_event.ResidencePeriodEvent.is_member_of_household) &&
                                                                    (
                                                                    (residence_event.ResidencePeriodEvent.is_principal_place_of_abode) &&
                                                                    (period_spans_more_than_half_year
                                                                    (residence_event.ResidencePeriodEvent.start_date)
                                                                    (residence_event.ResidencePeriodEvent.end_date)
                                                                    (individual_tax_return.IndividualTaxReturn.tax_year)))))))
                                                      false
                                                      residence_period_events))))))
                                  false
                                  household_maintenance_events)
                           | FilingStatusVariant.Single _ ->
                               false
                           | FilingStatusVariant.MarriedFilingSeparate _ ->
                               false) in
                       (qualifying_person_has_principal_place_of_abode_more_than_half_year_local &&
                          (qualifying_child_meets_2_b_1_a_i__1 ||
                             other_dependent_2_b_1_a_ii__1)))))),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=4325; start_column=5;
                         end_line=4351; end_column=6;
                         law_headings=["============================= SECTION 2 ============================="]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1162; start_column=11;
                                       end_line=1162; end_column=83;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1162; start_column=11;
                  end_line=1162; end_column=83;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1162; start_column=11;
                           end_line=1162; end_column=83;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_head_of_household_2_b__1: bool =
    match
      (match is_head_of_household_2_b
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (match
                     (match
                        ( if
                           head_of_household_disqualified_household_member_dependent_2_b_3_b__1
                           then
                           (Optional.Present
                              (false,
                                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                  start_line=4657; start_column=22;
                                  end_line=4657; end_column=27;
                                  law_headings=["============================= SECTION 2 ============================="]})))
                           else (Optional.Absent))
                      with
                      | Optional.Absent ->
                          ( if
                             taxpayer_is_nonresident_alien_2_b_3_a__1
                             then
                             (Optional.Present
                                (false,
                                  ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                    start_line=4614; start_column=22;
                                    end_line=4614; end_column=27;
                                    law_headings=["============================= SECTION 2 ============================="]})))
                             else
                             (Optional.Absent))
                      | Optional.Present x ->
                          (Optional.Present x))
                   with
                   | Optional.Absent ->
                       (Optional.Present
                          (((o_not
                               is_married_at_year_end_2_b_2__1) &&
                              ((o_not
                                  is_surviving_spouse_2_a) &&
                                 (maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_a__1 ||
                                    maintains_household_for_father_or_mother_2_b_1_b__1))),
                            ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                              start_line=4437; start_column=5;
                              end_line=4442; end_column=6;
                              law_headings=["============================= SECTION 2 ============================="]})))
                   | Optional.Present x ->
                       (Optional.Present x))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=1164; start_column=11;
                                       end_line=1164; end_column=35;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=1164; start_column=11;
                  end_line=1164; end_column=35;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1164; start_column=11;
                           end_line=1164; end_column=35;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let main_output: IndividualTaxReturnSection2bHeadOfHouseholdOutput.t =
    match
      (Optional.Present
         (({IndividualTaxReturnSection2bHeadOfHouseholdOutput.individual_tax_return =
              individual_tax_return;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.is_legally_separated_2_b_2_A =
                is_legally_separated_2_b_2_a__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.spouse_is_nonresident_alien_2_b_2_B =
                spouse_is_nonresident_alien_2_b_2_b__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.spouse_died_during_year_2_b_2_C =
                spouse_died_during_year_2_b_2_c__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.is_married_at_year_end_2_b_2 =
                is_married_at_year_end_2_b_2__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.taxpayer_is_nonresident_alien_2_b_3_A =
                taxpayer_is_nonresident_alien_2_b_3_a__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.head_of_household_disqualified_household_member_dependent_2_b_3_B =
                head_of_household_disqualified_household_member_dependent_2_b_3_b__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.is_married_at_year_end_2_b_1_A_i_I =
                is_married_at_year_end_2_b_1_a_i_i__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.is_not_dependent_by_152b2_2_b_1_A_i_II =
                is_not_dependent_by_152b2_2_b_1_a_i_i_i__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.qualifying_child_meets_2_b_1_A_i =
                qualifying_child_meets_2_b_1_a_i__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.other_dependent_2_b_1_A_ii =
                other_dependent_2_b_1_a_ii__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_A =
                maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_a__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.maintains_household_for_father_or_mother_2_b_1_B =
                maintains_household_for_father_or_mother_2_b_1_b__1;
              IndividualTaxReturnSection2bHeadOfHouseholdOutput.is_head_of_household_2_b =
                is_head_of_household_2_b__1}),
           ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
             start_line=1244; start_column=5;
             end_line=1259; end_column=6;
             law_headings=[]})))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=1166; start_column=10;
                           end_line=1166; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IndividualTaxReturnSection2bHeadOfHousehold.main_output =
     main_output}

(* Scope IRCSimplified *)
let i_r_c_simplified :
  IRCSimplified_in.t -> IRCSimplified.t =
  fun i_r_c_simplified_in ->
  let individual_tax_return: IndividualTaxReturn.t =
    i_r_c_simplified_in.IRCSimplified_in.individual_tax_return_in in
  let individuals: Individual.t array =
    i_r_c_simplified_in.IRCSimplified_in.individuals_in in
  let organizations: Organization.t array =
    i_r_c_simplified_in.IRCSimplified_in.organizations_in in
  let birth_events: BirthEvent.t array =
    i_r_c_simplified_in.IRCSimplified_in.birth_events_in in
  let blindness_status_events: BlindnessStatusEvent.t
                               array =
    i_r_c_simplified_in.IRCSimplified_in.blindness_status_events_in in
  let death_events: DeathEvent.t array =
    i_r_c_simplified_in.IRCSimplified_in.death_events_in in
  let nonresident_alien_status_period_events: NonresidentAlienStatusPeriodEvent.t
                                              array =
    i_r_c_simplified_in.IRCSimplified_in.nonresident_alien_status_period_events_in
    in
  let marriage_events: MarriageEvent.t array =
    i_r_c_simplified_in.IRCSimplified_in.marriage_events_in in
  let divorce_or_legal_separation_events: DivorceOrLegalSeparationEvent.t
                                          array =
    i_r_c_simplified_in.IRCSimplified_in.divorce_or_legal_separation_events_in
    in
  let residence_period_events: ResidencePeriodEvent.t
                               array =
    i_r_c_simplified_in.IRCSimplified_in.residence_period_events_in in
  let household_maintenance_events: HouseholdMaintenanceEvent.t
                                    array =
    i_r_c_simplified_in.IRCSimplified_in.household_maintenance_events_in in
  let parenthood_events: ParenthoodEvent.t array =
    i_r_c_simplified_in.IRCSimplified_in.parenthood_events_in in
  let family_relationship_events: FamilyRelationshipEvent.t
                                  array =
    i_r_c_simplified_in.IRCSimplified_in.family_relationship_events_in in
  let tax_return_events: TaxReturnEvent.t array =
    i_r_c_simplified_in.IRCSimplified_in.tax_return_events_in in
  let income_events: IncomeEvent.t array =
    i_r_c_simplified_in.IRCSimplified_in.income_events_in in
  let employment_relationship_events: EmploymentRelationshipEvent.t
                                      array =
    i_r_c_simplified_in.IRCSimplified_in.employment_relationship_events_in in
  let wage_payment_events: WagePaymentEvent.t
                           array =
    i_r_c_simplified_in.IRCSimplified_in.wage_payment_events_in in
  let student_enrollment_events: StudentEnrollmentEvent.t
                                 array =
    i_r_c_simplified_in.IRCSimplified_in.student_enrollment_events_in in
  let hospital_patient_events: HospitalPatientEvent.t
                               array =
    i_r_c_simplified_in.IRCSimplified_in.hospital_patient_events_in in
  let immigration_admission_events: ImmigrationAdmissionEvent.t
                                    array =
    i_r_c_simplified_in.IRCSimplified_in.immigration_admission_events_in in
  let employment_termination_events: EmploymentTerminationEvent.t
                                     array =
    i_r_c_simplified_in.IRCSimplified_in.employment_termination_events_in in
  let employer_unemployment_excise_tax_return: EmployerUnemploymentExciseTaxReturn.t =
    i_r_c_simplified_in.IRCSimplified_in.employer_unemployment_excise_tax_return_in
    in
  let taxable_income: ((money * code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.taxable_income_in in
  let itemized_deductions: ((money *
                              code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.itemized_deductions_in in
  let adjusted_gross_income: ((money *
                                code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.adjusted_gross_income_in in
  let taxable_income_result: ((IndividualTaxReturnSection63TaxableIncomeOutput.t
                                * code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.taxable_income_result_in in
  let tax: ((money * code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.tax_in in
  let is_surviving_spouse: ((bool *
                              code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.is_surviving_spouse_in in
  let is_head_of_household: ((bool *
                               code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.is_head_of_household_in in
  let section_2a_surviving_spouse_result: ((IndividualTaxReturnSection2aSurvivingSpouseOutput.t
                                             *
                                             code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.section_2a_surviving_spouse_result_in
    in
  let section_2b_head_of_household_result: ((IndividualTaxReturnSection2bHeadOfHouseholdOutput.t
                                              *
                                              code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.section_2b_head_of_household_result_in
    in
  let itemized_deductions_result: ((IndividualTaxReturnSection68ItemizedDeductionsOutput.t
                                     *
                                     code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.itemized_deductions_result_in in
  let taxpayer_exemptions_list_result: ((TaxpayerExemptionsList151Output.t
                                          *
                                          code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.taxpayer_exemptions_list_result_in in
  let taxpayer_exemption_result: ((IndividualSection151PersonalExemptionOutput.t
                                    *
                                    code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.taxpayer_exemption_result_in in
  let tax_imposed_result: ((IndividualTaxReturnSection1TaxOutput.t
                             * code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.tax_imposed_result_in in
  let taxpayer_dependents_result: ((IndividualSection152DependentsOutput.t
                                     *
                                     code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.taxpayer_dependents_result_in in
  let taxpayer_marital_status_7703: ((IndividualSection7703MaritalStatusOutput.t
                                       *
                                       code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.taxpayer_marital_status_7703_in in
  let organization_employer_statuses: (((OrganizationSection3306EmployerStatusOutput.t
                                         array) *
                                         code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.organization_employer_statuses_in in
  let wage_payment_wages_results: (((WagePaymentEventSection3306WagesOutput.t
                                     array) *
                                     code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.wage_payment_wages_results_in in
  let employment_relationship_employment_results: (((EmploymentRelationshipEventSection3306EmploymentOutput.t
                                                     array)
                                                     *
                                                     code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.employment_relationship_employment_results_in
    in
  let employer_unemployment_excise_tax_result: ((EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.t
                                                  *
                                                  code_location)) Optional.t =
    i_r_c_simplified_in.IRCSimplified_in.employer_unemployment_excise_tax_result_in
    in
  let itemized_deductions__1: money =
    match
      (match itemized_deductions
       with
       | Optional.Absent ->
           (Optional.Present
              ((match (Optional.Absent)
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2824; start_column=18;
                                       end_line=2824; end_column=37;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2824; start_column=18;
                  end_line=2824; end_column=37;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2824; start_column=18;
                           end_line=2824; end_column=37;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let adjusted_gross_income__1: money =
    match
      (match adjusted_gross_income
       with
       | Optional.Absent ->
           (Optional.Present
              ((match (Optional.Absent)
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2825; start_column=18;
                                       end_line=2825; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2825; start_column=18;
                  end_line=2825; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2825; start_column=18;
                           end_line=2825; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxpayer_dependents: IndividualSection152Dependents.t =
    (let result :
       IndividualSection152Dependents.t =
       (individual_section152_dependents
          ({IndividualSection152Dependents_in.taxpayer_in =
              (match
                 (Optional.Present
                    ((get_taxpayer
                        individual_tax_return),
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=3023; start_column=5;
                        end_line=3023; end_column=42;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=3022; start_column=14;
                                      end_line=3022; end_column=42;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualSection152Dependents_in.tax_year_in =
                (match
                   (Optional.Present
                      ((individual_tax_return.IndividualTaxReturn.tax_year),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3025; start_column=5;
                          end_line=3025; end_column=35;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3024; start_column=14;
                                        end_line=3024; end_column=42;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.individuals_in =
                (match
                   (Optional.Present
                      (individuals,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3027; start_column=5;
                          end_line=3027; end_column=16;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3026; start_column=14;
                                        end_line=3026; end_column=45;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.family_relationship_events_in =
                (match
                   (Optional.Present
                      (family_relationship_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3029; start_column=5;
                          end_line=3029; end_column=31;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3028; start_column=14;
                                        end_line=3028; end_column=60;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.birth_events_in =
                (match
                   (Optional.Present
                      (birth_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3031; start_column=5;
                          end_line=3031; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3030; start_column=14;
                                        end_line=3030; end_column=46;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.residence_period_events_in =
                (match
                   (Optional.Present
                      (residence_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3033; start_column=5;
                          end_line=3033; end_column=28;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3032; start_column=14;
                                        end_line=3032; end_column=57;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.tax_return_events_in =
                (match
                   (Optional.Present
                      (tax_return_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3035; start_column=5;
                          end_line=3035; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3034; start_column=14;
                                        end_line=3034; end_column=51;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.income_events_in =
                (match
                   (Optional.Present
                      (income_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3037; start_column=5;
                          end_line=3037; end_column=18;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3036; start_column=14;
                                        end_line=3036; end_column=47;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.marriage_events_in =
                (match
                   (Optional.Present
                      (marriage_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3039; start_column=5;
                          end_line=3039; end_column=20;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3038; start_column=14;
                                        end_line=3038; end_column=49;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection152Dependents_in.qualifying_children_in =
                (Optional.Absent);
              IndividualSection152Dependents_in.qualifying_relatives_in =
                (Optional.Absent);
              IndividualSection152Dependents_in.dependents_initial_in =
                (Optional.Absent);
              IndividualSection152Dependents_in.individual_dependent_statuses_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualSection152Dependents.t =
       ({IndividualSection152Dependents.main_output =
           (result.IndividualSection152Dependents.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let wage_payment_wages_results__1: WagePaymentEventSection3306WagesOutput.t
                                     array =
    match
      (match wage_payment_wages_results
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_map
                         (fun
                            (wage_event:
                              WagePaymentEvent.t) ->
                            (let result :
                               WagePaymentEventSection3306Wages.t
                               =
                               (wage_payment_event_section3306_wages
                                  ({WagePaymentEventSection3306Wages_in.wage_payment_event_in =
                                      wage_event;
                                      WagePaymentEventSection3306Wages_in.employment_termination_events_in =
                                        employment_termination_events;
                                      WagePaymentEventSection3306Wages_in.death_events_in =
                                        death_events;
                                      WagePaymentEventSection3306Wages_in.is_excluded_by_sickness_disability_death_in =
                                        (Optional.Absent);
                                      WagePaymentEventSection3306Wages_in.is_excluded_by_nonbusiness_service_in =
                                        (Optional.Absent);
                                      WagePaymentEventSection3306Wages_in.is_excluded_by_termination_payment_in =
                                        (Optional.Absent);
                                      WagePaymentEventSection3306Wages_in.is_excluded_by_agricultural_noncash_in =
                                        (Optional.Absent);
                                      WagePaymentEventSection3306Wages_in.is_excluded_by_survivor_payment_in =
                                        (Optional.Absent);
                                      WagePaymentEventSection3306Wages_in.taxable_amount_before_7000_cap_in =
                                        (Optional.Absent)}))
                            in
                            (let result__1 :
                               WagePaymentEventSection3306Wages.t
                               =
                               ({WagePaymentEventSection3306Wages.main_output =
                                   (result.WagePaymentEventSection3306Wages.main_output)})
                            in
                            ( if true then
                               result__1 else
                               result__1))).WagePaymentEventSection3306Wages.main_output)
                         wage_payment_events),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3090; start_column=5;
                         end_line=3097; end_column=20;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2858; start_column=18;
                                       end_line=2858; end_column=44;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2858; start_column=18;
                  end_line=2858; end_column=44;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2858; start_column=18;
                           end_line=2858; end_column=44;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let employment_relationship_employment_results__1: EmploymentRelationshipEventSection3306EmploymentOutput.t
                                                     array =
    match
      (match
         employment_relationship_employment_results
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((o_map
                         (fun
                            (emp_event:
                              EmploymentRelationshipEvent.t) ->
                            (let result :
                               EmploymentRelationshipEventSection3306Employment.t
                               =
                               (employment_relationship_event_section3306_employment
                                  ({EmploymentRelationshipEventSection3306Employment_in.employment_relationship_event_in =
                                      emp_event;
                                      EmploymentRelationshipEventSection3306Employment_in.calendar_year_in =
                                        (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.tax_year);
                                      EmploymentRelationshipEventSection3306Employment_in.wage_payment_events_in =
                                        wage_payment_events;
                                      EmploymentRelationshipEventSection3306Employment_in.employment_relationship_events_in =
                                        employment_relationship_events;
                                      EmploymentRelationshipEventSection3306Employment_in.student_enrollment_events_in =
                                        student_enrollment_events;
                                      EmploymentRelationshipEventSection3306Employment_in.hospital_patient_events_in =
                                        hospital_patient_events;
                                      EmploymentRelationshipEventSection3306Employment_in.immigration_admission_events_in =
                                        immigration_admission_events;
                                      EmploymentRelationshipEventSection3306Employment_in.parenthood_events_in =
                                        parenthood_events;
                                      EmploymentRelationshipEventSection3306Employment_in.birth_events_in =
                                        birth_events;
                                      EmploymentRelationshipEventSection3306Employment_in.marriage_events_in =
                                        marriage_events;
                                      EmploymentRelationshipEventSection3306Employment_in.employer_status_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_agricultural_labor_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_domestic_service_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_family_employment_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_federal_government_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_state_government_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_student_service_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_hospital_patient_service_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_foreign_government_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_student_nurse_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_international_organization_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_excluded_penal_institution_in =
                                        (Optional.Absent);
                                      EmploymentRelationshipEventSection3306Employment_in.is_employment_in =
                                        (Optional.Absent)}))
                            in
                            (let result__1 :
                               EmploymentRelationshipEventSection3306Employment.t
                               =
                               ({EmploymentRelationshipEventSection3306Employment.main_output =
                                   (result.EmploymentRelationshipEventSection3306Employment.main_output)})
                            in
                            ( if true then
                               result__1 else
                               result__1))).EmploymentRelationshipEventSection3306Employment.main_output)
                         employment_relationship_events),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3100; start_column=5;
                         end_line=3114; end_column=20;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2859; start_column=18;
                                       end_line=2859; end_column=60;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2859; start_column=18;
                  end_line=2859; end_column=60;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2859; start_column=18;
                           end_line=2859; end_column=60;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let organization_employer_statuses__1: OrganizationSection3306EmployerStatusOutput.t
                                         array =
    match
      (match organization_employer_statuses
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((let
                         organizations_with_events
                         : Organization.t array =
                         (o_filter
                            (fun
                               (org:
                                 Organization.t) ->
                               o_fold
                                 (fun (acc: bool)
                                    (wage_event:
                                      WagePaymentEvent.t) ->
                                    acc ||
                                      ((o_eq_int_int
                                          ((wage_event.WagePaymentEvent.employer).Organization.id)
                                          (org.Organization.id)) ||
                                         (o_fold
                                            (fun
                                               (acc__1:
                                                 bool)
                                               (emp_event:
                                                 EmploymentRelationshipEvent.t) ->
                                               acc__1 ||
                                                 (o_eq_int_int
                                                    ((emp_event.EmploymentRelationshipEvent.employer).Organization.id)
                                                    (org.Organization.id)))
                                            false
                                            employment_relationship_events)))
                                 false
                                 wage_payment_events)
                            organizations) in
                       (o_map
                          (fun
                             (organization:
                               Organization.t) ->
                             (let result :
                                OrganizationSection3306EmployerStatus.t
                                =
                                (organization_section3306_employer_status
                                   ({OrganizationSection3306EmployerStatus_in.organization_in =
                                       organization;
                                       OrganizationSection3306EmployerStatus_in.calendar_year_in =
                                         (employer_unemployment_excise_tax_return.EmployerUnemploymentExciseTaxReturn.tax_year);
                                       OrganizationSection3306EmployerStatus_in.wage_payment_events_in =
                                         wage_payment_events;
                                       OrganizationSection3306EmployerStatus_in.employment_relationship_events_in =
                                         employment_relationship_events;
                                       OrganizationSection3306EmployerStatus_in.is_general_employer_in =
                                         (Optional.Absent);
                                       OrganizationSection3306EmployerStatus_in.is_agricultural_employer_in =
                                         (Optional.Absent);
                                       OrganizationSection3306EmployerStatus_in.is_domestic_service_employer_in =
                                         (Optional.Absent);
                                       OrganizationSection3306EmployerStatus_in.is_employer_in =
                                         (Optional.Absent)}))
                             in
                             (let result__1 :
                                OrganizationSection3306EmployerStatus.t
                                =
                                ({OrganizationSection3306EmployerStatus.main_output =
                                    (result.OrganizationSection3306EmployerStatus.main_output)})
                             in
                             ( if true then
                                result__1 else
                                result__1))).OrganizationSection3306EmployerStatus.main_output)
                          organizations_with_events)),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3074; start_column=5;
                         end_line=3087; end_column=20;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2857; start_column=18;
                                       end_line=2857; end_column=48;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2857; start_column=18;
                  end_line=2857; end_column=48;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2857; start_column=18;
                           end_line=2857; end_column=48;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxpayer_dependents_result__1: IndividualSection152DependentsOutput.t =
    match
      (match taxpayer_dependents_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((taxpayer_dependents.IndividualSection152Dependents.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3041; start_column=5;
                         end_line=3041; end_column=36;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2851; start_column=18;
                                       end_line=2851; end_column=44;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2851; start_column=18;
                  end_line=2851; end_column=44;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2851; start_column=18;
                           end_line=2851; end_column=44;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let employer_unemployment_excise_tax: EmployerUnemploymentExciseTaxFilerSection3301Tax.t =
    (let result :
       EmployerUnemploymentExciseTaxFilerSection3301Tax.t
       =
       (employer_unemployment_excise_tax_filer_section3301_tax
          ({EmployerUnemploymentExciseTaxFilerSection3301Tax_in.employer_unemployment_excise_tax_return_in =
              (match
                 (Optional.Present
                    (employer_unemployment_excise_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=3118; start_column=5;
                        end_line=3118; end_column=44;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=3117; start_column=14;
                                      end_line=3117; end_column=86;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              EmployerUnemploymentExciseTaxFilerSection3301Tax_in.wage_payment_wages_results_in =
                (match
                   (Optional.Present
                      (wage_payment_wages_results__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3120; start_column=5;
                          end_line=3120; end_column=31;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3119; start_column=14;
                                        end_line=3119; end_column=73;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              EmployerUnemploymentExciseTaxFilerSection3301Tax_in.organization_employer_statuses_in =
                (match
                   (Optional.Present
                      (organization_employer_statuses__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3122; start_column=5;
                          end_line=3122; end_column=35;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3121; start_column=14;
                                        end_line=3121; end_column=77;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              EmployerUnemploymentExciseTaxFilerSection3301Tax_in.employment_relationship_employment_results_in =
                (match
                   (Optional.Present
                      (employment_relationship_employment_results__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3124; start_column=5;
                          end_line=3124; end_column=47;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3123; start_column=14;
                                        end_line=3123; end_column=89;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              EmployerUnemploymentExciseTaxFilerSection3301Tax_in.total_taxable_wages_in =
                (Optional.Absent);
              EmployerUnemploymentExciseTaxFilerSection3301Tax_in.excise_tax_in =
                (Optional.Absent);
              EmployerUnemploymentExciseTaxFilerSection3301Tax_in.tax_rate_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       EmployerUnemploymentExciseTaxFilerSection3301Tax.t
       =
       ({EmployerUnemploymentExciseTaxFilerSection3301Tax.total_taxable_wages =
           (result.EmployerUnemploymentExciseTaxFilerSection3301Tax.total_taxable_wages);
           EmployerUnemploymentExciseTaxFilerSection3301Tax.excise_tax =
             (result.EmployerUnemploymentExciseTaxFilerSection3301Tax.excise_tax);
           EmployerUnemploymentExciseTaxFilerSection3301Tax.tax_rate =
             (result.EmployerUnemploymentExciseTaxFilerSection3301Tax.tax_rate);
           EmployerUnemploymentExciseTaxFilerSection3301Tax.main_output =
             (result.EmployerUnemploymentExciseTaxFilerSection3301Tax.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let taxpayer_exemptions_list: TaxpayerExemptionsList151.t =
    (let result : TaxpayerExemptionsList151.t =
       (taxpayer_exemptions_list151
          ({TaxpayerExemptionsList151_in.individual_tax_return_in =
              (match
                 (Optional.Present
                    (individual_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=2994; start_column=5;
                        end_line=2994; end_column=26;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=2993; start_column=14;
                                      end_line=2993; end_column=60;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              TaxpayerExemptionsList151_in.tax_return_events_in =
                (match
                   (Optional.Present
                      (tax_return_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2996; start_column=5;
                          end_line=2996; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2995; start_column=14;
                                        end_line=2995; end_column=56;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              TaxpayerExemptionsList151_in.income_events_in =
                (match
                   (Optional.Present
                      (income_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2998; start_column=5;
                          end_line=2998; end_column=18;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2997; start_column=14;
                                        end_line=2997; end_column=52;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              TaxpayerExemptionsList151_in.dependents_in =
                (match
                   (Optional.Present
                      ((taxpayer_dependents_result__1.IndividualSection152DependentsOutput.dependents_after_152b2),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3000; start_column=5;
                          end_line=3000; end_column=54;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2999; start_column=14;
                                        end_line=2999; end_column=49;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              TaxpayerExemptionsList151_in.spouse_result_in =
                (Optional.Absent);
              TaxpayerExemptionsList151_in.individuals_entitled_to_exemptions_under_151_in =
                (Optional.Absent);
              TaxpayerExemptionsList151_in.spouse_personal_exemption_allowed_in =
                (Optional.Absent)}))
    in
    (let result__1 : TaxpayerExemptionsList151.t
       =
       ({TaxpayerExemptionsList151.main_output =
           (result.TaxpayerExemptionsList151.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let employer_unemployment_excise_tax_result__1: EmployerUnemploymentExciseTaxFilerSection3301TaxOutput.t =
    match
      (match
         employer_unemployment_excise_tax_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((employer_unemployment_excise_tax.EmployerUnemploymentExciseTaxFilerSection3301Tax.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3126; start_column=5;
                         end_line=3126; end_column=49;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2861; start_column=18;
                                       end_line=2861; end_column=57;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2861; start_column=18;
                  end_line=2861; end_column=57;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2861; start_column=18;
                           end_line=2861; end_column=57;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxpayer_exemptions_list_result__1: TaxpayerExemptionsList151Output.t =
    match
      (match taxpayer_exemptions_list_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((taxpayer_exemptions_list.TaxpayerExemptionsList151.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3002; start_column=5;
                         end_line=3002; end_column=41;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2842; start_column=18;
                                       end_line=2842; end_column=49;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2842; start_column=18;
                  end_line=2842; end_column=49;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2842; start_column=18;
                           end_line=2842; end_column=49;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxpayer_marital_status: IndividualSection7703MaritalStatus.t =
    (let result :
       IndividualSection7703MaritalStatus.t =
       (individual_section7703_marital_status
          ({IndividualSection7703MaritalStatus_in.individual_in =
              (match
                 (Optional.Present
                    ((match
                        (individual_tax_return.IndividualTaxReturn.details)
                      with
                      | FilingStatusVariant.JointReturn variant ->
                          (variant.JointReturnVariant.taxpayer)
                      | FilingStatusVariant.SurvivingSpouse variant ->
                          (variant.SurvivingSpouseVariant.taxpayer)
                      | FilingStatusVariant.HeadOfHousehold variant ->
                          (variant.HeadOfHouseholdVariant.taxpayer)
                      | FilingStatusVariant.Single variant ->
                          (variant.SingleVariant.taxpayer)
                      | FilingStatusVariant.MarriedFilingSeparate variant ->
                          (variant.MarriedFilingSeparateVariant.taxpayer)),
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=3045; start_column=5;
                        end_line=3050; end_column=84;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=3044; start_column=14;
                                      end_line=3044; end_column=48;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualSection7703MaritalStatus_in.tax_year_in =
                (match
                   (Optional.Present
                      ((individual_tax_return.IndividualTaxReturn.tax_year),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3052; start_column=5;
                          end_line=3052; end_column=35;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3051; start_column=14;
                                        end_line=3051; end_column=46;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.marriage_events_in =
                (match
                   (Optional.Present
                      (marriage_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3054; start_column=5;
                          end_line=3054; end_column=20;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3053; start_column=14;
                                        end_line=3053; end_column=53;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.divorce_or_legal_separation_events_in =
                (match
                   (Optional.Present
                      (divorce_or_legal_separation_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3056; start_column=5;
                          end_line=3056; end_column=39;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3055; start_column=14;
                                        end_line=3055; end_column=72;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.death_events_in =
                (match
                   (Optional.Present
                      (death_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3058; start_column=5;
                          end_line=3058; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3057; start_column=14;
                                        end_line=3057; end_column=50;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.individual_tax_return_in =
                (match
                   (Optional.Present
                      (individual_tax_return,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3060; start_column=5;
                          end_line=3060; end_column=26;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3059; start_column=14;
                                        end_line=3059; end_column=59;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.residence_period_events_in =
                (match
                   (Optional.Present
                      (residence_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3064; start_column=5;
                          end_line=3064; end_column=28;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3063; start_column=14;
                                        end_line=3063; end_column=61;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.household_maintenance_events_in =
                (match
                   (Optional.Present
                      (household_maintenance_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3066; start_column=5;
                          end_line=3066; end_column=33;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3065; start_column=14;
                                        end_line=3065; end_column=66;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.qualifying_children_in =
                (match
                   (Optional.Present
                      ((taxpayer_dependents_result__1.IndividualSection152DependentsOutput.qualifying_children),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3068; start_column=5;
                          end_line=3068; end_column=51;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3067; start_column=14;
                                        end_line=3067; end_column=57;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.individuals_entitled_to_exemptions_under_151_in =
                (match
                   (Optional.Present
                      ((taxpayer_exemptions_list_result__1.TaxpayerExemptionsList151Output.individuals_entitled_to_exemptions_under_151),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3062; start_column=5;
                          end_line=3062; end_column=81;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3061; start_column=14;
                                        end_line=3061; end_column=82;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection7703MaritalStatus_in.determination_date_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.is_married_at_determination_date_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.is_legally_separated_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.households_with_qualifying_child_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.households_maintained_by_individual_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.spouse_not_member_of_household_last_6_months_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.subsection_b_exception_applies_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.is_married_for_tax_purposes_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.maintains_household_with_qualifying_child_for_more_than_half_year_in =
                (Optional.Absent);
              IndividualSection7703MaritalStatus_in.furnishes_over_one_half_of_household_cost_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualSection7703MaritalStatus.t =
       ({IndividualSection7703MaritalStatus.main_output =
           (result.IndividualSection7703MaritalStatus.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let section_2a_surviving_spouse: IndividualTaxReturnSection2aSurvivingSpouse.t =
    (let result :
       IndividualTaxReturnSection2aSurvivingSpouse.t
       =
       (individual_tax_return_section2a_surviving_spouse
          ({IndividualTaxReturnSection2aSurvivingSpouse_in.individual_tax_return_in =
              (match
                 (Optional.Present
                    (individual_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=2920; start_column=5;
                        end_line=2920; end_column=26;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=2919; start_column=14;
                                      end_line=2919; end_column=63;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.death_events_in =
                (match
                   (Optional.Present
                      (death_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2922; start_column=5;
                          end_line=2922; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2921; start_column=14;
                                        end_line=2921; end_column=54;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.nonresident_alien_status_period_events_in =
                (match
                   (Optional.Present
                      (nonresident_alien_status_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2924; start_column=5;
                          end_line=2924; end_column=43;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2923; start_column=14;
                                        end_line=2923; end_column=80;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.parenthood_events_in =
                (match
                   (Optional.Present
                      (parenthood_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2926; start_column=5;
                          end_line=2926; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2925; start_column=14;
                                        end_line=2925; end_column=59;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.household_maintenance_events_in =
                (match
                   (Optional.Present
                      (household_maintenance_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2928; start_column=5;
                          end_line=2928; end_column=33;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2927; start_column=14;
                                        end_line=2927; end_column=70;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.residence_period_events_in =
                (match
                   (Optional.Present
                      (residence_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2930; start_column=5;
                          end_line=2930; end_column=28;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2929; start_column=14;
                                        end_line=2929; end_column=65;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.marriage_events_in =
                (match
                   (Optional.Present
                      (marriage_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2932; start_column=5;
                          end_line=2932; end_column=20;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2931; start_column=14;
                                        end_line=2931; end_column=57;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.taxpayer_exemptions_list_result_in =
                (match
                   (Optional.Present
                      (taxpayer_exemptions_list_result__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2934; start_column=5;
                          end_line=2934; end_column=36;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2933; start_column=14;
                                        end_line=2933; end_column=73;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2aSurvivingSpouse_in.spouse_died_within_two_years_2_a_1_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection2aSurvivingSpouse_in.maintains_household_qualifying_dependent_principal_abode_section151_2_a_1_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection2aSurvivingSpouse_in.has_remarried_2_a_2_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection2aSurvivingSpouse_in.joint_return_could_have_been_made_2_a_2_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection2aSurvivingSpouse_in.is_surviving_spouse_2_a_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualTaxReturnSection2aSurvivingSpouse.t
       =
       ({IndividualTaxReturnSection2aSurvivingSpouse.main_output =
           (result.IndividualTaxReturnSection2aSurvivingSpouse.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let taxpayer_marital_status_7703__1: IndividualSection7703MaritalStatusOutput.t =
    match
      (match taxpayer_marital_status_7703
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((taxpayer_marital_status.IndividualSection7703MaritalStatus.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3070; start_column=6;
                         end_line=3070; end_column=41;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2854; start_column=18;
                                       end_line=2854; end_column=46;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2854; start_column=18;
                  end_line=2854; end_column=46;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2854; start_column=18;
                           end_line=2854; end_column=46;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let section_2a_surviving_spouse_result__1: IndividualTaxReturnSection2aSurvivingSpouseOutput.t =
    match
      (match section_2a_surviving_spouse_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((section_2a_surviving_spouse.IndividualTaxReturnSection2aSurvivingSpouse.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2936; start_column=5;
                         end_line=2936; end_column=44;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2833; start_column=18;
                                       end_line=2833; end_column=52;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2833; start_column=18;
                  end_line=2833; end_column=52;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2833; start_column=18;
                           end_line=2833; end_column=52;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let section_2b_head_of_household: IndividualTaxReturnSection2bHeadOfHousehold.t =
    (let result :
       IndividualTaxReturnSection2bHeadOfHousehold.t
       =
       (individual_tax_return_section2b_head_of_household
          ({IndividualTaxReturnSection2bHeadOfHousehold_in.individual_tax_return_in =
              (match
                 (Optional.Present
                    (individual_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=2940; start_column=5;
                        end_line=2940; end_column=26;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=2939; start_column=14;
                                      end_line=2939; end_column=64;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.nonresident_alien_status_period_events_in =
                (match
                   (Optional.Present
                      (nonresident_alien_status_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2942; start_column=5;
                          end_line=2942; end_column=43;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2941; start_column=14;
                                        end_line=2941; end_column=81;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.parenthood_events_in =
                (match
                   (Optional.Present
                      (parenthood_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2944; start_column=5;
                          end_line=2944; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2943; start_column=14;
                                        end_line=2943; end_column=60;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.household_maintenance_events_in =
                (match
                   (Optional.Present
                      (household_maintenance_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2946; start_column=5;
                          end_line=2946; end_column=33;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2945; start_column=14;
                                        end_line=2945; end_column=71;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.residence_period_events_in =
                (match
                   (Optional.Present
                      (residence_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2948; start_column=5;
                          end_line=2948; end_column=28;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2947; start_column=14;
                                        end_line=2947; end_column=66;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.marriage_events_in =
                (match
                   (Optional.Present
                      (marriage_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2950; start_column=5;
                          end_line=2950; end_column=20;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2949; start_column=14;
                                        end_line=2949; end_column=58;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.divorce_or_legal_separation_events_in =
                (match
                   (Optional.Present
                      (divorce_or_legal_separation_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2952; start_column=5;
                          end_line=2952; end_column=39;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2951; start_column=14;
                                        end_line=2951; end_column=77;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.family_relationship_events_in =
                (match
                   (Optional.Present
                      (family_relationship_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2954; start_column=5;
                          end_line=2954; end_column=31;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2953; start_column=14;
                                        end_line=2953; end_column=69;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.birth_events_in =
                (match
                   (Optional.Present
                      (birth_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2956; start_column=5;
                          end_line=2956; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2955; start_column=14;
                                        end_line=2955; end_column=55;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.tax_return_events_in =
                (match
                   (Optional.Present
                      (tax_return_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2958; start_column=5;
                          end_line=2958; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2957; start_column=14;
                                        end_line=2957; end_column=60;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.taxpayer_exemptions_list_result_in =
                (match
                   (Optional.Present
                      (taxpayer_exemptions_list_result__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2960; start_column=5;
                          end_line=2960; end_column=36;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2959; start_column=14;
                                        end_line=2959; end_column=74;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.taxpayer_dependents_result_in =
                (match
                   (Optional.Present
                      (taxpayer_dependents_result__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2962; start_column=5;
                          end_line=2962; end_column=31;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2961; start_column=14;
                                        end_line=2961; end_column=69;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.death_events_in =
                (match
                   (Optional.Present
                      (death_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2964; start_column=5;
                          end_line=2964; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2963; start_column=14;
                                        end_line=2963; end_column=55;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.is_surviving_spouse_2_a_in =
                (match
                   (Optional.Present
                      ((section_2a_surviving_spouse_result__1.IndividualTaxReturnSection2aSurvivingSpouseOutput.is_surviving_spouse_2_a),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2966; start_column=5;
                          end_line=2966; end_column=63;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2965; start_column=14;
                                        end_line=2965; end_column=66;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection2bHeadOfHousehold_in.qualifying_person_qualifying_child_result_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.is_legally_separated_2_b_2_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.spouse_is_nonresident_alien_2_b_2_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.spouse_died_during_year_2_b_2_C_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.is_married_at_year_end_2_b_2_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.taxpayer_is_nonresident_alien_2_b_3_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.head_of_household_disqualified_household_member_dependent_2_b_3_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.is_married_at_year_end_2_b_1_A_i_I_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.is_not_dependent_by_152b2_2_b_1_A_i_II_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.qualifying_child_meets_2_b_1_A_i_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.other_dependent_2_b_1_A_ii_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.maintains_household_principal_place_of_abode_more_than_half_year_2_b_1_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.maintains_household_for_father_or_mother_2_b_1_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection2bHeadOfHousehold_in.is_head_of_household_2_b_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualTaxReturnSection2bHeadOfHousehold.t
       =
       ({IndividualTaxReturnSection2bHeadOfHousehold.main_output =
           (result.IndividualTaxReturnSection2bHeadOfHousehold.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let is_surviving_spouse__1: bool =
    match
      (match is_surviving_spouse
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((section_2a_surviving_spouse_result__1.IndividualTaxReturnSection2aSurvivingSpouseOutput.is_surviving_spouse_2_a),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2971; start_column=5;
                         end_line=2971; end_column=63;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2830; start_column=18;
                                       end_line=2830; end_column=37;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2830; start_column=18;
                  end_line=2830; end_column=37;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2830; start_column=18;
                           end_line=2830; end_column=37;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let section_2b_head_of_household_result__1: IndividualTaxReturnSection2bHeadOfHouseholdOutput.t =
    match
      (match section_2b_head_of_household_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((section_2b_head_of_household.IndividualTaxReturnSection2bHeadOfHousehold.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2968; start_column=5;
                         end_line=2968; end_column=45;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2836; start_column=18;
                                       end_line=2836; end_column=53;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2836; start_column=18;
                  end_line=2836; end_column=53;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2836; start_column=18;
                           end_line=2836; end_column=53;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let is_head_of_household__1: bool =
    match
      (match is_head_of_household
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((section_2b_head_of_household_result__1.IndividualTaxReturnSection2bHeadOfHouseholdOutput.is_head_of_household_2_b),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2973; start_column=5;
                         end_line=2973; end_column=65;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2831; start_column=18;
                                       end_line=2831; end_column=38;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2831; start_column=18;
                  end_line=2831; end_column=38;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2831; start_column=18;
                           end_line=2831; end_column=38;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let section_68_itemized_deductions: IndividualTaxReturnSection68ItemizedDeductions.t =
    (let result :
       IndividualTaxReturnSection68ItemizedDeductions.t
       =
       (individual_tax_return_section68_itemized_deductions
          ({IndividualTaxReturnSection68ItemizedDeductions_in.individual_tax_return_in =
              (match
                 (Optional.Present
                    (individual_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=2904; start_column=5;
                        end_line=2904; end_column=26;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=2903; start_column=14;
                                      end_line=2903; end_column=66;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualTaxReturnSection68ItemizedDeductions_in.adjusted_gross_income_in =
                (match
                   (Optional.Present
                      (adjusted_gross_income__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2906; start_column=5;
                          end_line=2906; end_column=26;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2905; start_column=14;
                                        end_line=2905; end_column=66;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection68ItemizedDeductions_in.itemized_deductions_in =
                (match
                   (Optional.Present
                      (itemized_deductions__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2908; start_column=5;
                          end_line=2908; end_column=24;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2907; start_column=14;
                                        end_line=2907; end_column=64;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection68ItemizedDeductions_in.taxpayer_marital_status_in =
                (match
                   (Optional.Present
                      (taxpayer_marital_status_7703__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2910; start_column=5;
                          end_line=2910; end_column=33;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2909; start_column=14;
                                        end_line=2909; end_column=68;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection68ItemizedDeductions_in.is_surviving_spouse_in =
                (match
                   (Optional.Present
                      (is_surviving_spouse__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2912; start_column=5;
                          end_line=2912; end_column=24;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2911; start_column=14;
                                        end_line=2911; end_column=64;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection68ItemizedDeductions_in.is_head_of_household_in =
                (match
                   (Optional.Present
                      (is_head_of_household__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2914; start_column=5;
                          end_line=2914; end_column=25;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2913; start_column=14;
                                        end_line=2913; end_column=65;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection68ItemizedDeductions_in.applicable_amount_68_b_1_in =
                (Optional.Absent);
              IndividualTaxReturnSection68ItemizedDeductions_in.three_percent_reduction_68_a_1_in =
                (Optional.Absent);
              IndividualTaxReturnSection68ItemizedDeductions_in.eighty_percent_reduction_68_a_2_in =
                (Optional.Absent);
              IndividualTaxReturnSection68ItemizedDeductions_in.reduction_amount_68_a_in =
                (Optional.Absent);
              IndividualTaxReturnSection68ItemizedDeductions_in.itemized_deductions_after_68_in =
                (Optional.Absent);
              IndividualTaxReturnSection68ItemizedDeductions_in.section_not_applicable_68_f_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualTaxReturnSection68ItemizedDeductions.t
       =
       ({IndividualTaxReturnSection68ItemizedDeductions.main_output =
           (result.IndividualTaxReturnSection68ItemizedDeductions.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let itemized_deductions_result__1: IndividualTaxReturnSection68ItemizedDeductionsOutput.t =
    match
      (match itemized_deductions_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((section_68_itemized_deductions.IndividualTaxReturnSection68ItemizedDeductions.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2916; start_column=5;
                         end_line=2916; end_column=47;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2839; start_column=18;
                                       end_line=2839; end_column=44;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2839; start_column=18;
                  end_line=2839; end_column=44;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2839; start_column=18;
                           end_line=2839; end_column=44;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxpayer_exemption: IndividualSection151PersonalExemption.t =
    (let result :
       IndividualSection151PersonalExemption.t =
       (individual_section151_personal_exemption
          ({IndividualSection151PersonalExemption_in.individual_in =
              (match
                 (Optional.Present
                    ((get_taxpayer
                        individual_tax_return),
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=3005; start_column=5;
                        end_line=3005; end_column=42;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=3004; start_column=14;
                                      end_line=3004; end_column=43;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualSection151PersonalExemption_in.individual_tax_return_in =
                (match
                   (Optional.Present
                      (individual_tax_return,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3007; start_column=5;
                          end_line=3007; end_column=26;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3006; start_column=14;
                                        end_line=3006; end_column=54;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151PersonalExemption_in.tax_year_in =
                (match
                   (Optional.Present
                      ((individual_tax_return.IndividualTaxReturn.tax_year),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3009; start_column=5;
                          end_line=3009; end_column=35;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3008; start_column=14;
                                        end_line=3008; end_column=41;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151PersonalExemption_in.tax_return_events_in =
                (match
                   (Optional.Present
                      (tax_return_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3011; start_column=5;
                          end_line=3011; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3010; start_column=14;
                                        end_line=3010; end_column=50;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151PersonalExemption_in.adjusted_gross_income_in =
                (match
                   (Optional.Present
                      (adjusted_gross_income__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3013; start_column=5;
                          end_line=3013; end_column=26;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3012; start_column=14;
                                        end_line=3012; end_column=54;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151PersonalExemption_in.applicable_amount_in =
                (match
                   (Optional.Present
                      ((itemized_deductions_result__1.IndividualTaxReturnSection68ItemizedDeductionsOutput.applicable_amount_68_b_1),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3015; start_column=5;
                          end_line=3015; end_column=56;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3014; start_column=14;
                                        end_line=3014; end_column=50;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151PersonalExemption_in.all_individuals_entitled_to_exemptions_under_151_in =
                (match
                   (Optional.Present
                      ((taxpayer_exemptions_list_result__1.TaxpayerExemptionsList151Output.individuals_entitled_to_exemptions_under_151),
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=3017; start_column=5;
                          end_line=3017; end_column=81;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=3016; start_column=14;
                                        end_line=3016; end_column=81;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualSection151PersonalExemption_in.exemption_amount_base_in =
                (Optional.Absent);
              IndividualSection151PersonalExemption_in.number_of_personal_exemptions_151_c_in =
                (Optional.Absent);
              IndividualSection151PersonalExemption_in.personal_exemptions_deduction_151_a_in =
                (Optional.Absent);
              IndividualSection151PersonalExemption_in.applicable_percentage_151_d_3_B_in =
                (Optional.Absent);
              IndividualSection151PersonalExemption_in.exemption_amount_zero_151_d_5_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualSection151PersonalExemption.t =
       ({IndividualSection151PersonalExemption.main_output =
           (result.IndividualSection151PersonalExemption.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let taxpayer_exemption_result__1: IndividualSection151PersonalExemptionOutput.t =
    match
      (match taxpayer_exemption_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((taxpayer_exemption.IndividualSection151PersonalExemption.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=3019; start_column=5;
                         end_line=3019; end_column=35;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2845; start_column=18;
                                       end_line=2845; end_column=43;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2845; start_column=18;
                  end_line=2845; end_column=43;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2845; start_column=18;
                           end_line=2845; end_column=43;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxable_income_computation: IndividualTaxReturnSection63TaxableIncome.t =
    (let result :
       IndividualTaxReturnSection63TaxableIncome.t
       =
       (individual_tax_return_section63_taxable_income
          ({IndividualTaxReturnSection63TaxableIncome_in.individual_tax_return_in =
              (match
                 (Optional.Present
                    (individual_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=2869; start_column=5;
                        end_line=2869; end_column=26;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=2868; start_column=14;
                                      end_line=2868; end_column=62;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.birth_events_in =
                (match
                   (Optional.Present
                      (birth_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2871; start_column=5;
                          end_line=2871; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2870; start_column=14;
                                        end_line=2870; end_column=53;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.blindness_status_events_in =
                (match
                   (Optional.Present
                      (blindness_status_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2873; start_column=5;
                          end_line=2873; end_column=28;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2872; start_column=14;
                                        end_line=2872; end_column=64;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.death_events_in =
                (match
                   (Optional.Present
                      (death_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2875; start_column=5;
                          end_line=2875; end_column=17;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2874; start_column=14;
                                        end_line=2874; end_column=53;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.income_events_in =
                (match
                   (Optional.Present
                      (income_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2877; start_column=5;
                          end_line=2877; end_column=18;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2876; start_column=14;
                                        end_line=2876; end_column=54;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.tax_return_events_in =
                (match
                   (Optional.Present
                      (tax_return_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2879; start_column=5;
                          end_line=2879; end_column=22;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2878; start_column=14;
                                        end_line=2878; end_column=58;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.nonresident_alien_status_period_events_in =
                (match
                   (Optional.Present
                      (nonresident_alien_status_period_events,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2881; start_column=5;
                          end_line=2881; end_column=43;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2880; start_column=14;
                                        end_line=2880; end_column=79;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.taxpayer_marital_status_in =
                (match
                   (Optional.Present
                      (taxpayer_marital_status_7703__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2883; start_column=5;
                          end_line=2883; end_column=33;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2882; start_column=14;
                                        end_line=2882; end_column=64;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.is_surviving_spouse_in =
                (match
                   (Optional.Present
                      (is_surviving_spouse__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2885; start_column=5;
                          end_line=2885; end_column=24;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2884; start_column=14;
                                        end_line=2884; end_column=60;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.is_head_of_household_in =
                (match
                   (Optional.Present
                      (is_head_of_household__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2887; start_column=5;
                          end_line=2887; end_column=25;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2886; start_column=14;
                                        end_line=2886; end_column=61;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.taxpayer_exemptions_list_result_in =
                (match
                   (Optional.Present
                      (taxpayer_exemptions_list_result__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2889; start_column=5;
                          end_line=2889; end_column=36;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2888; start_column=14;
                                        end_line=2888; end_column=72;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.taxpayer_exemption_result_in =
                (match
                   (Optional.Present
                      (taxpayer_exemption_result__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2891; start_column=5;
                          end_line=2891; end_column=30;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2890; start_column=14;
                                        end_line=2890; end_column=66;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.adjusted_gross_income_in =
                (match
                   (Optional.Present
                      (adjusted_gross_income__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2893; start_column=5;
                          end_line=2893; end_column=26;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2892; start_column=14;
                                        end_line=2892; end_column=62;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.itemized_deductions_result_in =
                (match
                   (Optional.Present
                      (itemized_deductions_result__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2895; start_column=5;
                          end_line=2895; end_column=31;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2894; start_column=14;
                                        end_line=2894; end_column=67;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection63TaxableIncome_in.additional_amount_taxpayer_aged_63_f_1_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.additional_amount_spouse_aged_63_f_1_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.additional_amount_taxpayer_blind_63_f_2_A_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.additional_amount_spouse_blind_63_f_2_B_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.additional_standard_deduction_63_c_3_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.basic_standard_deduction_63_c_2_before_c_5_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.standard_deduction_eligible_63_c_6_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.standard_deduction_63_c_1_in =
                (Optional.Absent);
              IndividualTaxReturnSection63TaxableIncome_in.taxable_income_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualTaxReturnSection63TaxableIncome.t
       =
       ({IndividualTaxReturnSection63TaxableIncome.main_output =
           (result.IndividualTaxReturnSection63TaxableIncome.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let taxable_income_result__1: IndividualTaxReturnSection63TaxableIncomeOutput.t =
    match
      (match taxable_income_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((taxable_income_computation.IndividualTaxReturnSection63TaxableIncome.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2897; start_column=5;
                         end_line=2897; end_column=43;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2826; start_column=18;
                                       end_line=2826; end_column=39;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2826; start_column=18;
                  end_line=2826; end_column=39;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2826; start_column=18;
                           end_line=2826; end_column=39;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let taxable_income__1: money =
    match
      (match taxable_income
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((taxable_income_result__1.IndividualTaxReturnSection63TaxableIncomeOutput.taxable_income),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2900; start_column=5;
                         end_line=2900; end_column=41;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2823; start_column=18;
                                       end_line=2823; end_column=32;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2823; start_column=18;
                  end_line=2823; end_column=32;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2823; start_column=18;
                           end_line=2823; end_column=32;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let section_1_tax: IndividualTaxReturnSection1Tax.t =
    (let result :
       IndividualTaxReturnSection1Tax.t =
       (individual_tax_return_section1_tax
          ({IndividualTaxReturnSection1Tax_in.individual_tax_return_in =
              (match
                 (Optional.Present
                    (individual_tax_return,
                      ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                        start_line=2977; start_column=5;
                        end_line=2977; end_column=26;
                        law_headings=[]})))
               with
               | Optional.Absent -> (raise
                   (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                      start_line=2976; start_column=14;
                                      end_line=2976; end_column=49;
                                      law_headings=[]}])))
               | Optional.Present arg -> (let x,
                   _ = arg in x));
              IndividualTaxReturnSection1Tax_in.taxable_income_in =
                (match
                   (Optional.Present
                      (taxable_income__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2979; start_column=5;
                          end_line=2979; end_column=19;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2978; start_column=14;
                                        end_line=2978; end_column=42;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection1Tax_in.taxpayer_marital_status_in =
                (match
                   (Optional.Present
                      (taxpayer_marital_status_7703__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2981; start_column=5;
                          end_line=2981; end_column=33;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2980; start_column=14;
                                        end_line=2980; end_column=51;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection1Tax_in.is_surviving_spouse_in =
                (match
                   (Optional.Present
                      (is_surviving_spouse__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2983; start_column=5;
                          end_line=2983; end_column=24;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2982; start_column=14;
                                        end_line=2982; end_column=47;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection1Tax_in.is_head_of_household_in =
                (match
                   (Optional.Present
                      (is_head_of_household__1,
                        ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                          start_line=2985; start_column=5;
                          end_line=2985; end_column=25;
                          law_headings=[]})))
                 with
                 | Optional.Absent -> (raise
                     (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                        start_line=2984; start_column=14;
                                        end_line=2984; end_column=48;
                                        law_headings=[]}])))
                 | Optional.Present arg -> (let
                     x, _ = arg in x));
              IndividualTaxReturnSection1Tax_in.tax_1_a_1_in =
                (Optional.Absent);
              IndividualTaxReturnSection1Tax_in.tax_1_a_2_in =
                (Optional.Absent);
              IndividualTaxReturnSection1Tax_in.tax_1_b_in =
                (Optional.Absent);
              IndividualTaxReturnSection1Tax_in.tax_1_c_in =
                (Optional.Absent);
              IndividualTaxReturnSection1Tax_in.tax_1_d_in =
                (Optional.Absent);
              IndividualTaxReturnSection1Tax_in.tax_in =
                (Optional.Absent)}))
    in
    (let result__1 :
       IndividualTaxReturnSection1Tax.t =
       ({IndividualTaxReturnSection1Tax.main_output =
           (result.IndividualTaxReturnSection1Tax.main_output)})
    in
    ( if true then result__1 else result__1))) in
  let tax_imposed_result__1: IndividualTaxReturnSection1TaxOutput.t =
    match
      (match tax_imposed_result
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((section_1_tax.IndividualTaxReturnSection1Tax.main_output),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2987; start_column=5;
                         end_line=2987; end_column=30;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2848; start_column=18;
                                       end_line=2848; end_column=36;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2848; start_column=18;
                  end_line=2848; end_column=36;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2848; start_column=18;
                           end_line=2848; end_column=36;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  let tax__1: money =
    match
      (match tax
       with
       | Optional.Absent ->
           (Optional.Present
              ((match
                  (Optional.Present
                     ((tax_imposed_result__1.IndividualTaxReturnSection1TaxOutput.tax),
                       ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                         start_line=2990; start_column=5;
                         end_line=2990; end_column=27;
                         law_headings=[]})))
                with
                | Optional.Absent -> (raise
                    (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                                       start_line=2829; start_column=18;
                                       end_line=2829; end_column=21;
                                       law_headings=[]}])))
                | Optional.Present arg -> (let x,
                    _ = arg in x)),
                ({filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                  start_line=2829; start_column=18;
                  end_line=2829; end_column=21;
                  law_headings=[]})))
       | Optional.Present x ->
           (Optional.Present x))
    with
    | Optional.Absent -> (raise
        (Error (NoValue, [{filename="/home/pranav/Downloads/Pramaana_intern/catala-lean/tests/catala_test_cases_2/sections.catala_en";
                           start_line=2829; start_column=18;
                           end_line=2829; end_column=21;
                           law_headings=[]}])))
    | Optional.Present arg -> (let x, _ = arg in
        x) in
  {IRCSimplified.taxable_income =
     taxable_income__1;
     IRCSimplified.itemized_deductions =
       itemized_deductions__1;
     IRCSimplified.adjusted_gross_income =
       adjusted_gross_income__1;
     IRCSimplified.taxable_income_result =
       taxable_income_result__1;
     IRCSimplified.tax = tax__1;
     IRCSimplified.is_surviving_spouse =
       is_surviving_spouse__1;
     IRCSimplified.is_head_of_household =
       is_head_of_household__1;
     IRCSimplified.section_2a_surviving_spouse_result =
       section_2a_surviving_spouse_result__1;
     IRCSimplified.section_2b_head_of_household_result =
       section_2b_head_of_household_result__1;
     IRCSimplified.itemized_deductions_result =
       itemized_deductions_result__1;
     IRCSimplified.taxpayer_exemptions_list_result =
       taxpayer_exemptions_list_result__1;
     IRCSimplified.taxpayer_exemption_result =
       taxpayer_exemption_result__1;
     IRCSimplified.tax_imposed_result =
       tax_imposed_result__1;
     IRCSimplified.taxpayer_dependents_result =
       taxpayer_dependents_result__1;
     IRCSimplified.taxpayer_marital_status_7703 =
       taxpayer_marital_status_7703__1;
     IRCSimplified.organization_employer_statuses =
       organization_employer_statuses__1;
     IRCSimplified.wage_payment_wages_results =
       wage_payment_wages_results__1;
     IRCSimplified.employment_relationship_employment_results =
       employment_relationship_employment_results__1;
     IRCSimplified.employer_unemployment_excise_tax_result =
       employer_unemployment_excise_tax_result__1}

let () =
  Catala_runtime.register_module "Sections"
    [ "IndividualTaxReturnSection1Tax",
        Stdlib.Obj.repr individual_tax_return_section1_tax;
      "IndividualSection151ExemptionsList",
        Stdlib.Obj.repr individual_section151_exemptions_list;
      "IndividualSection152QualifyingRelative",
        Stdlib.Obj.repr individual_section152_qualifying_relative;
      "OrganizationSection3306EmployerStatus",
        Stdlib.Obj.repr organization_section3306_employer_status;
      "WagePaymentEventSection3306Wages",
        Stdlib.Obj.repr wage_payment_event_section3306_wages;
      "TotalWages3306Calculation",
        Stdlib.Obj.repr total_wages3306_calculation;
      "get_year_end",
        Stdlib.Obj.repr get_year_end;
      "get_taxpayer",
        Stdlib.Obj.repr get_taxpayer;
      "get_spouse", Stdlib.Obj.repr get_spouse;
      "is_tax_year_2018_through_2025",
        Stdlib.Obj.repr is_tax_year_2018_through_2025;
      "get_last_spouse_from_marriage_events",
        Stdlib.Obj.repr get_last_spouse_from_marriage_events;
      "period_spans_more_than_half_year",
        Stdlib.Obj.repr period_spans_more_than_half_year;
      "EmploymentRelationshipEventSection3306Employment",
        Stdlib.Obj.repr employment_relationship_event_section3306_employment;
      "EmployerUnemploymentExciseTaxFilerSection3301Tax",
        Stdlib.Obj.repr employer_unemployment_excise_tax_filer_section3301_tax;
      "TaxpayerExemptionsList151",
        Stdlib.Obj.repr taxpayer_exemptions_list151;
      "IndividualTaxReturnSection2aSurvivingSpouse",
        Stdlib.Obj.repr individual_tax_return_section2a_surviving_spouse;
      "IndividualSection151PersonalExemption",
        Stdlib.Obj.repr individual_section151_personal_exemption;
      "IndividualTaxReturnSection68ItemizedDeductions",
        Stdlib.Obj.repr individual_tax_return_section68_itemized_deductions;
      "IndividualTaxReturnSection63TaxableIncome",
        Stdlib.Obj.repr individual_tax_return_section63_taxable_income;
      "IndividualSection7703MaritalStatus",
        Stdlib.Obj.repr individual_section7703_marital_status;
      "IndividualSection152QualifyingChild",
        Stdlib.Obj.repr individual_section152_qualifying_child;
      "IndividualSection152Dependents",
        Stdlib.Obj.repr individual_section152_dependents;
      "IndividualTaxReturnSection2bHeadOfHousehold",
        Stdlib.Obj.repr individual_tax_return_section2b_head_of_household;
      "IRCSimplified",
        Stdlib.Obj.repr i_r_c_simplified ]
    "CM0|2385a192|32e49b03|1f8c93ab"
