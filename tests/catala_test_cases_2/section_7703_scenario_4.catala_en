> Module Section_7703_scenario_4
> Using Sections as IRC

```catala
#[test]
declaration scope Section_7703_scenario_4:
  output person_status content IRC.IndividualSection7703MaritalStatusOutput

scope Section_7703_scenario_4:
  # Scenario: Legal separation under decree of separate maintenance during taxable year; not considered married under §7703(a)(2).
  # Tested law refs: §7703(a)(2)
  # Correlation: §7703(a)(2) provides that an individual legally separated under a decree of divorce or separate maintenance
  #              shall not be considered as married. We assert the scope output field "is_married_7703_a_1" is false and
  #              the legal separation flag "is_legally_separated_7703_a_2" is true.

  definition person_status equals
    let p1 equals IRC.Individual { -- id: 1 -- is_counterfactual: false } in
    let p2 equals IRC.Individual { -- id: 2 -- is_counterfactual: false } in

    let marriage1 equals IRC.MarriageEvent {
      -- id: 1
      -- spouse1: p1
      -- spouse2: p2
      -- marriage_date: Date.of_year_month_day of 2019, 3, 15
      -- is_counterfactual: false
    } in

    let separation1 equals IRC.DivorceOrLegalSeparationEvent {
      -- id: 1
      -- person1: p1
      -- person2: p2
      -- decree_date: Date.of_year_month_day of 2023, 3, 1
      -- decree_type: IRC.DecreeType.SeparateMaintenance
      -- is_counterfactual: false
    } in

    let single_details equals IRC.SingleVariant {
      -- taxpayer: p1
      -- itemization_election: false
      -- is_estate_or_trust: false
      -- is_common_trust_fund: false
      -- is_partnership: false
    } in
    let individual_tax_return equals IRC.IndividualTaxReturn {
      -- id: 1
      -- tax_year: 2023
      -- details: IRC.FilingStatusVariant.Single content single_details
    } in

    # Call §7703 marital status scope with relevant inputs
    (output of IRC.IndividualSection7703MaritalStatus with {
      -- individual: p1
      -- tax_year: 2023
      -- marriage_events: [ marriage1 ]
      -- divorce_or_legal_separation_events: [ separation1 ]
      -- death_events: []
      -- individual_tax_return: individual_tax_return
      -- residence_period_events: []
      -- household_maintenance_events: []
      -- qualifying_children: []
      -- individuals_entitled_to_exemptions_under_151: []
    }).main_output

  # Assertions:
  # Tests §7703(a)(2): legally separated under decree of separate maintenance → not considered married under §7703(a)
  assertion (person_status.is_married_7703_a_1 = false)
  # Additional check tied to §7703(a)(2): the legal separation flag is recognized
  assertion (person_status.is_legally_separated_7703_a_2 = true)
```