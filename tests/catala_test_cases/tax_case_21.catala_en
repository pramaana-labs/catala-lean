> Module Tax_case_21
> Using Sections as Sara

```catala
#[test]
declaration scope TestTaxCase21:
  output computation content Sara.IRCSimplified

scope TestTaxCase21:
  # Alice and Bob got married on Feb 3rd, 1992. Alice and Bob have a child, Charlie, born October 9th, 2000. From 2004 to 2019, Bob furnished the costs of maintaining the home where Alice, Bob and Charlie lived during that time. Charlie married Dan on Feb 14th, 2018 and they file separate tax returns in 2018. Dan's principal place of abode for 2018 is different from Charlie's. Alice's gross income in 2018 was $54232, and Bob's gross income was $43245. Alice and Bob file a joint return in 2018 and take the standard deduction.

  # How much tax does Alice have to pay in 2018? $15777

  definition computation equals
    let alice equals
      Sara.Individual {
        -- id: 1
        -- is_counterfactual: false
      } in
    let bob equals
      Sara.Individual {
        -- id: 2
        -- is_counterfactual: false
      } in
    let charlie equals
      Sara.Individual {
        -- id: 3
        -- is_counterfactual: false
      } in
    let dan equals
      Sara.Individual {
        -- id: 4
        -- is_counterfactual: false
      } in
    let charlie_birth equals
      Sara.BirthEvent {
        -- id: 3
        -- individual: charlie
        -- birth_date: Date.of_year_month_day of 2000, 10, 9
        -- is_counterfactual: false
      } in
    let alice_bob_marriage equals
      Sara.MarriageEvent {
        -- id: 1
        -- spouse1: alice
        -- spouse2: bob
        -- marriage_date: Date.of_year_month_day of 1992, 2, 3
        -- is_counterfactual: false
      } in
    let charlie_dan_marriage equals
      Sara.MarriageEvent {
        -- id: 2
        -- spouse1: charlie
        -- spouse2: dan
        -- marriage_date: Date.of_year_month_day of 2018, 2, 14
        -- is_counterfactual: false
      } in
    let alice_parenthood equals
      Sara.ParenthoodEvent {
        -- id: 1
        -- parent: alice
        -- child: charlie
        -- start_date: Date.of_year_month_day of 2000, 10, 9
        -- parent_type: Sara.ParentType.Biological
        -- is_counterfactual: false
      } in
    let bob_parenthood equals
      Sara.ParenthoodEvent {
        -- id: 2
        -- parent: bob
        -- child: charlie
        -- start_date: Date.of_year_month_day of 2000, 10, 9
        -- parent_type: Sara.ParentType.Biological
        -- is_counterfactual: false
      } in
    let alice_family_relationship equals
      Sara.FamilyRelationshipEvent {
        -- id: 1
        -- person: alice
        -- relative: charlie
        -- start_date: Date.of_year_month_day of 2000, 10, 9
        -- relationship_type: Sara.FamilyRelationshipType.Child
        -- is_counterfactual: false
      } in
    let bob_family_relationship equals
      Sara.FamilyRelationshipEvent {
        -- id: 2
        -- person: bob
        -- relative: charlie
        -- start_date: Date.of_year_month_day of 2000, 10, 9
        -- relationship_type: Sara.FamilyRelationshipType.Child
        -- is_counterfactual: false
      } in
    let charlie_family_relationship_alice equals
      Sara.FamilyRelationshipEvent {
        -- id: 3
        -- person: charlie
        -- relative: alice
        -- start_date: Date.of_year_month_day of 2000, 10, 9
        -- relationship_type: Sara.FamilyRelationshipType.Mother
        -- is_counterfactual: false
      } in
    let charlie_family_relationship_bob equals
      Sara.FamilyRelationshipEvent {
        -- id: 4
        -- person: charlie
        -- relative: bob
        -- start_date: Date.of_year_month_day of 2000, 10, 9
        -- relationship_type: Sara.FamilyRelationshipType.Father
        -- is_counterfactual: false
      } in
    let household equals
      Sara.Household {
        -- id: 1
        -- is_counterfactual: false
      } in
    let alice_residence equals
      Sara.ResidencePeriodEvent {
        -- id: 1
        -- individual: alice
        -- household: household
        -- start_date: Date.of_year_month_day of 2004, 1, 1
        -- end_date: Date.of_year_month_day of 2019, 12, 31
        -- is_member_of_household: true
        -- is_principal_place_of_abode: true
        -- is_counterfactual: false
      } in
    let bob_residence equals
      Sara.ResidencePeriodEvent {
        -- id: 2
        -- individual: bob
        -- household: household
        -- start_date: Date.of_year_month_day of 2004, 1, 1
        -- end_date: Date.of_year_month_day of 2019, 12, 31
        -- is_member_of_household: true
        -- is_principal_place_of_abode: true
        -- is_counterfactual: false
      } in
    let charlie_residence equals
      Sara.ResidencePeriodEvent {
        -- id: 3
        -- individual: charlie
        -- household: household
        -- start_date: Date.of_year_month_day of 2004, 1, 1
        -- end_date: Date.of_year_month_day of 2019, 12, 31
        -- is_member_of_household: true
        -- is_principal_place_of_abode: true
        -- is_counterfactual: false
      } in
    let dan_household equals
      Sara.Household {
        -- id: 2
        -- is_counterfactual: false
      } in
    let dan_residence equals
      Sara.ResidencePeriodEvent {
        -- id: 4
        -- individual: dan
        -- household: dan_household
        -- start_date: Date.of_year_month_day of 2018, 1, 1
        -- end_date: Date.of_year_month_day of 2018, 12, 31
        -- is_member_of_household: true
        -- is_principal_place_of_abode: true
        -- is_counterfactual: false
      } in
    let bob_household_maintenance equals
      Sara.HouseholdMaintenanceEvent {
        -- id: 1
        -- individual: bob
        -- household: household
        -- start_date: Date.of_year_month_day of 2018, 1, 1
        -- end_date: Date.of_year_month_day of 2018, 12, 31
        -- cost_furnished_percentage: 100%
        -- is_counterfactual: false
      } in
    let alice_income equals
      Sara.IncomeEvent {
        -- id: 1
        -- individual: alice
        -- tax_year: 2018
        -- has_income: true
        -- earned_income: $54232
        -- is_counterfactual: false
      } in
    let bob_income equals
      Sara.IncomeEvent {
        -- id: 2
        -- individual: bob
        -- tax_year: 2018
        -- has_income: true
        -- earned_income: $43245
        -- is_counterfactual: false
      } in
    let alice_tax_return_event equals
      Sara.TaxReturnEvent {
        -- id: 1
        -- individual: alice
        -- tax_year: 2018
        -- filed_joint_return: true
        -- is_only_for_refund_claim: false
        -- qualifying_children: []
        -- dependents: []
        -- is_counterfactual: false
      } in
    let bob_tax_return_event equals
      Sara.TaxReturnEvent {
        -- id: 2
        -- individual: bob
        -- tax_year: 2018
        -- filed_joint_return: true
        -- is_only_for_refund_claim: false
        -- qualifying_children: []
        -- dependents: []
        -- is_counterfactual: false
      } in
    let charlie_tax_return_event equals
      Sara.TaxReturnEvent {
        -- id: 3
        -- individual: charlie
        -- tax_year: 2018
        -- filed_joint_return: false
        -- is_only_for_refund_claim: false
        -- qualifying_children: []
        -- dependents: []
        -- is_counterfactual: false
      } in
    let dan_tax_return_event equals
      Sara.TaxReturnEvent {
        -- id: 4
        -- individual: dan
        -- tax_year: 2018
        -- filed_joint_return: false
        -- is_only_for_refund_claim: false
        -- qualifying_children: []
        -- dependents: []
        -- is_counterfactual: false
      } in
    let joint_return_variant equals
      Sara.JointReturnVariant {
        -- taxpayer: alice
        -- spouse: bob
        -- itemization_election: false
        -- is_estate_or_trust: false
        -- is_common_trust_fund: false
        -- is_partnership: false
      } in
    let individual_tax_return equals
      Sara.IndividualTaxReturn {
        -- id: 1
        -- tax_year: 2018
        -- details: Sara.FilingStatusVariant.JointReturn content joint_return_variant
      } in
    let dummy_org equals
      Sara.Organization {
        -- id: 0
        -- organization_type: Sara.OrganizationType.Business
        -- is_counterfactual: false
      } in
    let employer_general_variant equals
      Sara.EmployerGeneralVariant {
        -- employer: dummy_org
      } in
    let employer_tax_return equals
      Sara.EmployerUnemploymentExciseTaxReturn {
        -- id: 0
        -- tax_year: 2018
        -- details: Sara.EmployerVariant.GeneralEmployer content employer_general_variant
      } in
    let income_events_list equals [ alice_income ] ++ [ bob_income ] in
    let adjusted_gross_income equals $97477 in
    output of Sara.IRCSimplified with {
      -- individual_tax_return: individual_tax_return
      -- individuals: [ alice ] ++ [ bob ] ++ [ charlie ] ++ [ dan ]
      -- organizations: [ dummy_org ]
      -- birth_events: [ charlie_birth ]
      -- blindness_status_events: []
      -- death_events: []
      -- nonresident_alien_status_period_events: []
      -- marriage_events: [ alice_bob_marriage ] ++ [ charlie_dan_marriage ]
      -- remarriage_events: []
      -- divorce_or_legal_separation_events: []
      -- residence_period_events: [ alice_residence ] ++ [ bob_residence ] ++ [ charlie_residence ] ++ [ dan_residence ]
      -- household_maintenance_events: [ bob_household_maintenance ]
      -- parenthood_events: [ alice_parenthood ] ++ [ bob_parenthood ]
      -- family_relationship_events: [ alice_family_relationship ] ++ [ bob_family_relationship ] ++ [ charlie_family_relationship_alice ] ++ [ charlie_family_relationship_bob ]
      -- tax_return_events: [ alice_tax_return_event ] ++ [ bob_tax_return_event ] ++ [ charlie_tax_return_event ] ++ [ dan_tax_return_event ]
      -- income_events: income_events_list
      -- employment_relationship_events: []
      -- wage_payment_events: []
      -- student_enrollment_events: []
      -- hospital_patient_events: []
      -- immigration_admission_events: []
      -- employment_termination_events: []
      -- employer_unemployment_excise_tax_return: employer_tax_return
      -- adjusted_gross_income: adjusted_gross_income
    }
  assertion (round of computation.tax = $15777)
```
